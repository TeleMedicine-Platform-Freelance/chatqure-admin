{
  "openapi": "3.0.0",
  "paths": {
    "/health": {
      "get": {
        "description": "Returns status of app, database, and cache. Used by load balancers and monitoring. Not under /api/v1 prefix.",
        "operationId": "HealthController_health",
        "parameters": [],
        "responses": {
          "200": {
            "description": "App and services status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "enum": [
                        "healthy",
                        "degraded"
                      ]
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "services": {
                      "type": "object",
                      "properties": {
                        "database": {
                          "type": "string",
                          "enum": [
                            "up",
                            "down"
                          ]
                        },
                        "cache": {
                          "type": "string",
                          "enum": [
                            "up",
                            "down"
                          ]
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Health check",
        "tags": [
          "Health"
        ]
      }
    },
    "/healthz": {
      "get": {
        "description": "Simple 200 OK if process is running. Used by Kubernetes liveness. Not under /api/v1 prefix.",
        "operationId": "HealthController_healthz",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Liveness probe",
        "tags": [
          "Health"
        ]
      }
    },
    "/auth/otp/send": {
      "post": {
        "description": "Sends a 6-digit OTP to the given phone number.\n    \n**Architecture: Two-App System**\n- Patient App → Always sends role: \"PATIENT\"\n- Doctor App → Always sends role: \"DOCTOR\"\n\n**Role is required** - The app declares its role when requesting OTP.\nThis allows role-specific customization and early validation.\n\nRate limited to 5 OTPs per phone per hour and 10 per IP per hour.",
        "operationId": "AuthController_sendOtp",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendOtpDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "expiresIn": {
                      "type": "integer",
                      "example": 300
                    },
                    "message": {
                      "type": "string",
                      "example": "OTP sent successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid phone number or payload",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "phoneNumber must be a valid phone number",
                        "role must be one of: PATIENT, DOCTOR"
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Rate limit exceeded for phone or IP",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_RATE_LIMITED"
                    },
                    "message": {
                      "type": "string",
                      "example": "Too many OTP requests. Please try again later."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "retryAfter": {
                      "type": "number",
                      "example": 3600,
                      "description": "Seconds after which the client may retry"
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/auth/otp/send"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Request OTP",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/otp/verify": {
      "post": {
        "description": "Verifies a 6-digit OTP and logs the user in. Creates the account if it does not exist yet, enforcing role immutability.\n\n**Architecture: Two-App System**\n- Role is stored during OTP send (app declares its role)\n- Role in verify is **optional** (uses stored role if not provided)\n- If role is provided, validates it matches stored role\n- Clear error if wrong app is used",
        "operationId": "AuthController_verifyOtp",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyOtpDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP verified successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VerifyOtpResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid OTP, role mismatch, or malformed request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "phoneNumber must be a valid phone number",
                        "otp must be a 6 digit string"
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                },
                "examples": {
                  "invalid-otp": {
                    "summary": "Wrong OTP entered",
                    "value": {
                      "statusCode": 400,
                      "code": "AUTH_INVALID_OTP",
                      "message": "Invalid OTP. Please check and try again.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/auth/otp/verify"
                    }
                  },
                  "role-mismatch": {
                    "summary": "Role mismatch between send and verify",
                    "value": {
                      "statusCode": 400,
                      "code": "ROLE_MISMATCH",
                      "message": "OTP was sent for PATIENT role, but DOCTOR was requested. Please use the correct app or request a new OTP.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/auth/otp/verify"
                    }
                  },
                  "role-required": {
                    "summary": "Role not provided and not stored from OTP send",
                    "value": {
                      "statusCode": 400,
                      "code": "ROLE_REQUIRED",
                      "message": "Role is required. Please provide role in the request.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/auth/otp/verify"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "OTP expired, already used, or max attempts exceeded (security restrictions)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_OTP_EXPIRED"
                    },
                    "message": {
                      "type": "string",
                      "example": "OTP has expired or was not found. Please request a new OTP."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/auth/otp/verify"
                    }
                  }
                },
                "examples": {
                  "otp-expired": {
                    "summary": "OTP expired or not found",
                    "value": {
                      "statusCode": 403,
                      "code": "AUTH_OTP_EXPIRED",
                      "message": "OTP has expired or was not found. Please request a new OTP.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/auth/otp/verify"
                    }
                  },
                  "max-attempts": {
                    "summary": "Too many invalid attempts",
                    "value": {
                      "statusCode": 403,
                      "code": "AUTH_MAX_ATTEMPTS",
                      "message": "Too many incorrect attempts. Please request a new OTP.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/auth/otp/verify"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Verify OTP and login",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/refresh": {
      "post": {
        "description": "Uses a valid refresh token to obtain a new access token and a new refresh token (rotation).",
        "operationId": "AuthController_refreshToken",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tokens refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "accessToken": {
                      "type": "string"
                    },
                    "refreshToken": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Malformed refresh token payload",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "refreshToken must be a string"
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid, expired, or revoked refresh token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_SESSION_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid refresh token. Please login again."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/auth/refresh"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Refresh access token",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/logout": {
      "post": {
        "description": "Invalidates the current session for the authenticated user. Requires Bearer access token.",
        "operationId": "AuthController_logout",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Logged out successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Logged out successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing token (AUTH_TOKEN_MISSING), invalid/expired token (AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED), or invalidated session (AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/auth/logout"
                    }
                  }
                },
                "examples": {
                  "token-missing": {
                    "summary": "No Bearer token in header",
                    "value": {
                      "statusCode": 401,
                      "code": "AUTH_TOKEN_MISSING",
                      "message": "Access token is required",
                      "path": "/api/v1/auth/logout"
                    }
                  },
                  "token-invalid": {
                    "summary": "Invalid or malformed token",
                    "value": {
                      "statusCode": 401,
                      "code": "AUTH_TOKEN_INVALID",
                      "message": "Invalid access token.",
                      "path": "/api/v1/auth/logout"
                    }
                  },
                  "token-expired": {
                    "summary": "Access token expired",
                    "value": {
                      "statusCode": 401,
                      "code": "AUTH_TOKEN_EXPIRED",
                      "message": "Access token has expired. Please refresh your token.",
                      "path": "/api/v1/auth/logout"
                    }
                  },
                  "session-invalid": {
                    "summary": "Session invalidated (e.g. logout elsewhere)",
                    "value": {
                      "statusCode": 401,
                      "code": "AUTH_SESSION_INVALID",
                      "message": "Session has been invalidated. Please login again.",
                      "path": "/api/v1/auth/logout"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Logout",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/me": {
      "get": {
        "description": "Returns the current authenticated user account, profile and session info. Requires Bearer access token.",
        "operationId": "AuthController_getCurrentUser",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Current user information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetCurrentUserResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Missing token (AUTH_TOKEN_MISSING), invalid/expired token (AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED), or invalidated session (AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/auth/me"
                    }
                  }
                },
                "examples": {
                  "token-missing": {
                    "summary": "No Bearer token in header",
                    "value": {
                      "statusCode": 401,
                      "code": "AUTH_TOKEN_MISSING",
                      "message": "Access token is required",
                      "path": "/api/v1/auth/me"
                    }
                  },
                  "session-invalid": {
                    "summary": "Session invalidated",
                    "value": {
                      "statusCode": 401,
                      "code": "AUTH_SESSION_INVALID",
                      "message": "Session has been invalidated. Please login again.",
                      "path": "/api/v1/auth/me"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get current user",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/otp/send-test": {
      "post": {
        "description": "Bypasses Twilio and creates a test OTP for development/testing.\n    \n**⚠️ DEVELOPMENT ONLY** - This endpoint only works when NODE_ENV=development.\n\n**How to use:**\n1. Call this endpoint with phone number\n2. Get the OTP from response (e.g., \"123456\")\n3. Use that OTP in /auth/otp/verify endpoint\n\n**Test OTP:** Always returns \"123456\" for easy testing.",
        "operationId": "AuthController_sendTestOtp",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendOtpDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Test OTP created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "expiresIn": {
                      "type": "integer",
                      "example": 300
                    },
                    "message": {
                      "type": "string",
                      "example": "Test OTP created successfully"
                    },
                    "testOtp": {
                      "type": "string",
                      "example": "123456",
                      "description": "Use this OTP for verification"
                    },
                    "warning": {
                      "type": "string",
                      "example": "This is a test endpoint. Use /auth/otp/send in production."
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error (invalid phone number or role)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "phoneNumber must be in E.164 format (e.g. +919876543210)"
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "When NODE_ENV is not development: test endpoint is disabled and returns 500",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 500
                    },
                    "message": {
                      "type": "string",
                      "example": "Test OTP endpoint is only available in development mode. Use /auth/otp/send in production."
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "[TEST] Send Test OTP (Development Only)",
        "tags": [
          "Auth"
        ]
      }
    },
    "/shared/specializations": {
      "get": {
        "description": "Returns a list of all active medical specializations available in the system.\n    \n**Use Cases:**\n- **Patient App**: Display specialization filter options when searching for doctors\n- **Doctor App**: Display specialization dropdown during onboarding/profile setup\n- **Admin Panel**: Reference data for managing doctor profiles\n\n**Response:**\n- Returns only active specializations (where `isActive = true`)\n- Results are sorted alphabetically by name (ascending)\n- Each specialization includes `id` (UUID), `name` (display name), and optional `iconUrl` (S3/public URL for the icon)\n\n**No Authentication Required:**\nThis is a public endpoint accessible without authentication.",
        "operationId": "SharedController_getSpecializations",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of active specializations retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "example": "123e4567-e89b-12d3-a456-426614174000",
                            "description": "Unique identifier for the specialization"
                          },
                          "name": {
                            "type": "string",
                            "example": "Cardiologist",
                            "description": "Display name of the specialization"
                          },
                          "iconUrl": {
                            "type": "string",
                            "nullable": true,
                            "description": "S3 or public URL of the icon for this specialization",
                            "example": "https://your-app-uploads-prod.s3.ap-south-1.amazonaws.com/public/uploads/icons/specializations/cardiologist.svg"
                          }
                        },
                        "required": [
                          "id",
                          "name"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ],
                  "example": {
                    "data": [
                      {
                        "id": "123e4567-e89b-12d3-a456-426614174000",
                        "name": "Cardiologist",
                        "iconUrl": "https://bucket.s3.region.amazonaws.com/public/uploads/icons/specializations/cardiologist.svg"
                      },
                      {
                        "id": "223e4567-e89b-12d3-a456-426614174001",
                        "name": "Dermatologist",
                        "iconUrl": null
                      },
                      {
                        "id": "323e4567-e89b-12d3-a456-426614174002",
                        "name": "General Physician",
                        "iconUrl": null
                      }
                    ]
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "INTERNAL_SERVER_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "example": "An unexpected error occurred"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 500
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/shared/specializations"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Get all active medical specializations",
        "tags": [
          "Shared"
        ]
      }
    },
    "/shared/symptoms": {
      "get": {
        "description": "Returns a list of all active medical symptoms available in the system.\n    \n**Use Cases:**\n- **Patient App**: Display symptom search options when looking for doctors\n- **Patient App**: Enable symptom-based doctor discovery (e.g., \"Find doctors for headache\")\n- **Admin Panel**: Reference data for managing symptom-to-doctor mappings\n\n**Response:**\n- Returns only active symptoms (where `isActive = true`)\n- Results are sorted alphabetically by name (ascending)\n- Each symptom includes `id` (UUID) and `name` (display name)\n\n**No Authentication Required:**\nThis is a public endpoint accessible without authentication.",
        "operationId": "SharedController_getSymptoms",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of active symptoms retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "example": "123e4567-e89b-12d3-a456-426614174000",
                            "description": "Unique identifier for the symptom"
                          },
                          "name": {
                            "type": "string",
                            "example": "Headache",
                            "description": "Display name of the symptom"
                          }
                        },
                        "required": [
                          "id",
                          "name"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ],
                  "example": {
                    "data": [
                      {
                        "id": "123e4567-e89b-12d3-a456-426614174000",
                        "name": "Headache"
                      },
                      {
                        "id": "223e4567-e89b-12d3-a456-426614174001",
                        "name": "Fever"
                      },
                      {
                        "id": "323e4567-e89b-12d3-a456-426614174002",
                        "name": "Cough"
                      }
                    ]
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "INTERNAL_SERVER_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "example": "An unexpected error occurred"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 500
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/shared/symptoms"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Get all active medical symptoms",
        "tags": [
          "Shared"
        ]
      }
    },
    "/shared/symptom-categories": {
      "get": {
        "description": "Returns symptom categories with their symptoms for a categorized symptom picker UI.\n\n**Use Cases:**\n- **Patient App**: Render sections like \"Most Common Symptoms\", \"Male Sexual Symptoms\", \"Skin & Hair Symptoms\", each with a list of symptom tags\n- Same symptom (e.g. \"Hair fall\") can appear in multiple categories\n\n**Response:**\n- Categories ordered by `displayOrder` (asc), then by name\n- Only active categories and active symptoms\n- Each category has `id`, `name`, `displayOrder`, `symptoms` (array of `{ id, name }` ordered by displayOrder within category)\n\n**No Authentication Required:** Public endpoint.",
        "operationId": "SharedController_getSymptomCategories",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of symptom categories with symptoms",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "description": "Category ID"
                          },
                          "name": {
                            "type": "string",
                            "description": "Category name (e.g. Most Common Symptoms)"
                          },
                          "displayOrder": {
                            "type": "number",
                            "description": "Order in UI (lower first)"
                          },
                          "symptoms": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "string",
                                  "format": "uuid"
                                },
                                "name": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "name"
                              ]
                            }
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "displayOrder",
                          "symptoms"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ],
                  "example": {
                    "data": [
                      {
                        "id": "cat-uuid-1",
                        "name": "Most Common Symptoms",
                        "displayOrder": 1,
                        "symptoms": [
                          {
                            "id": "sym-uuid-1",
                            "name": "Headache"
                          },
                          {
                            "id": "sym-uuid-2",
                            "name": "Cough"
                          }
                        ]
                      },
                      {
                        "id": "cat-uuid-2",
                        "name": "Skin & Hair Symptoms",
                        "displayOrder": 2,
                        "symptoms": [
                          {
                            "id": "sym-uuid-3",
                            "name": "Hair fall"
                          },
                          {
                            "id": "sym-uuid-4",
                            "name": "Dry skin"
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "INTERNAL_SERVER_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "example": "An unexpected error occurred"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 500
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/shared/symptom-categories"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Get symptom categories with symptoms",
        "tags": [
          "Shared"
        ]
      }
    },
    "/shared/symptoms/full": {
      "get": {
        "description": "Returns both the flat symptom list and categorized symptom sections in a single response for the patient \"Search by symptoms\" screen.\n\n**Includes:**\n- `symptoms`: Flat list of all active symptoms (for search)\n- `categories`: Symptom categories with their active symptoms (for sectioned UI)\n\n**Notes:**\n- Only active symptoms and active categories are returned\n- Same symptom can appear in multiple categories",
        "operationId": "SharedController_getFullSymptomData",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Full symptom data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetFullSymptomsResponseDto"
                }
              }
            }
          }
        },
        "summary": "Get full symptom data (flat list + categories)",
        "tags": [
          "Shared"
        ]
      }
    },
    "/shared/symptoms/{symptomId}/specializations": {
      "get": {
        "description": "Returns specializations linked to the given symptom. Use when the patient selects a symptom (e.g. Chest Pain) to redirect to the right doctor list—e.g. use the first specialization and call GET /patient/doctors?specializationId=...",
        "operationId": "SharedController_getSymptomSpecializations",
        "parameters": [
          {
            "name": "symptomId",
            "required": true,
            "in": "path",
            "description": "Symptom UUID (from GET /shared/symptoms or /shared/symptom-categories)",
            "schema": {
              "example": "5d7a9c3e-2b1f-4e6a-8c9d-1e2f3a4b5c6d",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Specializations for this symptom",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "description": "Specialization UUID"
                          },
                          "name": {
                            "type": "string",
                            "description": "Specialization name (e.g. Cardiologist)"
                          }
                        },
                        "required": [
                          "id",
                          "name"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Invalid symptom UUID"
          },
          "500": {
            "description": "Internal server error"
          }
        },
        "summary": "Get specializations for a symptom",
        "tags": [
          "Shared"
        ]
      }
    },
    "/shared/languages": {
      "get": {
        "description": "Returns a list of all languages supported in the system.\n    \n**Use Cases:**\n- **Patient App**: Display language filter options when searching for doctors\n- **Doctor App**: Display language selection during profile setup (e.g., \"Languages I speak\")\n- **Admin Panel**: Reference data for managing language preferences\n\n**Response:**\n- Returns all languages (no active/inactive filter)\n- Results are sorted alphabetically by name (ascending)\n- Each language includes:\n  - `id`: UUID identifier\n  - `name`: Display name (e.g., \"English\", \"Hindi\", \"Tamil\")\n  - `code`: ISO language code (e.g., \"en\", \"hi\", \"ta\")\n\n**No Authentication Required:**\nThis is a public endpoint accessible without authentication.",
        "operationId": "SharedController_getLanguages",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of languages retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "example": "123e4567-e89b-12d3-a456-426614174000",
                            "description": "Unique identifier for the language"
                          },
                          "name": {
                            "type": "string",
                            "example": "English",
                            "description": "Display name of the language"
                          },
                          "code": {
                            "type": "string",
                            "example": "en",
                            "description": "ISO language code (e.g., en, hi, ta)"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "code"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ],
                  "example": {
                    "data": [
                      {
                        "id": "123e4567-e89b-12d3-a456-426614174000",
                        "name": "English",
                        "code": "en"
                      },
                      {
                        "id": "223e4567-e89b-12d3-a456-426614174001",
                        "name": "Hindi",
                        "code": "hi"
                      },
                      {
                        "id": "323e4567-e89b-12d3-a456-426614174002",
                        "name": "Tamil",
                        "code": "ta"
                      }
                    ]
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "INTERNAL_SERVER_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "example": "An unexpected error occurred"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 500
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/shared/languages"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Get all available languages",
        "tags": [
          "Shared"
        ]
      }
    },
    "/shared/medical-approaches": {
      "get": {
        "description": "Returns the list of supported medical approaches (departments) from the reference table.\n\n**Use Cases:**\n- **Doctor App**: Onboarding step \"Select your Department\" (Allopathy, Ayurveda, etc.)\n- **Patient App**: Optional filter by medical approach when browsing doctors\n\n**Response:**\n- Returns only active approaches (where `isActive = true`)\n- Results are sorted alphabetically by name (ascending)\n- Each item includes:\n  - `id`: UUID identifier\n  - `code`: Stable code (e.g. ALLOPATHY)\n  - `name`: Human-friendly label (e.g. \"Allopathy\")\n  - `iconUrl`: Optional S3/public URL for the approach icon (for frontend display)",
        "operationId": "SharedController_getMedicalApproaches",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of medical approaches",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "example": "123e4567-e89b-12d3-a456-426614174000"
                          },
                          "code": {
                            "type": "string",
                            "example": "ALLOPATHY"
                          },
                          "name": {
                            "type": "string",
                            "example": "Allopathy"
                          },
                          "iconUrl": {
                            "type": "string",
                            "nullable": true,
                            "example": "https://your-app-uploads-prod.s3.ap-south-1.amazonaws.com/icons/medical-approaches/allopathy.svg"
                          }
                        },
                        "required": [
                          "id",
                          "code",
                          "name"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ],
                  "example": {
                    "data": [
                      {
                        "id": "123e4567-e89b-12d3-a456-426614174000",
                        "code": "ALLOPATHY",
                        "name": "Allopathy",
                        "iconUrl": "https://your-app-uploads-prod.s3.ap-south-1.amazonaws.com/icons/medical-approaches/allopathy.svg"
                      },
                      {
                        "id": "223e4567-e89b-12d3-a456-426614174001",
                        "code": "AYURVEDA",
                        "name": "Ayurveda",
                        "iconUrl": null
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "summary": "Get medical approaches for doctor onboarding",
        "tags": [
          "Shared"
        ]
      }
    },
    "/shared/medical-conditions": {
      "get": {
        "description": "Returns a list of all active medical conditions configured in the system.\n\n**Use Cases:**\n- **Patient App**: Show medical history options like \"Diabetes Type 1\", \"Thyroid\", \"Asthma\" as selectable chips\n- **Admin Panel**: Manage the master list of medical conditions\n\n**Response:**\n- Returns only active conditions (where `isActive = true`)\n- Results are sorted alphabetically by name (ascending)\n- Each condition includes:\n  - `id`: UUID identifier\n  - `name`: Display name (e.g., \"Diabetes Type 1\")",
        "operationId": "SharedController_getMedicalConditions",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of active medical conditions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "example": "123e4567-e89b-12d3-a456-426614174000",
                            "description": "Unique identifier for the medical condition"
                          },
                          "name": {
                            "type": "string",
                            "example": "Diabetes Type 1",
                            "description": "Display name of the medical condition"
                          }
                        },
                        "required": [
                          "id",
                          "name"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ],
                  "example": {
                    "data": [
                      {
                        "id": "123e4567-e89b-12d3-a456-426614174000",
                        "name": "Diabetes Type 1"
                      },
                      {
                        "id": "223e4567-e89b-12d3-a456-426614174001",
                        "name": "Diabetes Type 2"
                      },
                      {
                        "id": "323e4567-e89b-12d3-a456-426614174002",
                        "name": "Thyroid"
                      }
                    ]
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "INTERNAL_SERVER_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "example": "An unexpected error occurred"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 500
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/shared/medical-conditions"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Get all active medical conditions",
        "tags": [
          "Shared"
        ]
      }
    },
    "/shared/medical-councils": {
      "get": {
        "description": "Returns a list of all active medical councils recognized in the system.\n    \n**Use Cases:**\n- **Doctor App**: Display medical council dropdown during KYC submission\n- **Doctor App**: Validate doctor registration number against council\n- **Admin Panel**: Reference data for verifying doctor credentials\n\n**Response:**\n- Returns only active medical councils (where `isActive = true`)\n- Results are sorted alphabetically by name (ascending)\n- Each council includes:\n  - `id`: UUID identifier\n  - `name`: Council name (e.g., \"Medical Council of India\", \"Tamil Nadu Medical Council\")\n  - `state`: State name if council is state-specific (null for national councils)\n\n**Medical Council Types:**\n- **National**: `state` is `null` (e.g., Medical Council of India)\n- **State-specific**: `state` contains state name (e.g., \"Tamil Nadu\", \"Maharashtra\")\n\n**No Authentication Required:**\nThis is a public endpoint accessible without authentication.",
        "operationId": "SharedController_getMedicalCouncils",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of active medical councils retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "example": "123e4567-e89b-12d3-a456-426614174000",
                            "description": "Unique identifier for the medical council"
                          },
                          "name": {
                            "type": "string",
                            "example": "Medical Council of India",
                            "description": "Name of the medical council"
                          },
                          "state": {
                            "type": "string",
                            "nullable": true,
                            "example": "Tamil Nadu",
                            "description": "State name if council is state-specific, null for national councils"
                          }
                        },
                        "required": [
                          "id",
                          "name",
                          "state"
                        ]
                      }
                    }
                  },
                  "required": [
                    "data"
                  ],
                  "examples": {
                    "National Council": {
                      "value": {
                        "data": [
                          {
                            "id": "123e4567-e89b-12d3-a456-426614174000",
                            "name": "Medical Council of India",
                            "state": null
                          }
                        ]
                      }
                    },
                    "State Councils": {
                      "value": {
                        "data": [
                          {
                            "id": "223e4567-e89b-12d3-a456-426614174001",
                            "name": "Tamil Nadu Medical Council",
                            "state": "Tamil Nadu"
                          },
                          {
                            "id": "323e4567-e89b-12d3-a456-426614174002",
                            "name": "Maharashtra Medical Council",
                            "state": "Maharashtra"
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "INTERNAL_SERVER_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "example": "An unexpected error occurred"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 500
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/shared/medical-councils"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Get all active medical councils",
        "tags": [
          "Shared"
        ]
      }
    },
    "/shared/doctors/{doctorId}/reviews": {
      "get": {
        "description": "Returns reviews received by a doctor (from patients after consultations).\nUsed on doctor profile to show rating and feedback. Paginated; includes average star rating.\n\n**No Authentication Required:** Public endpoint. Invalid doctorId (non-UUID) returns 400.",
        "operationId": "SharedController_getDoctorReviews",
        "parameters": [
          {
            "name": "doctorId",
            "required": true,
            "in": "path",
            "description": "Doctor account ID (UUID)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Maximum number of reviews to return (default: 20)",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of reviews to skip (default: 0)",
            "schema": {
              "minimum": 0,
              "default": 0,
              "example": 0,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of reviews with total and average stars",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewListResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid doctorId (must be UUID) or invalid pagination (limit, offset)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "oneOf": [
                        {
                          "type": "string",
                          "example": "Validation failed (uuid is expected)"
                        },
                        {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": [
                            "limit must not be greater than 100"
                          ]
                        }
                      ]
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/shared/doctors/:doctorId/reviews"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Get doctor reviews (public)",
        "tags": [
          "Shared"
        ]
      }
    },
    "/patient/reviews": {
      "get": {
        "description": "Returns reviews submitted by this patient (reviews of doctors after consultations).\nPaginated (default limit 20, offset 0).",
        "operationId": "PatientReviewsController_listMyReviews",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Maximum number of reviews to return (default: 20)",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of reviews to skip (default: 0)",
            "schema": {
              "minimum": 0,
              "default": 0,
              "example": 0,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of reviews given by this patient",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewListResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid pagination parameters (limit, offset)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "limit must not be greater than 100"
                      ]
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/reviews"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/reviews"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a patient (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/reviews"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List my reviews",
        "tags": [
          "Reviews"
        ]
      }
    },
    "/doctor/reviews": {
      "get": {
        "description": "Returns reviews received by this doctor (from patients after consultations).\nPaginated (default limit 20, offset 0).",
        "operationId": "DoctorReviewsController_listMyReviews",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Maximum number of reviews to return (default: 20)",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of reviews to skip (default: 0)",
            "schema": {
              "minimum": 0,
              "default": 0,
              "example": 0,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of reviews received by this doctor",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewListResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid pagination parameters (limit, offset)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "limit must not be greater than 100"
                      ]
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/reviews"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/reviews"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a doctor (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: DOCTOR"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/reviews"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "List my reviews",
        "tags": [
          "Reviews"
        ]
      }
    },
    "/patient/account": {
      "delete": {
        "description": "Marks the patient account for deletion with a 30-day grace period. After that, the account is anonymised but wallet/payments/transactions are kept for audit.",
        "operationId": "PatientController_requestAccountDeletion",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Account scheduled for deletion",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Account scheduled for deletion in 30 days"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Request account deletion",
        "tags": [
          "Patient"
        ]
      }
    },
    "/patient/account/cancel-deletion": {
      "post": {
        "description": "Cancels a pending account deletion request and restores the account to ACTIVE. Has no effect if the account is not pending deletion.",
        "operationId": "PatientController_cancelAccountDeletion",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Account deletion cancelled (or was not pending)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Account deletion cancelled"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Cancel account deletion",
        "tags": [
          "Patient"
        ]
      }
    },
    "/patient/profile": {
      "get": {
        "description": "Returns the current patient profile. Response shape: data.name, data.profilePictureUrl, data.dateOfBirth (DD-MM-YYYY), data.gender, data.height, data.weight, data.bloodGroup, data.medicalConditions (array of { id, name }), data.languages (array of { id, code, name }), data.favoriteDoctors (array of { doctorId, name }). data is null if profile has not been created yet.",
        "operationId": "PatientController_getProfile",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Patient profile. data is null if not created yet. data.dateOfBirth is DD-MM-YYYY.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPatientProfileResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/profile"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires PATIENT role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/profile"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get patient profile",
        "tags": [
          "Patient"
        ]
      },
      "put": {
        "description": "Creates or updates the patient profile. Optional: languageIds (spoken languages), medicalConditionIds (medical conditions from reference data). Each replaces the existing list. Favorite doctors are managed via POST/DELETE /patient/favorites/:doctorId. Payload is validated.",
        "operationId": "PatientController_updateProfile",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePatientProfileDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully; returns full profile shape (medicalConditions, languages, favoriteDoctors). dateOfBirth is DD-MM-YYYY.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdatePatientProfileResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Business validation (date of birth, language IDs, medical condition IDs) or DTO validation (body fields)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "enum": [
                        "INVALID_DATE_OF_BIRTH",
                        "INVALID_LANGUAGE_IDS",
                        "INVALID_MEDICAL_CONDITION_IDS"
                      ],
                      "example": "INVALID_DATE_OF_BIRTH"
                    },
                    "message": {
                      "oneOf": [
                        {
                          "type": "string",
                          "example": "Date of birth cannot be in the future"
                        },
                        {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": [
                            "weight must be 0 or greater"
                          ]
                        }
                      ]
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/profile"
                    }
                  }
                },
                "examples": {
                  "invalidDob": {
                    "summary": "Date of birth in the future (business rule)",
                    "value": {
                      "statusCode": 400,
                      "code": "INVALID_DATE_OF_BIRTH",
                      "message": "Date of birth cannot be in the future",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/patient/profile"
                    }
                  },
                  "invalidLanguageIds": {
                    "summary": "Invalid or inactive language IDs",
                    "value": {
                      "statusCode": 400,
                      "code": "INVALID_LANGUAGE_IDS",
                      "message": "Invalid or inactive language IDs: 550e8400-e29b-41d4-a716-446655440000",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/patient/profile"
                    }
                  },
                  "invalidMedicalConditionIds": {
                    "summary": "Invalid or inactive medical condition IDs",
                    "value": {
                      "statusCode": 400,
                      "code": "INVALID_MEDICAL_CONDITION_IDS",
                      "message": "Invalid or inactive medical condition IDs: 550e8400-e29b-41d4-a716-446655440001",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/patient/profile"
                    }
                  },
                  "validationError": {
                    "summary": "DTO validation (e.g. height/weight)",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "weight must be 0 or greater",
                        "height must be 0 or greater"
                      ],
                      "error": "Bad Request",
                      "path": "/api/v1/patient/profile"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/profile"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires PATIENT role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/profile"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Update patient profile",
        "tags": [
          "Patient"
        ]
      }
    },
    "/patient/doctors": {
      "get": {
        "description": "Returns a paginated list of VERIFIED and ACTIVE doctors. Use for browse/find-doctor screen.\n\nQuery: specializationId (optional), page, limit. Each item includes id, name, specialization, experience, medicalApproach, languages[], profilePictureUrl, ratingAvg, ratingCount, ratePerMinute, isAvailable, isFavorite. Ordered by ratingAvg (highest first).\n\nThis endpoint is public and can be accessed without authentication.",
        "operationId": "PatientController_searchDoctors",
        "parameters": [
          {
            "name": "specializationId",
            "required": false,
            "in": "query",
            "description": "Filter by specialization ID (UUID)",
            "schema": {
              "example": "3c6f0f3f-1e8e-4e8b-9d2d-1b7a3f2e9a10",
              "type": "string"
            }
          },
          {
            "name": "medicalApproachId",
            "required": false,
            "in": "query",
            "description": "Filter by medical approach ID (UUID from GET /shared/medical-approaches)",
            "schema": {
              "example": "550e8400-e29b-41d4-a716-446655440000",
              "type": "string"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number (default: 1, min: 1)",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Items per page (default: 20, max: 100)",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of doctor cards (data[]) and pagination (page, limit, total, totalPages)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPatientDoctorsResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid query (specializationId UUID, page, limit validation)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "page must not be less than 1",
                        "specializationId must be a valid UUID"
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/doctors"
                    }
                  }
                },
                "examples": {
                  "invalidPagination": {
                    "summary": "Invalid page or limit",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "page must not be less than 1"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/patient/doctors"
                    }
                  },
                  "invalidSpecializationId": {
                    "summary": "Invalid specializationId (not a UUID)",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "specializationId must be a valid UUID"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/patient/doctors"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/doctors"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires PATIENT role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/doctors"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Search doctors for patients",
        "tags": [
          "Patient"
        ]
      }
    },
    "/patient/doctors/{id}": {
      "get": {
        "description": "Single doctor profile for the detail screen (e.g. when patient taps a doctor card). Only VERIFIED and ACTIVE doctors; otherwise data is null.\n\nResponse includes: id, name, specialization, experience, ratingAvg, ratingCount, totalPatients (distinct patients from consultations that actually started), ratePerMinute, currentWorkplace, profilePictureUrl, languages[], medicalApproach, about, photoUrls[], isAvailable, isFavorite.",
        "operationId": "PatientController_getDoctorDetails",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Doctor account ID (UUID)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Doctor detail (data) or null if not found / not VERIFIED",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPatientDoctorDetailsResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid doctor ID (UUID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "Validation failed (uuid is expected)"
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/doctors/123e4567-e89b-12d3-a456-426614174000"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/doctors/123e4567-e89b-12d3-a456-426614174000"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires PATIENT role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/doctors/123e4567-e89b-12d3-a456-426614174000"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get doctor details for patients",
        "tags": [
          "Patient"
        ]
      }
    },
    "/patient/favorites/{doctorId}": {
      "post": {
        "description": "Marks a doctor as favorite for the authenticated patient. Idempotent: calling multiple times is safe.",
        "operationId": "PatientController_addFavoriteDoctor",
        "parameters": [
          {
            "name": "doctorId",
            "required": true,
            "in": "path",
            "description": "Doctor account ID (UUID)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Doctor favorited successfully (or already favorited)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Doctor added to favorites"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Doctor not found or not available to patients",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "DOCTOR_NOT_AVAILABLE"
                    },
                    "message": {
                      "type": "string",
                      "example": "Doctor not found or not available for patients (must be VERIFIED and ACTIVE)."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/favorites/123e4567-e89b-12d3-a456-426614174000"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Favorite a doctor",
        "tags": [
          "Patient"
        ]
      },
      "delete": {
        "description": "Removes a doctor from the patient’s favorites. Idempotent: if the doctor is not in favorites, this is a no-op.",
        "operationId": "PatientController_removeFavoriteDoctor",
        "parameters": [
          {
            "name": "doctorId",
            "required": true,
            "in": "path",
            "description": "Doctor account ID (UUID)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Doctor removed from favorites (or was not favorited)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Doctor removed from favorites"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Unfavorite a doctor",
        "tags": [
          "Patient"
        ]
      }
    },
    "/patient/favorites": {
      "get": {
        "description": "Returns the list of doctors favorited by the authenticated patient. Only VERIFIED and ACTIVE doctors are included. Each item includes id, name, specialization, experience, medicalApproach, languages[], profilePictureUrl, ratingAvg, ratingCount, ratePerMinute, isAvailable, isFavorite.",
        "operationId": "PatientController_listFavoriteDoctors",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of favorite doctors",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPatientFavoriteDoctorsResponseDto"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "List favorite doctors",
        "tags": [
          "Patient"
        ]
      }
    },
    "/patient/doctors/by-symptom/{symptomId}": {
      "get": {
        "description": "Returns doctors whose specializations are mapped to the given symptom. Only VERIFIED and ACTIVE doctors are returned. This endpoint is public and can be accessed without authentication.",
        "operationId": "PatientController_getDoctorsBySymptom",
        "parameters": [
          {
            "name": "symptomId",
            "required": true,
            "in": "path",
            "description": "Symptom ID (UUID)",
            "schema": {
              "example": "5d7a9c3e-2b1f-4e6a-8c9d-1e2f3a4b5c6d",
              "type": "string"
            }
          },
          {
            "name": "medicalApproachId",
            "required": false,
            "in": "query",
            "description": "Filter by medical approach ID (UUID from GET /shared/medical-approaches)",
            "schema": {
              "example": "550e8400-e29b-41d4-a716-446655440000",
              "type": "string"
            }
          },
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number (default: 1, min: 1)",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Items per page (default: 20, max: 100)",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of doctors linked to the given symptom",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPatientDoctorsBySymptomResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid symptomId (UUID) or query (page/limit validation)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "Validation failed (uuid is expected)"
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/doctors/by-symptom/5d7a9c3e-2b1f-4e6a-8c9d-1e2f3a4b5c6d"
                    }
                  }
                },
                "examples": {
                  "invalidSymptomId": {
                    "summary": "Invalid symptomId (not a UUID)",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "Validation failed (uuid is expected)"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/patient/doctors/by-symptom/invalid"
                    }
                  },
                  "invalidQuery": {
                    "summary": "Invalid page or limit",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "page must not be less than 1"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/patient/doctors/by-symptom/5d7a9c3e-2b1f-4e6a-8c9d-1e2f3a4b5c6d"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/doctors/by-symptom/5d7a9c3e-2b1f-4e6a-8c9d-1e2f3a4b5c6d"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires PATIENT role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/doctors/by-symptom/5d7a9c3e-2b1f-4e6a-8c9d-1e2f3a4b5c6d"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Find doctors by symptom",
        "tags": [
          "Patient"
        ]
      }
    },
    "/doctor/availability": {
      "get": {
        "description": "Get current availability status for the authenticated doctor.\n    \n**Returns:**\n- `isAvailable`: Whether doctor is currently online (true) or offline (false)\n\n**Note:** Doctor stays online until explicitly toggled offline or app disconnects.",
        "operationId": "AvailabilityController_getAvailability",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Availability status retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetAvailabilityResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/availability"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a doctor (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: DOCTOR"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/availability"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get doctor availability status",
        "tags": [
          "Availability"
        ]
      },
      "put": {
        "description": "Doctor explicitly sets their availability status (online/offline).\n    \n**When doctor goes ONLINE:**\n- Doctor can receive consultation requests\n- Doctor stays online until explicitly toggled offline or app disconnects\n- No automatic expiration\n\n**When doctor goes OFFLINE:**\n- All pending consultation requests are automatically cancelled\n- Active consultation (if any) is ended with reason \"doctor_offline\"\n- Patients are notified (via WebSocket when implemented)\n- Doctor cannot receive new requests until they come back online",
        "operationId": "AvailabilityController_setAvailability",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetAvailabilityDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Availability status updated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "You are now online"
                    },
                    "isAvailable": {
                      "type": "boolean",
                      "example": true
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error (e.g. isAvailable not a boolean)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "isAvailable must be a boolean value"
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/availability"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a doctor (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: DOCTOR"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/availability"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Set doctor availability (online/offline)",
        "tags": [
          "Availability"
        ]
      }
    },
    "/upload/presigned": {
      "post": {
        "description": "Returns a presigned PUT URL for direct upload to S3. Frontend uploads file to uploadUrl, then uses publicUrl in profile/KYC APIs.",
        "operationId": "UploadController_getPresignedUploadUrl",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PresignedUploadDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Presigned URL and public URL for the upload",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PresignedUploadResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid purpose (INVALID_PURPOSE), filename, or contentType (CONTENT_TYPE_NOT_ALLOWED)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "code": {
                      "type": "string",
                      "example": "INVALID_PURPOSE"
                    },
                    "message": {
                      "type": "string",
                      "example": "purpose must be one of: patient_profile, doctor_profile, kyc_aadhaar_front, ..."
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/upload/presigned"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/upload/presigned"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Caller role not allowed for this purpose (UPLOAD_FORBIDDEN_FOR_ROLE)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "UPLOAD_FORBIDDEN_FOR_ROLE"
                    },
                    "message": {
                      "type": "string",
                      "example": "Your role (PATIENT) is not allowed for purpose \"doctor_profile\"."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/upload/presigned"
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "S3 not configured (missing AWS credentials or bucket)"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get presigned upload URL",
        "tags": [
          "Upload"
        ]
      }
    },
    "/upload/presigned-get": {
      "get": {
        "description": "Returns a presigned GET URL for accessing private content (KYC documents). For public content, returns the original URL. **Authorization:** Private documents can only be accessed by the owner (accountId in the stored URL) or an admin. URL expires after 15 minutes by default; optional expiresIn is capped at 1 hour.",
        "operationId": "UploadController_getPresignedGetUrl",
        "parameters": [
          {
            "name": "url",
            "required": true,
            "in": "query",
            "description": "The reference URL stored in the database (from upload presigned response)",
            "schema": {
              "example": "https://bucket.s3.region.amazonaws.com/private/uploads/kyc/accountId/uuid.pdf",
              "type": "string"
            }
          },
          {
            "name": "expiresIn",
            "required": false,
            "in": "query",
            "description": "URL expiry time in seconds (default: 900; max: 3600)",
            "schema": {
              "example": 900,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Presigned GET URL for accessing the file",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PresignedGetResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Missing url query, or invalid expiresIn (positive integer, max 3600)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "oneOf": [
                        {
                          "type": "string",
                          "example": "url query parameter is required"
                        },
                        {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "example": [
                            "expiresIn must not exceed 3600 seconds"
                          ]
                        }
                      ]
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/upload/presigned-get"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/upload/presigned-get"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not allowed to access this private document (PRESIGNED_GET_FORBIDDEN). Only owner or admin can request presigned URL.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "code": {
                      "type": "string",
                      "example": "PRESIGNED_GET_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You do not have permission to access this private document. Only the owner or an admin can request a presigned URL."
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/upload/presigned-get"
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "S3 not configured (missing AWS credentials or bucket)"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get presigned download URL for private content",
        "tags": [
          "Upload"
        ]
      }
    },
    "/doctor/account": {
      "delete": {
        "description": "Marks the doctor account for deletion with a 30-day grace period. After that, the account is anonymised but wallet/payments/transactions are kept for audit.",
        "operationId": "DoctorsController_requestAccountDeletion",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Account scheduled for deletion",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Account scheduled for deletion in 30 days"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Request account deletion",
        "tags": [
          "Doctor"
        ]
      }
    },
    "/doctor/account/cancel-deletion": {
      "post": {
        "description": "Cancels a pending doctor account deletion request and restores the account to ACTIVE. Has no effect if the account is not pending deletion.",
        "operationId": "DoctorsController_cancelAccountDeletion",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Account deletion cancelled (or was not pending)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Account deletion cancelled"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Cancel account deletion",
        "tags": [
          "Doctor"
        ]
      }
    },
    "/doctor/onboard": {
      "post": {
        "description": "Complete initial doctor registration. Request must include name, email and password (all mandatory). Optional: profilePictureUrl.\n\n**Flow:**\n1. Doctor verifies OTP → gets access token → minimal profile created\n2. Doctor calls this endpoint → provides name, email, password (and optionally profile picture URL) → gets reference token\n3. Doctor submits KYC → provides all documents\n\n**What happens:**\n- Generates a unique 8-digit doctor reference token\n- Updates doctor profile with name, email, hashed password, and optional profile picture URL\n- Returns the reference token for future use (email+password login uses this token)\n\n**Idempotency:**\n- If doctor is already onboarded (has reference token), returns existing token\n- Safe to call multiple times (won't create duplicate tokens)",
        "operationId": "DoctorsController_onboard",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Doctor onboarding payload: name, email, password (required); profilePictureUrl (optional)",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OnboardDoctorDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Doctor onboarded successfully. Returns the unique reference token.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Doctor onboarded successfully"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "tokenNumber": {
                          "type": "string",
                          "example": "12345678",
                          "description": "8-digit unique doctor reference token"
                        },
                        "name": {
                          "type": "string",
                          "example": "Dr. Rajesh Sharma"
                        },
                        "email": {
                          "type": "string",
                          "example": "dr.sharma@example.com"
                        },
                        "profilePictureUrl": {
                          "type": "string",
                          "description": "Profile picture URL if provided at onboarding",
                          "example": "https://bucket.s3.region.amazonaws.com/private/uploads/..."
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input (e.g., invalid email, name too short, password too short, email already taken, already onboarded)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "DOCTOR_ALREADY_ONBOARDED"
                    },
                    "message": {
                      "type": "string",
                      "example": "Doctor is already onboarded"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/onboard"
                    }
                  }
                },
                "examples": {
                  "doctorNotFound": {
                    "summary": "Doctor profile missing (OTP not completed)",
                    "value": {
                      "statusCode": 400,
                      "code": "DOCTOR_NOT_FOUND",
                      "message": "Doctor profile not found. Please verify OTP first.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/onboard"
                    }
                  },
                  "alreadyOnboarded": {
                    "summary": "Doctor already onboarded",
                    "value": {
                      "statusCode": 400,
                      "code": "DOCTOR_ALREADY_ONBOARDED",
                      "message": "Doctor is already onboarded",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/onboard"
                    }
                  },
                  "emailTaken": {
                    "summary": "Email already used by another doctor",
                    "value": {
                      "statusCode": 400,
                      "code": "EMAIL_ALREADY_TAKEN",
                      "message": "This email is already registered by another doctor",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/onboard"
                    }
                  },
                  "tokenGenerationFailed": {
                    "summary": "Failed to generate unique reference token",
                    "value": {
                      "statusCode": 400,
                      "code": "TOKEN_GENERATION_FAILED",
                      "message": "Unable to generate unique doctor reference token. Please try again.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/onboard"
                    }
                  },
                  "passwordTooShort": {
                    "summary": "Password too short (validation)",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "password must be at least 8 characters long"
                      ],
                      "path": "/api/v1/doctor/onboard"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/onboard"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires DOCTOR role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/onboard"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Onboard a new doctor",
        "tags": [
          "Doctor"
        ]
      }
    },
    "/doctor/kyc/status": {
      "get": {
        "description": "Returns the current KYC status and reference token for the authenticated doctor.\n\n**Fields:**\n- `status` - PENDING | SUBMITTED | VERIFIED | REJECTED\n- `tokenNumber` - 8-digit doctor reference token (may be null if onboarding not completed)\n- `message` - Human-readable status message for the app UI\n- `canProceed` - Whether doctor can access the full app (true only when VERIFIED)\n- `rejectionReason` - Present only when status is REJECTED\n- `submittedAt` - Timestamp when KYC was submitted (if any)",
        "operationId": "DoctorsController_getKycStatus",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Current KYC status and reference token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "PENDING",
                            "SUBMITTED",
                            "VERIFIED",
                            "REJECTED"
                          ],
                          "example": "SUBMITTED"
                        },
                        "tokenNumber": {
                          "type": "string",
                          "nullable": true,
                          "example": "00458231"
                        },
                        "message": {
                          "type": "string",
                          "example": "Your KYC is under review. This typically takes 24-48 hours."
                        },
                        "canProceed": {
                          "type": "boolean",
                          "example": false
                        },
                        "rejectionReason": {
                          "type": "string",
                          "nullable": true,
                          "example": "Aadhaar photo is unclear, please re-upload"
                        },
                        "submittedAt": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true,
                          "example": "2026-01-15T09:00:00.000Z"
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "pending": {
                    "summary": "PENDING - Onboarded but KYC not submitted",
                    "value": {
                      "data": {
                        "status": "PENDING",
                        "tokenNumber": "00458231",
                        "message": "Please submit your KYC documents to get verified.",
                        "canProceed": false,
                        "rejectionReason": null,
                        "submittedAt": null
                      }
                    }
                  },
                  "submitted": {
                    "summary": "SUBMITTED - KYC under review",
                    "value": {
                      "data": {
                        "status": "SUBMITTED",
                        "tokenNumber": "00458231",
                        "message": "Your KYC is under review. This typically takes 24-48 hours.",
                        "canProceed": false,
                        "rejectionReason": null,
                        "submittedAt": "2026-01-15T09:00:00.000Z"
                      }
                    }
                  },
                  "verified": {
                    "summary": "VERIFIED - Doctor fully verified",
                    "value": {
                      "data": {
                        "status": "VERIFIED",
                        "tokenNumber": "00458231",
                        "message": "Your KYC is verified. Welcome to the platform!",
                        "canProceed": true,
                        "rejectionReason": null,
                        "submittedAt": "2026-01-15T09:00:00.000Z"
                      }
                    }
                  },
                  "rejected": {
                    "summary": "REJECTED - KYC rejected with reason",
                    "value": {
                      "data": {
                        "status": "REJECTED",
                        "tokenNumber": "00458231",
                        "message": "Your KYC was rejected: Aadhaar photo is unclear, please re-upload",
                        "canProceed": false,
                        "rejectionReason": "Aadhaar photo is unclear, please re-upload",
                        "submittedAt": "2026-01-15T09:00:00.000Z"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Doctor profile not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "DOCTOR_NOT_FOUND"
                    },
                    "message": {
                      "type": "string",
                      "example": "Doctor profile not found"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/kyc/status"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/kyc/status"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires DOCTOR role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/kyc/status"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get doctor KYC status",
        "tags": [
          "Doctor"
        ]
      }
    },
    "/doctor/kyc/submit": {
      "post": {
        "description": "Submits full KYC details for the doctor. All fields are required except aadhaarNumber and panNumber. Email and password are not part of this request.\n\n**Requirements:**\n- Doctor profile must exist (created via OTP + onboard)\n- KYC status must NOT be SUBMITTED or VERIFIED already\n- Either `medicalCouncilId` **or** `medicalCouncilOther` must be provided\n\n**Side effects:**\n- Updates doctor profile with all provided KYC data\n- Sets `kycStatus` to SUBMITTED\n- Sets `kycSubmittedAt` timestamp\n\n**Idempotency / State rules:**\n- If KYC is already SUBMITTED → returns 400 with `KYC_ALREADY_SUBMITTED`\n- If KYC is already VERIFIED → returns 400 with `KYC_ALREADY_VERIFIED`",
        "operationId": "DoctorsController_submitKyc",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "KYC payload: all fields required except aadhaarNumber and panNumber. No email or password. Either medicalCouncilId or medicalCouncilOther required.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubmitKycDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "KYC submitted successfully and marked as SUBMITTED for review. Returns doctor reference token (8-digit) for client to store.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "KYC submitted successfully. Review typically takes 24-48 hours."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "example": "SUBMITTED"
                        }
                      }
                    },
                    "doctorReferenceToken": {
                      "type": "string",
                      "description": "8-digit doctor reference token (assigned at onboarding). Client can store for login or reference.",
                      "example": "12345678"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Doctor not found, invalid KYC state, or missing medical council",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "KYC_ALREADY_SUBMITTED"
                    },
                    "message": {
                      "type": "string",
                      "example": "Your KYC is already under review"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/kyc/submit"
                    }
                  }
                },
                "examples": {
                  "doctorNotFound": {
                    "summary": "Doctor profile not created yet",
                    "value": {
                      "statusCode": 400,
                      "code": "DOCTOR_NOT_FOUND",
                      "message": "Doctor profile not found",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/kyc/submit"
                    }
                  },
                  "alreadySubmitted": {
                    "summary": "KYC already submitted",
                    "value": {
                      "statusCode": 400,
                      "code": "KYC_ALREADY_SUBMITTED",
                      "message": "Your KYC is already under review",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/kyc/submit"
                    }
                  },
                  "alreadyVerified": {
                    "summary": "KYC already verified",
                    "value": {
                      "statusCode": 400,
                      "code": "KYC_ALREADY_VERIFIED",
                      "message": "Your KYC is already verified",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/kyc/submit"
                    }
                  },
                  "medicalCouncilRequired": {
                    "summary": "Missing medical council information",
                    "value": {
                      "statusCode": 400,
                      "code": "MEDICAL_COUNCIL_REQUIRED",
                      "message": "Please select a medical council or enter \"Other\"",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/kyc/submit"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/kyc/submit"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires DOCTOR role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/kyc/submit"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Submit doctor KYC documents",
        "tags": [
          "Doctor"
        ]
      }
    },
    "/doctor/profile": {
      "get": {
        "description": "Returns the full profile for the authenticated doctor.\n\n**Includes:**\n- Reference token (`tokenNumber`)\n- Email\n- Specialization, medical approach, and medical council\n- Experience, about/bio, and up to 3 photo URLs (`photoUrls`)\n- Registration details\n- Rate per minute\n- Ratings (average and count)\n- Languages configured for consultations\n- Current KYC status",
        "operationId": "DoctorsController_getProfile",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Doctor profile retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetDoctorProfileResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Doctor profile not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "DOCTOR_NOT_FOUND"
                    },
                    "message": {
                      "type": "string",
                      "example": "Doctor profile not found"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/profile"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/profile"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires DOCTOR role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/profile"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get doctor profile (for doctor panel)",
        "tags": [
          "Doctor"
        ]
      },
      "put": {
        "description": "Allows a VERIFIED doctor to update their consultation rate, languages, about/bio, and photos.\n\n**Updatable Fields (doctor can change):**\n- `ratePerMinute` (number, optional) - New consultation rate in INR per minute\n- `languageIds` (string[], optional) - List of language IDs the doctor can consult in\n- `about` (string, optional) - Short bio / \"About me\" for patients (max 2000 characters)\n- `currentWorkplace` (string, optional) - Hospital/clinic name (max 255 characters)\n- `profilePictureUrl` (string, optional) - Profile/avatar photo URL (max 500 chars)\n- `photoUrls` (string[], optional) - Up to 3 photo URLs (S3/CDN). Max 3 items; replaces all existing photos.\n\n**Read-only Fields (only admin can edit):**\n- `name`, `email`, `gender`, `experience` - Set during onboarding/KYC, admin-only updates\n- `specialization`, `medicalApproach` - Set during KYC, admin-only updates\n- `registrationNumber`, `registrationYear`, `medicalCouncil` - KYC documents, admin-only updates\n\n**Rules:**\n- Doctor must have `kycStatus = VERIFIED` to update profile\n- When `languageIds` is provided, existing language mappings are fully replaced\n- Old S3 objects are automatically deleted when photos are replaced",
        "operationId": "DoctorsController_updateProfile",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Profile update payload. All fields optional.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateDoctorProfileDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Doctor profile updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Profile updated successfully"
                    },
                    "data": {
                      "type": "object",
                      "description": "Updated doctor record (raw model shape)"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "KYC not verified or invalid request payload",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "KYC_NOT_VERIFIED"
                    },
                    "message": {
                      "type": "string",
                      "example": "Please complete KYC verification first"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/profile"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/profile"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires DOCTOR role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/profile"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Update doctor profile (rate, languages, about, photos)",
        "tags": [
          "Doctor"
        ]
      }
    },
    "/doctor/account/delete-after-reject": {
      "post": {
        "description": "Permanently deletes the authenticated doctor's account and all related data. **Only allowed when `kycStatus === REJECTED`.**\n\n**Flow:**\n1. Admin rejects KYC → doctor sees REJECTED (e.g. GET /auth/me or GET /doctor/profile).\n2. Frontend can call this endpoint (e.g. automatically or after user taps \"Remove my account\").\n3. Backend invalidates session, then deletes Account (cascade deletes Doctor, Wallet, Session, Consultations where this account is doctor, Messages, etc.).\n4. Returns 204. Frontend should redirect to login/splash; next login will fail (account gone).",
        "operationId": "DoctorsController_deleteAccountAfterReject",
        "parameters": [],
        "responses": {
          "204": {
            "description": "Account and all data deleted"
          },
          "400": {
            "description": "Only rejected doctors can call this (kycStatus must be REJECTED)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "DELETE_AFTER_REJECT_ONLY"
                    },
                    "message": {
                      "type": "string",
                      "example": "Only rejected doctors can delete their account. Your status is SUBMITTED."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/account/delete-after-reject"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Delete account after KYC rejection",
        "tags": [
          "Doctor"
        ]
      }
    },
    "/doctor/wallet/balance": {
      "get": {
        "description": "Returns the current wallet balance for the authenticated doctor.\n\nBalance is calculated using a **ledger-based design**:\n- No balance column is stored\n- Balance = SUM(credits) - SUM(debits) over all wallet transactions.",
        "operationId": "DoctorWalletsController_getBalance",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Wallet balance retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetBalanceResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/wallet/balance"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a doctor (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: DOCTOR"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/wallet/balance"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get doctor wallet balance",
        "tags": [
          "Wallets"
        ]
      }
    },
    "/doctor/wallet/transactions": {
      "get": {
        "description": "Returns a paginated list of wallet transactions for the authenticated doctor.\n\nIf the wallet does not exist yet, it will be created automatically with 0 balance.",
        "operationId": "DoctorWalletsController_getTransactions",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of transactions to return (default: 50, max: 100)",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 50,
              "example": 50,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of transactions to skip (default: 0)",
            "schema": {
              "minimum": 0,
              "default": 0,
              "example": 0,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Transaction history retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTransactionsResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid pagination parameters (limit, offset)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "limit must not be greater than 100"
                      ]
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/wallet/transactions"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/wallet/transactions"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a doctor (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: DOCTOR"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/wallet/transactions"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get doctor wallet transaction history",
        "tags": [
          "Wallets"
        ]
      }
    },
    "/doctor/earnings": {
      "get": {
        "description": "Returns earnings summary for the authenticated doctor. One call for dashboard: balance, totals, and optional period stats.\n\n**Query params (optional, one or both):**\n- `period`: `today` | `week` | `month` | `year` — stats from start of period to now.\n- `date`: `YYYY-MM-DD` — stats for that specific calendar day (UTC). If both `period` and `date` are set, `date` takes precedence.\n\nWhen either is set, response includes `periodEarnings`, `newClientCount`, `oldClientCount`.\n\n**Definitions:**\n- **New client:** Patient consulted by this doctor for the first time (in that period).\n- **Old client:** Patient this doctor had consulted at least once before (returning).\n\n**Requirements:** Doctor must have verified KYC (VERIFIED).",
        "operationId": "DoctorsController_getEarnings",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "description": "Filter stats by period (start of period to now)",
            "schema": {
              "example": "month",
              "type": "string",
              "enum": [
                "today",
                "week",
                "month",
                "year"
              ]
            }
          },
          {
            "name": "date",
            "required": false,
            "in": "query",
            "description": "Filter stats for a specific day (YYYY-MM-DD, UTC). Takes precedence over period if both set.",
            "schema": {
              "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
              "example": "2026-01-15",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Earnings summary retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "balance": {
                      "type": "string",
                      "example": "1500.00"
                    },
                    "totalEarnings": {
                      "type": "string",
                      "example": "1500.00"
                    },
                    "totalConsultations": {
                      "type": "number",
                      "example": 15
                    },
                    "currency": {
                      "type": "string",
                      "example": "INR"
                    },
                    "periodEarnings": {
                      "type": "string",
                      "example": "500.00",
                      "description": "Present when period query is set"
                    },
                    "newClientCount": {
                      "type": "number",
                      "example": 2,
                      "description": "Present when period query is set"
                    },
                    "oldClientCount": {
                      "type": "number",
                      "example": 3,
                      "description": "Present when period query is set"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Doctor not found or KYC not verified",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "KYC_NOT_VERIFIED"
                    },
                    "message": {
                      "type": "string",
                      "example": "Please complete KYC verification first"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/earnings"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/earnings"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires DOCTOR role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/earnings"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get doctor earnings summary",
        "tags": [
          "Doctor"
        ]
      }
    },
    "/doctor/auth/login": {
      "post": {
        "description": "Authenticate a doctor using email and password as a fallback when OTP is not available.\n\n**Requirements:**\n- Doctor must have completed KYC and set a password during KYC submission\n- Doctor KYC must be VERIFIED\n\n**Tokens:**\n- Returns access token and refresh token (same session model as OTP login)",
        "operationId": "DoctorAuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DoctorLoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "accessToken": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "refreshToken": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "doctor": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "123e4567-e89b-12d3-a456-426614174000"
                        },
                        "email": {
                          "type": "string",
                          "example": "dr.sharma@example.com"
                        },
                        "role": {
                          "type": "string",
                          "example": "DOCTOR"
                        },
                        "kycStatus": {
                          "type": "string",
                          "example": "VERIFIED"
                        },
                        "lastLoginAt": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true,
                          "example": "2026-01-22T12:00:00.000Z"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error or KYC not ready for email/password login",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "email must be an email",
                        "password should not be empty"
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials, wrong role, account inactive, or password not set (401)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "DOCTOR_INVALID_CREDENTIALS"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid email or password"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/auth/login"
                    }
                  }
                },
                "examples": {
                  "invalidCredentials": {
                    "summary": "Invalid email or password",
                    "value": {
                      "statusCode": 401,
                      "code": "DOCTOR_INVALID_CREDENTIALS",
                      "message": "Invalid email or password",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/auth/login"
                    }
                  },
                  "invalidRole": {
                    "summary": "Account is not a doctor",
                    "value": {
                      "statusCode": 401,
                      "code": "DOCTOR_INVALID_ROLE",
                      "message": "Account is not a doctor",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/auth/login"
                    }
                  },
                  "notActive": {
                    "summary": "Doctor account is not active",
                    "value": {
                      "statusCode": 401,
                      "code": "DOCTOR_NOT_ACTIVE",
                      "message": "Doctor account is not active",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/auth/login"
                    }
                  },
                  "passwordNotSet": {
                    "summary": "Password not set (KYC not completed)",
                    "value": {
                      "statusCode": 401,
                      "code": "DOCTOR_PASSWORD_NOT_SET",
                      "message": "Password not set. Please complete KYC submission first.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/doctor/auth/login"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Doctor login (email + password fallback)",
        "tags": [
          "Doctor - Auth"
        ]
      }
    },
    "/doctor/auth/logout": {
      "post": {
        "description": "Logout current doctor session. Invalidates the access token and refresh token. Requires Bearer token authentication with DOCTOR role.",
        "operationId": "DoctorAuthController_logout",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Logout successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Logged out successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_SESSION_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Session has been invalidated. Please login again."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/auth/logout"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires DOCTOR role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/auth/logout"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Doctor logout",
        "tags": [
          "Doctor - Auth"
        ]
      }
    },
    "/patient/wallet/balance": {
      "get": {
        "description": "Returns the current wallet balance for the authenticated patient.\n\nBalance is calculated using a **ledger-based design**:\n- No balance column is stored\n- Balance = SUM(credits) - SUM(debits) over all wallet transactions.",
        "operationId": "WalletsController_getBalance",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Wallet balance retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetBalanceResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/wallet/balance"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a patient (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/wallet/balance"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get patient wallet balance",
        "tags": [
          "Wallets"
        ]
      }
    },
    "/patient/wallet/transactions": {
      "get": {
        "description": "Returns a paginated list of wallet transactions for the authenticated patient.\n\nIf the wallet does not exist yet, it will be created automatically with 0 balance.",
        "operationId": "WalletsController_getTransactions",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of transactions to return (default: 50, max: 100)",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 50,
              "example": 50,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of transactions to skip (default: 0)",
            "schema": {
              "minimum": 0,
              "default": 0,
              "example": 0,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Transaction history retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTransactionsResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid pagination parameters (limit, offset)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "limit must not be greater than 100"
                      ]
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/wallet/transactions"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/wallet/transactions"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a patient (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/wallet/transactions"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get patient wallet transaction history",
        "tags": [
          "Wallets"
        ]
      }
    },
    "/doctor/wallet/summary": {
      "get": {
        "description": "Returns current wallet balance and pending payout amount for the authenticated doctor.",
        "operationId": "DoctorWalletsController_getSummary",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Wallet summary retrieved successfully"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get doctor wallet summary",
        "tags": [
          "Wallets"
        ]
      }
    },
    "/doctor/payout/methods": {
      "get": {
        "description": "Returns saved bank accounts for the authenticated doctor.",
        "operationId": "DoctorPayoutsController_listMethods",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of payout methods"
          },
          "401": {
            "description": "Invalid or missing JWT"
          },
          "403": {
            "description": "Requires DOCTOR role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "List payout methods (bank accounts)",
        "tags": [
          "Wallets"
        ]
      },
      "post": {
        "description": "Adds a bank account for withdrawals. Account number is stored as plain string; consider encrypting in production.",
        "operationId": "DoctorPayoutsController_createMethod",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePayoutMethodDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payout method created"
          },
          "400": {
            "description": "Validation error"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Add payout method (bank account)",
        "tags": [
          "Wallets"
        ]
      }
    },
    "/doctor/payout/methods/{id}": {
      "put": {
        "description": "Updates bank account display fields for the authenticated doctor.",
        "operationId": "DoctorPayoutsController_updateMethod",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payout method updated"
          },
          "400": {
            "description": "Validation or ownership error"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Update payout method (bank account)",
        "tags": [
          "Wallets"
        ]
      },
      "delete": {
        "description": "Marks payout method as deleted. Prevents deletion when there are active payout requests using it.",
        "operationId": "DoctorPayoutsController_deleteMethod",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payout method deleted (or was already deleted)"
          },
          "400": {
            "description": "Validation or business rule error"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Delete payout method (soft delete)",
        "tags": [
          "Wallets"
        ]
      }
    },
    "/doctor/payout/requests": {
      "post": {
        "description": "Creates a payout withdrawal request to a selected bank account. Validates available balance and minimum amount.",
        "operationId": "DoctorPayoutsController_createPayoutRequest",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePayoutRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payout request created"
          },
          "400": {
            "description": "Business validation error (insufficient balance, invalid method, below minimum)"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Create payout request (withdraw from wallet)",
        "tags": [
          "Wallets"
        ]
      },
      "get": {
        "description": "Returns payout withdrawal requests for the authenticated doctor, ordered by newest first.",
        "operationId": "DoctorPayoutsController_listPayoutRequests",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of payout requests"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "List payout requests",
        "tags": [
          "Wallets"
        ]
      }
    },
    "/admin/doctors/pending": {
      "get": {
        "description": "Retrieve a paginated list of doctors with SUBMITTED KYC status awaiting admin review.\n    \n**Design Philosophy:**\n- **Sorting**: Only by createdAt (chronological review order)\n- **Filtering**: By tokenNumber (exact), name (partial), or phoneNumber (exact)\n- All filters are optional and can be combined (AND logic)\n\n**Use Cases:**\n- Review pending doctors chronologically (default: oldest first - FIFO)\n- Find specific doctor by token number\n- Search by doctor name (partial match)\n- Find by phone number\n- Combine multiple filters for precise search",
        "operationId": "AdminDoctorsController_getPendingDoctors",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number (1-indexed)",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "tokenNumber",
            "required": false,
            "in": "query",
            "description": "Filter by doctor reference token (8-digit code). Exact match only.",
            "schema": {
              "minLength": 8,
              "maxLength": 8,
              "pattern": "^[0-9]{8}$",
              "example": "00000001",
              "type": "string"
            }
          },
          {
            "name": "name",
            "required": false,
            "in": "query",
            "description": "Filter by doctor name (case-insensitive partial match). Searches for doctors whose name contains this string.",
            "schema": {
              "minLength": 2,
              "maxLength": 100,
              "example": "Sharma",
              "type": "string"
            }
          },
          {
            "name": "phoneNumber",
            "required": false,
            "in": "query",
            "description": "Filter by phone number. Exact match only.",
            "schema": {
              "pattern": "^\\+[1-9]\\d{1,14}$",
              "example": "+919876543210",
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "Field to sort by. Only createdAt is supported for pending doctors.",
            "schema": {
              "$ref": "#/components/schemas/PendingDoctorsSortField"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "description": "Sort order. ASC = oldest first (FIFO), DESC = newest first (LIFO)",
            "schema": {
              "$ref": "#/components/schemas/SortOrder"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of pending doctors with pagination metadata",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPendingDoctorsResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid query parameters (e.g., invalid tokenNumber format, name too short)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "page must not be less than 1"
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/pending"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/pending"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/pending"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get pending KYC applications",
        "tags": [
          "Admin - Doctors"
        ]
      }
    },
    "/admin/doctors": {
      "get": {
        "description": "Retrieve a paginated list of all doctors with optional filtering, search, and sorting.\n    \n**Features:**\n- **Search**: Free-text search across email and token number (case-insensitive)\n- **Filter**: By KYC status (PENDING, SUBMITTED, VERIFIED, REJECTED, EXPIRED)\n- **Sort**: By createdAt, email, experience, registrationNumber, tokenNumber, ratingAvg, ratingCount, kycStatus\n- **Pagination**: Default 20 items per page, max 100\n\n**Search Examples:**\n- `?search=00458231` - Finds doctor by exact 8-digit token number\n- `?search=dr.sharma@example.com` - Finds by email (partial match)\n\n**Filter Combinations:**\n- `?status=VERIFIED&search=dr.` - Verified doctors matching email search\n- `?status=SUBMITTED&sortBy=createdAt&sortOrder=asc` - Pending KYC reviews (oldest first)\n\n**Sort Fields:**\n- `createdAt` - Registration date (default)\n- `email` - Doctor email\n- `experience` - Years of experience\n- `registrationNumber` - Medical registration number\n- `tokenNumber` - Doctor reference token\n- `ratingAvg` - Average patient rating (0-5)\n- `ratingCount` - Number of ratings received\n- `kycStatus` - KYC verification status\n\n**Edge Cases:**\n- Empty results return `data: []` with `total: 0`\n- Invalid page numbers default to page 1\n- Limit exceeding 100 is capped at 100",
        "operationId": "AdminDoctorsController_getDoctors",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number (default: 1, min: 1)",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Items per page (default: 20, max: 100)",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "Filter by KYC verification status",
            "schema": {
              "$ref": "#/components/schemas/DoctorApprovalStatus"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "Free-text search across email and token number (min 2 chars)",
            "schema": {
              "minLength": 2,
              "maxLength": 100,
              "example": "dr.sharma@example.com",
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "Field to sort by (default: createdAt)",
            "schema": {
              "$ref": "#/components/schemas/DoctorsSortField"
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "description": "Sort order (default: desc)",
            "schema": {
              "$ref": "#/components/schemas/SortOrder"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of doctors retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetDoctorsResponseDto"
                },
                "examples": {
                  "success-with-results": {
                    "summary": "Success with results",
                    "value": {
                      "data": [
                        {
                          "id": "123e4567-e89b-12d3-a456-426614174000",
                          "name": "Dr. Rajesh Sharma",
                          "tokenNumber": "00458231",
                          "phoneNumber": "+919876543210",
                          "accountStatus": "ACTIVE",
                          "kycStatus": "VERIFIED",
                          "specialization": "Cardiology",
                          "ratingAvg": 4.5,
                          "ratingCount": 42
                        },
                        {
                          "id": "223e4567-e89b-12d3-a456-426614174001",
                          "name": "Dr. Priya Patel",
                          "tokenNumber": "00458232",
                          "phoneNumber": "+919876543211",
                          "accountStatus": "ACTIVE",
                          "kycStatus": "VERIFIED",
                          "specialization": "Dermatology",
                          "ratingAvg": 4.8,
                          "ratingCount": 28
                        }
                      ],
                      "pagination": {
                        "page": 1,
                        "limit": 20,
                        "total": 150,
                        "totalPages": 8
                      }
                    }
                  },
                  "empty-results": {
                    "summary": "No results found",
                    "value": {
                      "data": [],
                      "pagination": {
                        "page": 1,
                        "limit": 20,
                        "total": 0,
                        "totalPages": 0
                      }
                    }
                  },
                  "filtered-results": {
                    "summary": "Filtered by status",
                    "value": {
                      "data": [
                        {
                          "id": "323e4567-e89b-12d3-a456-426614174002",
                          "name": "Dr. Amit Kumar",
                          "tokenNumber": "00458233",
                          "phoneNumber": "+919876543212",
                          "accountStatus": "ACTIVE",
                          "kycStatus": "SUBMITTED",
                          "specialization": null,
                          "ratingAvg": null,
                          "ratingCount": 0
                        }
                      ],
                      "pagination": {
                        "page": 1,
                        "limit": 20,
                        "total": 12,
                        "totalPages": 1
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid query parameters (validation errors)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "status must be a valid enum value",
                        "sortBy must be a valid enum value",
                        "search must be at least 2 characters long",
                        "page must not be less than 1",
                        "limit must not be greater than 100"
                      ]
                    },
                    "error": {
                      "type": "string",
                      "example": "Bad Request"
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors"
                    }
                  }
                },
                "examples": {
                  "invalid-status": {
                    "summary": "Invalid status enum",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "status must be a valid enum value"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors?status=INVALID"
                    }
                  },
                  "search-too-short": {
                    "summary": "Search query too short",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "search must be at least 2 characters long"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors?search=a"
                    }
                  },
                  "limit-too-high": {
                    "summary": "Limit exceeds maximum",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "limit must not be greater than 100"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors?limit=200"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get all doctors (with search, filters, and sorting)",
        "tags": [
          "Admin - Doctors"
        ]
      }
    },
    "/admin/doctors/{id}": {
      "get": {
        "description": "Returns full doctor profile and KYC information for admin review.\n\n**What this endpoint returns:**\n- Core account info (status, phone, email, creation timestamps)\n- KYC status and metadata (submitted/verified timestamps, rejection reason)\n- Professional info (specialization, experience, registration details)\n- KYC documents (Aadhaar, PAN, education certificate URLs)\n- Commercial info (ratePerMinute, ratingAvg, ratingCount)\n- Languages the doctor can consult in\n\n**Use cases:**\n- KYC review screen in the admin panel\n- Support tooling to investigate a specific doctor\n- Manual verification of documents before approval/rejection\n\n**Notes:**\n- This endpoint is **ADMIN-only** and should never be exposed directly to patients/doctors.\n- Some fields may be `null` depending on onboarding progress (e.g., documents not uploaded yet).",
        "operationId": "AdminDoctorsController_getDoctorDetails",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Doctor account ID (UUID)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Doctor details. data: id, name, tokenNumber, phoneNumber, email, accountStatus, kycStatus, kycRejectionReason, kycSubmittedAt, kycVerifiedAt, specialization { id, name }, experience, currentWorkplace, medicalApproach, about, profilePictureUrl, photoUrls[], registrationNumber, registrationYear, KYC doc URLs, medicalCouncil { id, name, state }, ratePerMinute, ratingAvg, ratingCount, walletBalance, languages[], createdAt, accountCreatedAt, lastLoginAt. Timestamps are ISO 8601.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetDoctorDetailsResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Doctor not found or invalid ID",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "DOCTOR_NOT_FOUND"
                    },
                    "message": {
                      "type": "string",
                      "example": "Doctor not found"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000"
                    }
                  }
                },
                "examples": {
                  "doctor-not-found": {
                    "summary": "Doctor does not exist",
                    "value": {
                      "statusCode": 400,
                      "code": "DOCTOR_NOT_FOUND",
                      "message": "Doctor not found",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000"
                    }
                  },
                  "invalid-id-format": {
                    "summary": "Invalid UUID format for id parameter",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "Validation failed (uuid is expected)"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/not-a-uuid"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get doctor details (admin)",
        "tags": [
          "Admin - Doctors"
        ]
      }
    },
    "/admin/doctors/{id}/approve": {
      "put": {
        "description": "Approves a doctor whose KYC status is `SUBMITTED`.\n\n**What it does:**\n- Validates doctor exists\n- Validates current `kycStatus === SUBMITTED`\n- Updates doctor `kycStatus` to `VERIFIED`\n- Sets `kycVerifiedAt` timestamp\n\n**Request body:**\n- **Optional** - You can call this endpoint with or without a body\n- If provided, `notes` field is accepted but not persisted (for future audit trail)\n\n**Idempotency / State rules:**\n- If the doctor is not in `SUBMITTED` status (e.g. `VERIFIED`, `PENDING`, `REJECTED`), this returns a **400** with `code=INVALID_STATUS`.\n\n**Examples:**\n- `PUT /doctors/:id/approve` (no body) - Simple approval\n- `PUT /doctors/:id/approve` with `{ \"notes\": \"All documents verified\" }` - Approval with notes",
        "operationId": "AdminDoctorsController_approveDoctor",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Doctor account ID (UUID)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": false,
          "description": "Optional approval notes for internal audit (not persisted)",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApproveDoctorKycDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Doctor approved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApproveDoctorKycResponseDto"
                },
                "examples": {
                  "approved-success": {
                    "summary": "Approved successfully",
                    "value": {
                      "message": "Doctor approved successfully",
                      "data": {
                        "status": "VERIFIED"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Doctor not found, invalid current status, invalid UUID, or body validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "INVALID_STATUS"
                    },
                    "message": {
                      "type": "string",
                      "example": "Cannot approve doctor with status: VERIFIED"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/approve"
                    }
                  }
                },
                "examples": {
                  "doctor-not-found": {
                    "summary": "Doctor not found",
                    "value": {
                      "statusCode": 400,
                      "code": "DOCTOR_NOT_FOUND",
                      "message": "Doctor not found",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/approve"
                    }
                  },
                  "invalid-status": {
                    "summary": "Invalid status transition",
                    "value": {
                      "statusCode": 400,
                      "code": "INVALID_STATUS",
                      "message": "Cannot approve doctor with status: VERIFIED",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/approve"
                    }
                  },
                  "invalid-id-format": {
                    "summary": "Invalid UUID format",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "Validation failed (uuid is expected)"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/not-a-uuid/approve"
                    }
                  },
                  "notes-too-long": {
                    "summary": "Validation error: notes too long",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "notes must be shorter than or equal to 500 characters"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/approve"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/approve"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/approve"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Approve doctor KYC",
        "tags": [
          "Admin - Doctors"
        ]
      }
    },
    "/admin/doctors/{id}/reject": {
      "put": {
        "description": "Rejects a doctor whose KYC status is `SUBMITTED`. Only updates status; no deletion.\n\n**What it does:**\n- Validates `reason` is provided (and passes DTO validation)\n- Validates doctor exists and `kycStatus === SUBMITTED`\n- Sets `kycStatus` to `REJECTED` and stores `kycRejectionReason`\n- Sends push notification with rejection reason\n\n**Frontend flow:**\n- Doctor sees \"Please Wait!\" until KYC is submitted. After admin rejects, GET /auth/me (or doctor profile) returns `kycStatus: 'REJECTED'`.\n- Frontend can then call **POST /doctor/account/delete-after-reject** to permanently delete the account and all data (so the doctor sees rejection first, then account is removed when frontend triggers it).\n\n**State rules:**\n- If the doctor is not in `SUBMITTED` status, this returns **400** with `code=INVALID_STATUS`.\n\n**UX tip:**\n- Keep rejection reasons actionable and user-safe (avoid sensitive internal notes).",
        "operationId": "AdminDoctorsController_rejectDoctor",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Doctor account ID (UUID)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RejectDoctorKycDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Doctor rejected; frontend can call POST /doctor/account/delete-after-reject to remove account",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RejectDoctorKycResponseDto"
                },
                "examples": {
                  "rejected-success": {
                    "summary": "Rejected successfully",
                    "value": {
                      "message": "Doctor application rejected",
                      "data": {
                        "status": "REJECTED",
                        "reason": "Aadhaar photo is unclear, please re-upload"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Reason required, doctor not found, invalid current status, invalid UUID, or body validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "REASON_REQUIRED"
                    },
                    "message": {
                      "type": "string",
                      "example": "Rejection reason is required"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/reject"
                    }
                  }
                },
                "examples": {
                  "reason-required": {
                    "summary": "Missing reason (service-level check)",
                    "value": {
                      "statusCode": 400,
                      "code": "REASON_REQUIRED",
                      "message": "Rejection reason is required",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/reject"
                    }
                  },
                  "doctor-not-found": {
                    "summary": "Doctor not found",
                    "value": {
                      "statusCode": 400,
                      "code": "DOCTOR_NOT_FOUND",
                      "message": "Doctor not found",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/reject"
                    }
                  },
                  "invalid-status": {
                    "summary": "Invalid status transition",
                    "value": {
                      "statusCode": 400,
                      "code": "INVALID_STATUS",
                      "message": "Cannot reject doctor with status: VERIFIED",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/reject"
                    }
                  },
                  "invalid-id-format": {
                    "summary": "Invalid UUID format",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "Validation failed (uuid is expected)"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/not-a-uuid/reject"
                    }
                  },
                  "reason-too-short": {
                    "summary": "Validation error: reason too short",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "reason must be longer than or equal to 3 characters"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/reject"
                    }
                  },
                  "reason-too-long": {
                    "summary": "Validation error: reason too long",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "reason must be shorter than or equal to 500 characters"
                      ],
                      "error": "Bad Request",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/reject"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/reject"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/doctors/123e4567-e89b-12d3-a456-426614174000/reject"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Reject doctor KYC",
        "tags": [
          "Admin - Doctors"
        ]
      }
    },
    "/admin/doctors/{id}/suspend": {
      "put": {
        "description": "Temporarily blocks the doctor: sets account status to SUSPENDED and logs them out. They cannot use the app until an admin unsuspends them.",
        "operationId": "AdminDoctorsController_suspendDoctor",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Doctor account ID (UUID)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Doctor suspended",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Doctor suspended successfully. They have been logged out and must contact admin to be restored."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "accountStatus": {
                          "type": "string",
                          "enum": [
                            "SUSPENDED"
                          ]
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Doctor not found or already suspended",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "enum": [
                        "DOCTOR_NOT_FOUND",
                        "ALREADY_SUSPENDED"
                      ]
                    },
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Suspend doctor",
        "tags": [
          "Admin - Doctors"
        ]
      }
    },
    "/admin/doctors/{id}/unsuspend": {
      "put": {
        "description": "Restores doctor access: sets account status back to ACTIVE. They can log in again.",
        "operationId": "AdminDoctorsController_unsuspendDoctor",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Doctor account ID (UUID)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Doctor unsuspended",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Doctor unsuspended successfully. They can log in again."
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "accountStatus": {
                          "type": "string",
                          "enum": [
                            "ACTIVE"
                          ]
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Doctor not found or not suspended",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "enum": [
                        "DOCTOR_NOT_FOUND",
                        "NOT_SUSPENDED"
                      ]
                    },
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Unsuspend doctor",
        "tags": [
          "Admin - Doctors"
        ]
      }
    },
    "/admin/patients": {
      "get": {
        "description": "Paginated list of all patients. Supports search (name or phone partial match) and sort.\n\n**N+1:** Single findMany + one batch balance query for all returned wallets.",
        "operationId": "AdminPatientsController_getPatients",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number (1-indexed)",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "Free-text search across patient name and phone number (case-insensitive partial match)",
            "schema": {
              "minLength": 2,
              "maxLength": 100,
              "example": "John",
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "Field to sort by",
            "schema": {
              "default": "createdAt",
              "type": "string",
              "enum": [
                "createdAt",
                "name",
                "dateOfBirth"
              ]
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "description": "Sort order",
            "schema": {
              "default": "desc",
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of patients with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPatientsResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid query parameters (e.g. search too short)"
          },
          "401": {
            "description": "Invalid or missing JWT"
          },
          "403": {
            "description": "Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get all patients (list)",
        "tags": [
          "Admin - Patients"
        ]
      }
    },
    "/admin/patients/{id}": {
      "get": {
        "description": "Full patient profile including medical history and wallet balance.",
        "operationId": "AdminPatientsController_getPatientById",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Patient account ID (UUID)",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Patient detail",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPatientDetailResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing JWT"
          },
          "403": {
            "description": "Requires ADMIN role"
          },
          "404": {
            "description": "Patient not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get patient detail",
        "tags": [
          "Admin - Patients"
        ]
      }
    },
    "/admin/bookings": {
      "get": {
        "description": "Paginated list of all consultations. Filter by status (REQUESTED, EXPIRED, ACCEPTED, ACTIVE, ENDED, SETTLED) and date range. Search by booking number, client/doctor name, or phone. Sort by createdAt, acceptedAt, endedAt, or status.\n\n**N+1:** Single findMany with includes (patient + doctor profiles for names and phones).",
        "operationId": "AdminBookingsController_getBookings",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number (1-indexed)",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "Search by booking number, client name, doctor name, or phone number",
            "schema": {
              "maxLength": 100,
              "example": "BN000001",
              "type": "string"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "Filter by consultation status",
            "schema": {
              "type": "string",
              "enum": [
                "REQUESTED",
                "EXPIRED",
                "ACCEPTED",
                "ACTIVE",
                "ENDED",
                "SETTLED"
              ]
            }
          },
          {
            "name": "fromDate",
            "required": false,
            "in": "query",
            "description": "Filter bookings created on or after this date (ISO 8601)",
            "schema": {
              "example": "2026-01-01",
              "type": "string"
            }
          },
          {
            "name": "toDate",
            "required": false,
            "in": "query",
            "description": "Filter bookings created on or before this date (ISO 8601)",
            "schema": {
              "example": "2026-01-31",
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "Field to sort by",
            "schema": {
              "default": "createdAt",
              "type": "string",
              "enum": [
                "createdAt",
                "acceptedAt",
                "endedAt",
                "status"
              ]
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "description": "Sort order",
            "schema": {
              "default": "desc",
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of bookings with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetBookingsResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid query parameters (e.g. invalid date)"
          },
          "401": {
            "description": "Invalid or missing JWT"
          },
          "403": {
            "description": "Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get all bookings (consultations)",
        "tags": [
          "Admin - Bookings"
        ]
      }
    },
    "/admin/payout/requests": {
      "get": {
        "description": "Returns a paginated list of payout withdrawal requests from doctors. Includes doctor name, code, amounts and status.",
        "operationId": "AdminPayoutsController_getPayoutsRequests",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number (1-indexed)",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of payout requests",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPayoutsRequestsResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing JWT"
          },
          "403": {
            "description": "Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get payout withdrawal requests",
        "tags": [
          "Admin - Payouts"
        ]
      }
    },
    "/admin/payout/requests/{id}": {
      "get": {
        "description": "Returns detailed information about a single payout request, including doctor and payout method summary.",
        "operationId": "AdminPayoutsController_getPayoutRequestById",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payout request details"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get payout request details",
        "tags": [
          "Admin - Payouts"
        ]
      }
    },
    "/admin/payout/requests/{id}/approve": {
      "post": {
        "description": "Marks a payout request as APPROVED. Actual money transfer integration can be wired later.",
        "operationId": "AdminPayoutsController_approvePayoutRequest",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payout request approved"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Approve payout request",
        "tags": [
          "Admin - Payouts"
        ]
      }
    },
    "/admin/payout/requests/{id}/reject": {
      "post": {
        "description": "Rejects a payout request with a reason. Does not modify wallet balance; only marks the request REJECTED.",
        "operationId": "AdminPayoutsController_rejectPayoutRequest",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payout request rejected"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Reject payout request",
        "tags": [
          "Admin - Payouts"
        ]
      }
    },
    "/admin/analytics/overview": {
      "get": {
        "description": "Returns core counts used by the admin dashboard.\n\n**Fields:**\n- `totalDoctors` - Total number of doctors (all KYC states)\n- `verifiedDoctors` - Doctors with `kycStatus=VERIFIED`\n- `pendingKyc` - Doctors with `kycStatus=SUBMITTED` (awaiting review)\n- `totalPatients` - Total number of patient accounts\n- `totalConsultations` - All consultations ever created\n- `activeConsultations` - Consultations in progress (ACCEPTED/ACTIVE)\n- `newDoctors` - Doctors registered in the last 30 days\n- `newPatients` - Patients registered in the last 30 days\n- `totalChats` - Consultations with mode CHAT\n- `totalAudioCalls` - Consultations with mode AUDIO\n- `totalVideoCalls` - Consultations with mode VIDEO\n\n**Typical use-cases:**\n- Populate dashboard tiles/cards on the admin home screen\n- Show overall supply (doctors) vs demand (patients/consultations)\n- Monitor operational backlog (pending KYC count)",
        "operationId": "AdminAnalyticsController_getAnalyticsOverview",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Analytics overview",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminAnalyticsOverviewDto"
                },
                "examples": {
                  "empty-system": {
                    "summary": "Fresh system with no data",
                    "value": {
                      "totalDoctors": 0,
                      "verifiedDoctors": 0,
                      "pendingKyc": 0,
                      "totalPatients": 0,
                      "totalConsultations": 0,
                      "activeConsultations": 0,
                      "newDoctors": 0,
                      "newPatients": 0,
                      "totalChats": 0,
                      "totalAudioCalls": 0,
                      "totalVideoCalls": 0
                    }
                  },
                  "typical-day": {
                    "summary": "Typical production day",
                    "value": {
                      "totalDoctors": 120,
                      "verifiedDoctors": 85,
                      "pendingKyc": 10,
                      "totalPatients": 3500,
                      "totalConsultations": 8200,
                      "activeConsultations": 12,
                      "newDoctors": 5,
                      "newPatients": 120,
                      "totalChats": 5000,
                      "totalAudioCalls": 2500,
                      "totalVideoCalls": 700
                    }
                  },
                  "peak-hours": {
                    "summary": "Peak traffic window",
                    "value": {
                      "totalDoctors": 120,
                      "verifiedDoctors": 85,
                      "pendingKyc": 20,
                      "totalPatients": 3500,
                      "totalConsultations": 9000,
                      "activeConsultations": 45,
                      "newDoctors": 5,
                      "newPatients": 120,
                      "totalChats": 5500,
                      "totalAudioCalls": 2800,
                      "totalVideoCalls": 700
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/analytics/overview"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/analytics/overview"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Admin dashboard overview",
        "tags": [
          "Admin - Analytics"
        ]
      }
    },
    "/admin/transactions": {
      "get": {
        "description": "Paginated list of all wallet transactions. Filters: page, limit, from, to (date range), transactionType, ownerType (USER/DOCTOR/PLATFORM), consultationId (UUID or booking number e.g. BN000001).",
        "operationId": "AdminAnalyticsController_getTransactions",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number (1-indexed)",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "from",
            "required": false,
            "in": "query",
            "description": "Filter transactions created on or after this date (ISO 8601)",
            "schema": {
              "example": "2026-01-01",
              "type": "string"
            }
          },
          {
            "name": "to",
            "required": false,
            "in": "query",
            "description": "Filter transactions created on or before this date (ISO 8601)",
            "schema": {
              "example": "2026-01-31",
              "type": "string"
            }
          },
          {
            "name": "transactionType",
            "required": false,
            "in": "query",
            "description": "Filter by transaction type",
            "schema": {
              "type": "string",
              "enum": [
                "USER_RECHARGE",
                "CONSULTATION_DEBIT",
                "DOCTOR_EARNING_CREDIT",
                "PLATFORM_COMMISSION",
                "GST_COMPONENT"
              ]
            }
          },
          {
            "name": "ownerType",
            "required": false,
            "in": "query",
            "description": "Filter by wallet owner type (USER = patient, DOCTOR, PLATFORM)",
            "schema": {
              "type": "string",
              "enum": [
                "USER",
                "DOCTOR",
                "PLATFORM"
              ]
            }
          },
          {
            "name": "consultationId",
            "required": false,
            "in": "query",
            "description": "Filter by consultation: pass consultation UUID or booking number (e.g. BN000001)",
            "schema": {
              "example": "BN000001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated transaction list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminTransactionsResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "List wallet transactions (admin)",
        "tags": [
          "Admin - Analytics"
        ]
      }
    },
    "/admin/dashboard/metrics": {
      "get": {
        "description": "Returns platform financial aggregates (wallet balances, GST collection, commission, and Razorpay deposits), with optional time range filters for **flows**.\n\n**Balances (always current snapshot, ignore time range):**\n- `totalPlatformBalance` - Platform's own wallet balance (commission + GST) **now**\n- `totalDoctorsBalance` - Sum of all doctor wallet balances **now**\n- `totalPatientsBalance` - Sum of all patient wallet balances **now**\n\n**Flows (respect time range filters):**\n- `totalGstCollection` - GST from wallet recharges in the selected range\n- `totalCommission` - Platform commission from consultations in the selected range\n- `totalRazorpayDeposits` - Successful Razorpay deposits in the selected range\n- `totalPayoutWithdrawals` - Total payout withdrawals in the selected range (stub: 0 until Payout model exists)\n\n**Range query params:**\n- `range` (optional): one of `all_time` (default), `today`, `yesterday`, `last_7_days`, `this_month`, `last_month`, `custom`\n- `from`, `to` (optional): ISO dates (e.g. 2026-02-01). Used only when `range=custom`.\n\nExamples:\n- `GET /api/v1/admin/dashboard/metrics` → all-time flows + current balances\n- `GET /api/v1/admin/dashboard/metrics?range=last_7_days`\n- `GET /api/v1/admin/dashboard/metrics?range=custom&from=2026-02-01&to=2026-02-21`\n\n**Accounting notes:**\n- Over long periods (ignoring manual adjustments):  \n  `totalRazorpayDeposits ≈ totalPatientsBalance + totalDoctorsBalance + totalPlatformBalance`\n- Values are aggregated in INR and represented as strings (e.g. \"1234.50\").",
        "operationId": "AdminAnalyticsController_getDashboardMetrics",
        "parameters": [
          {
            "name": "range",
            "required": false,
            "in": "query",
            "description": "Time range for flow metrics (GST, commission, deposits). Balances are always current snapshot.",
            "schema": {
              "default": "all_time",
              "example": "last_7_days",
              "type": "string",
              "enum": [
                "all_time",
                "today",
                "yesterday",
                "last_7_days",
                "this_month",
                "last_month",
                "custom"
              ]
            }
          },
          {
            "name": "from",
            "required": false,
            "in": "query",
            "description": "Custom range start (ISO date or datetime, e.g. 2026-02-01). Used only when range=custom.",
            "schema": {
              "example": "2026-02-01",
              "type": "string"
            }
          },
          {
            "name": "to",
            "required": false,
            "in": "query",
            "description": "Custom range end (ISO date or datetime, e.g. 2026-02-21). Used only when range=custom.",
            "schema": {
              "example": "2026-02-21",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Financial metrics",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminDashboardMetricsDto"
                },
                "examples": {
                  "empty-system": {
                    "summary": "Fresh system with no financial activity",
                    "value": {
                      "range": {
                        "from": null,
                        "to": null
                      },
                      "snapshotAt": "2026-02-21T18:30:00.000Z",
                      "balances": {
                        "totalPlatformBalance": "0.00",
                        "totalDoctorsBalance": "0.00",
                        "totalPatientsBalance": "0.00"
                      },
                      "flows": {
                        "totalGstCollection": "0.00",
                        "totalCommission": "0.00",
                        "totalRazorpayDeposits": "0.00",
                        "totalPayoutWithdrawals": "0.00"
                      }
                    }
                  },
                  "typical-day": {
                    "summary": "Live system with steady usage",
                    "value": {
                      "range": {
                        "from": "2026-02-01T00:00:00.000Z",
                        "to": "2026-02-21T23:59:59.999Z"
                      },
                      "snapshotAt": "2026-02-21T18:30:00.000Z",
                      "balances": {
                        "totalPlatformBalance": "15230.75",
                        "totalDoctorsBalance": "250000.00",
                        "totalPatientsBalance": "120000.50"
                      },
                      "flows": {
                        "totalGstCollection": "8230.50",
                        "totalCommission": "7000.25",
                        "totalRazorpayDeposits": "382231.25",
                        "totalPayoutWithdrawals": "0.00"
                      }
                    }
                  },
                  "high-volume": {
                    "summary": "High-volume environment with large balances",
                    "value": {
                      "range": {
                        "from": "2026-01-01T00:00:00.000Z",
                        "to": "2026-01-31T23:59:59.999Z"
                      },
                      "snapshotAt": "2026-02-01T10:00:00.000Z",
                      "balances": {
                        "totalPlatformBalance": "50230.10",
                        "totalDoctorsBalance": "925000.75",
                        "totalPatientsBalance": "310000.40"
                      },
                      "flows": {
                        "totalGstCollection": "30230.10",
                        "totalCommission": "20000.00",
                        "totalRazorpayDeposits": "1747231.25",
                        "totalPayoutWithdrawals": "0.00"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/dashboard/metrics"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/dashboard/metrics"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Admin financial metrics",
        "tags": [
          "Admin - Analytics"
        ]
      }
    },
    "/admin/dev/clear-doctors-patients": {
      "post": {
        "description": "Deletes all doctor and patient accounts and their profiles.\n    \n**⚠️ DEVELOPMENT ONLY** - This endpoint only works when NODE_ENV=development.\n\n**What gets deleted:**\n- All accounts with role DOCTOR (cascade deletes doctor profiles, sessions, wallets, etc.)\n- All accounts with role PATIENT (cascade deletes patient profiles, sessions, wallets, etc.)\n\n**What is preserved:**\n- Admin accounts\n- Reference data (specializations, symptoms, medical conditions, languages)\n- Platform wallet\n\n**Use case:** Quick database reset during development/testing in Docker.\n\n**Returns:** Count of deleted doctors and patients.",
        "operationId": "AdminDevController_clearDoctorsAndPatients",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Doctors and patients cleared successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Doctors and patients cleared successfully"
                    },
                    "deletedDoctors": {
                      "type": "integer",
                      "example": 5,
                      "description": "Number of doctors deleted"
                    },
                    "deletedPatients": {
                      "type": "integer",
                      "example": 10,
                      "description": "Number of patients deleted"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/dev/clear-doctors-patients"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "403 - Not in development mode (DEV_ENDPOINT_ONLY) or requires ADMIN role (AUTH_ROLE_FORBIDDEN)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "DEV_ENDPOINT_ONLY"
                    },
                    "message": {
                      "type": "string",
                      "example": "This endpoint is only available in development mode."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/dev/clear-doctors-patients"
                    }
                  }
                },
                "examples": {
                  "devOnly": {
                    "summary": "Not in development mode",
                    "value": {
                      "statusCode": 403,
                      "code": "DEV_ENDPOINT_ONLY",
                      "message": "This endpoint is only available in development mode.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/dev/clear-doctors-patients"
                    }
                  },
                  "roleForbidden": {
                    "summary": "Requires ADMIN role",
                    "value": {
                      "statusCode": 403,
                      "code": "AUTH_ROLE_FORBIDDEN",
                      "message": "You are not allowed to access this resource.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/dev/clear-doctors-patients"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "[DEV] Clear All Doctors and Patients (Development Only)",
        "tags": [
          "Admin - Dev"
        ]
      }
    },
    "/admin/dev/add-test-money": {
      "post": {
        "description": "Adds money directly to a patient's wallet for testing.\n    \n**⚠️ DEVELOPMENT ONLY** - This endpoint only works when NODE_ENV=development.\n\n**What it does:**\n- Creates a USER_RECHARGE transaction directly\n- Bypasses payment gateway (no Razorpay needed)\n- Adds money to patient wallet instantly\n\n**Use case:** Quick wallet recharge for testing consultations, payments, etc.\n\n**Body:**\n- accountId: Patient account ID (UUID)\n- amount: Amount to add (default: 1000, minimum: 30)\n\n**Returns:** Updated wallet balance",
        "operationId": "AdminDevController_addTestMoney",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddTestMoneyDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Test money added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Test money added successfully"
                    },
                    "accountId": {
                      "type": "string",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "amountAdded": {
                      "type": "string",
                      "example": "1000"
                    },
                    "newBalance": {
                      "type": "string",
                      "example": "1000"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/dev/add-test-money"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "403 - Not in dev (DEV_ENDPOINT_ONLY), invalid amount (INVALID_AMOUNT), account not found (ACCOUNT_NOT_FOUND), or not a patient (INVALID_ROLE)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "DEV_ENDPOINT_ONLY"
                    },
                    "message": {
                      "type": "string",
                      "example": "This endpoint is only available in development mode."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/dev/add-test-money"
                    }
                  }
                },
                "examples": {
                  "devOnly": {
                    "summary": "Not in development mode",
                    "value": {
                      "statusCode": 403,
                      "code": "DEV_ENDPOINT_ONLY",
                      "message": "This endpoint is only available in development mode.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/dev/add-test-money"
                    }
                  },
                  "invalidAmount": {
                    "summary": "Amount must be greater than 0",
                    "value": {
                      "statusCode": 403,
                      "code": "INVALID_AMOUNT",
                      "message": "Amount must be greater than 0",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/dev/add-test-money"
                    }
                  },
                  "accountNotFound": {
                    "summary": "Account not found",
                    "value": {
                      "statusCode": 403,
                      "code": "ACCOUNT_NOT_FOUND",
                      "message": "Account 123e4567-e89b-12d3-a456-426614174000 not found",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/dev/add-test-money"
                    }
                  },
                  "invalidRole": {
                    "summary": "Only for patient accounts",
                    "value": {
                      "statusCode": 403,
                      "code": "INVALID_ROLE",
                      "message": "This endpoint is only for patient accounts",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/dev/add-test-money"
                    }
                  },
                  "roleForbidden": {
                    "summary": "Requires ADMIN role",
                    "value": {
                      "statusCode": 403,
                      "code": "AUTH_ROLE_FORBIDDEN",
                      "message": "You are not allowed to access this resource.",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/dev/add-test-money"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "[DEV] Add Test Money to Patient Wallet (Development Only)",
        "tags": [
          "Admin - Dev"
        ]
      }
    },
    "/admin/auth/login": {
      "post": {
        "description": "Authenticate admin with email and password. Returns access token and refresh token. Single-session policy: if admin is already logged in, login will be rejected.",
        "operationId": "AdminAuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminLoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminLoginResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Admin already logged in (single-session policy)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "ADMIN_ALREADY_LOGGED_IN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are already logged in. Please logout before logging in again."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/auth/login"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials, wrong role, or account inactive (401)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "ADMIN_INVALID_CREDENTIALS"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid email or password"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/auth/login"
                    }
                  }
                },
                "examples": {
                  "invalidCredentials": {
                    "summary": "Invalid email or password",
                    "value": {
                      "statusCode": 401,
                      "code": "ADMIN_INVALID_CREDENTIALS",
                      "message": "Invalid email or password",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/auth/login"
                    }
                  },
                  "invalidRole": {
                    "summary": "Account is not an admin",
                    "value": {
                      "statusCode": 401,
                      "code": "ADMIN_INVALID_ROLE",
                      "message": "Account is not an admin",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/auth/login"
                    }
                  },
                  "notActive": {
                    "summary": "Admin account is not active",
                    "value": {
                      "statusCode": 401,
                      "code": "ADMIN_NOT_ACTIVE",
                      "message": "Admin account is not active",
                      "timestamp": "2026-01-22T12:00:00.000Z",
                      "path": "/api/v1/admin/auth/login"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Admin login",
        "tags": [
          "Admin - Auth"
        ]
      }
    },
    "/admin/auth/logout": {
      "post": {
        "description": "Logout current admin session. Invalidates the access token and refresh token. Requires Bearer token authentication.",
        "operationId": "AdminAuthController_logout",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Logout successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminLogoutResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_SESSION_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Session has been invalidated. Please login again."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/auth/logout"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/auth/logout"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Admin logout",
        "tags": [
          "Admin - Auth"
        ]
      }
    },
    "/admin/auth/admins": {
      "get": {
        "description": "Returns all admin users. Requires ADMIN role.",
        "operationId": "AdminAuthController_listAdmins",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of admins",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid"
                          },
                          "email": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string",
                            "example": "ACTIVE"
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time"
                          },
                          "lastLoginAt": {
                            "type": "string",
                            "format": "date-time",
                            "nullable": true
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "List admins",
        "tags": [
          "Admin - Auth"
        ]
      },
      "post": {
        "description": "Create a new admin user with email and password. Requires ADMIN role.",
        "operationId": "AdminAuthController_createAdmin",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAdminDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Admin created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "email": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Email already exists",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "ADMIN_EMAIL_EXISTS"
                    },
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Create admin",
        "tags": [
          "Admin - Auth"
        ]
      }
    },
    "/admin/reference-data/specializations": {
      "get": {
        "description": "Returns all medical specializations (including inactive ones).\n    \n**Admin Use Case:**\n- View all specializations for management\n- See which specializations are active/inactive\n- Use this list to edit or deactivate specializations\n\n**Note:** Public endpoint /shared/specializations only returns active ones.",
        "operationId": "AdminReferenceDataController_getSpecializations",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of all specializations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SpecializationResponseDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/reference-data/specializations"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/reference-data/specializations"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get all specializations",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "post": {
        "description": "Create a new medical specialization.\n    \n**Validation:**\n- Name must be unique\n- Name cannot exceed 100 characters\n- New specializations are created as active by default\n\n**Use Case:**\n- Add new medical specialties to the platform\n- Enable doctors to select new specializations during onboarding",
        "operationId": "AdminReferenceDataController_createSpecialization",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSpecializationDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Specialization created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SpecializationResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Name already exists or validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/reference-data/specializations"
                    }
                  },
                  "examples": {
                    "Name Already Exists": {
                      "summary": "Specialization name already exists",
                      "value": {
                        "code": "SPECIALIZATION_ALREADY_EXISTS",
                        "message": "Specialization with name \"Cardiology\" already exists",
                        "statusCode": 400,
                        "timestamp": "2026-01-22T12:00:00.000Z",
                        "path": "/api/v1/admin/reference-data/specializations"
                      }
                    },
                    "Validation Error": {
                      "summary": "Request body validation failed",
                      "value": {
                        "code": "BadRequestException",
                        "message": [
                          "name should not be empty",
                          "name must be a string"
                        ],
                        "statusCode": 400,
                        "timestamp": "2026-01-22T12:00:00.000Z",
                        "path": "/api/v1/admin/reference-data/specializations"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Create a new specialization",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/specializations/{id}": {
      "put": {
        "description": "Update an existing specialization.\n    \n**Allowed Updates:**\n- Name (must be unique if changed)\n- isActive status (to activate/deactivate)\n\n**Use Cases:**\n- Fix typos in specialization names\n- Deactivate specializations that are no longer used\n- Reactivate previously deactivated specializations",
        "operationId": "AdminReferenceDataController_updateSpecialization",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the specialization",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSpecializationDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Specialization updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SpecializationResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Name already exists or validation failed"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Specialization not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "NotFoundException"
                    },
                    "message": {
                      "type": "string",
                      "example": "Specialization 123e4567-e89b-12d3-a456-426614174000 not found"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/reference-data/specializations/123e4567-e89b-12d3-a456-426614174000"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Update a specialization",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "delete": {
        "description": "Delete a specialization.\n    \n**Business Rules:**\n- Cannot delete if any doctors are using this specialization\n- If doctors are using it, returns a BUSINESS error and does not delete\n- If no doctors are using it, performs a HARD delete (row is removed)\n\n**Use Case:**\n- Remove specializations that are no longer needed\n- Clean up duplicate or incorrect entries",
        "operationId": "AdminReferenceDataController_deleteSpecialization",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the specialization",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Specialization deleted successfully (hard delete)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SpecializationResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Cannot delete: Specialization is in use by doctors",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "SPECIALIZATION_IN_USE"
                    },
                    "message": {
                      "type": "string",
                      "example": "Cannot delete specialization. 5 doctor(s) are using this specialization. Deactivate it instead."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/reference-data/specializations/123e4567-e89b-12d3-a456-426614174000"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Specialization not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Delete a specialization",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/medical-approaches": {
      "get": {
        "description": "Returns all medical approaches (including inactive ones).\n\n**Admin Use Case:**\n- Manage high-level systems of medicine (Allopathy, Ayurveda, etc.)\n- See which approaches are active/inactive\n\n**Note:** Public endpoint /shared/medical-approaches only returns active ones.",
        "operationId": "AdminReferenceDataController_getMedicalApproaches",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of all medical approaches",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MedicalApproachResponseDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get all medical approaches",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "post": {
        "description": "Create a new medical approach (system of medicine).\n\n**Validation:**\n- code must be unique (e.g. ALLOPATHY, AYURVEDA)\n- name is the human-friendly label\n\n**Use Case:**\n- Add new systems of medicine to the platform",
        "operationId": "AdminReferenceDataController_createMedicalApproach",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMedicalApproachDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Medical approach created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MedicalApproachResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Code already exists or validation failed"
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Create a new medical approach",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/medical-approaches/{id}": {
      "put": {
        "description": "Update an existing medical approach.\n\n**Allowed Updates:**\n- code (must be unique if changed)\n- name\n- isActive status",
        "operationId": "AdminReferenceDataController_updateMedicalApproach",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the medical approach",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMedicalApproachDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Medical approach updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MedicalApproachResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Code already exists or validation failed"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Medical approach not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Update a medical approach",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "delete": {
        "description": "Permanently deletes a medical approach.\n\n**Business Rules:**\n- HARD delete: row is removed from medical_approaches\n- Due to onDelete: SetNull on Doctor.medicalApproach, doctors referencing it\n  will have medicalApproachId set to null.",
        "operationId": "AdminReferenceDataController_deleteMedicalApproach",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the medical approach",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Medical approach deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MedicalApproachResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Medical approach not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Delete a medical approach (hard delete)",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/symptoms": {
      "get": {
        "description": "Returns all symptoms (including inactive ones).\n    \n**Admin Use Case:**\n- View all symptoms for management\n- See which symptoms are active/inactive\n- Use this list to edit or deactivate symptoms",
        "operationId": "AdminReferenceDataController_getSymptoms",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of all symptoms",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SymptomResponseDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get all symptoms",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "post": {
        "description": "Create a new symptom for doctor discovery.\n    \n**Validation:**\n- Name must be unique\n- Name cannot exceed 100 characters\n- New symptoms are created as active by default",
        "operationId": "AdminReferenceDataController_createSymptom",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSymptomDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Symptom created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SymptomResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Name already exists or validation failed"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Create a new symptom",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/symptoms/{id}": {
      "put": {
        "description": "Update an existing symptom.\n    \n**Allowed Updates:**\n- Name (must be unique if changed)\n- isActive status\n- specializationIds: replace linked specializations (pass [] to clear, omit to leave unchanged)",
        "operationId": "AdminReferenceDataController_updateSymptom",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the symptom",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSymptomDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Symptom updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SymptomResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Name already exists"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Symptom not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Update a symptom",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "delete": {
        "description": "Delete (deactivate) a symptom.\n    \n**Business Rules:**\n- Performs soft delete by setting isActive = false",
        "operationId": "AdminReferenceDataController_deleteSymptom",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the symptom",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Symptom deleted (deactivated) successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SymptomResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Symptom not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Delete a symptom (soft delete)",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/symptoms/full": {
      "get": {
        "description": "Returns both the full symptom list and symptom categories (including inactive) for the admin configuration screens.\n\n**Includes:**\n- `symptoms`: Flat list of all symptoms with status and timestamps\n- `categories`: Symptom categories with their symptoms, displayOrder and status\n\n**Notes:**\n- Returns both active and inactive items so admin can manage them",
        "operationId": "AdminReferenceDataController_getFullSymptomDataAdmin",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Full symptom data for admin retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminGetFullSymptomsResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get full symptom data for admin (flat list + categories)",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/symptom-categories": {
      "get": {
        "description": "Returns all symptom categories (including inactive) with their symptoms.\nUsed to manage categorized symptom UI (e.g. \"Most Common Symptoms\", \"Skin & Hair Symptoms\").",
        "operationId": "AdminReferenceDataController_getSymptomCategories",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of symptom categories with symptoms",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SymptomCategoryResponseDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get all symptom categories",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "post": {
        "description": "Create a new symptom category. Optionally assign symptom IDs (order = display order).",
        "operationId": "AdminReferenceDataController_createSymptomCategory",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSymptomCategoryDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Symptom category created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SymptomCategoryResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Name already exists or validation failed"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Create a symptom category",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/symptom-categories/{id}": {
      "put": {
        "description": "Update name, displayOrder, isActive, or replace symptoms (symptomIds).",
        "operationId": "AdminReferenceDataController_updateSymptomCategory",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the symptom category",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSymptomCategoryDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Symptom category updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SymptomCategoryResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Name already exists"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Symptom category not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Update a symptom category",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "delete": {
        "description": "Soft delete by setting isActive = false. Public GET /shared/symptom-categories will no longer return it.",
        "operationId": "AdminReferenceDataController_deleteSymptomCategory",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the symptom category",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Symptom category deleted (deactivated) successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SymptomCategoryResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Symptom category not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Delete a symptom category (soft delete)",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/languages": {
      "get": {
        "description": "Returns all languages (including inactive ones).\n    \n**Admin Use Case:**\n- View all languages for management\n- See which languages are active/inactive",
        "operationId": "AdminReferenceDataController_getLanguages",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of all languages",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/LanguageResponseDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get all languages",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "post": {
        "description": "Create a new language.\n    \n**Validation:**\n- Code must be unique (ISO language code)\n- Code cannot exceed 10 characters\n- Name cannot exceed 50 characters\n- New languages are created as active by default",
        "operationId": "AdminReferenceDataController_createLanguage",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateLanguageDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Language created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LanguageResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Code already exists or validation failed"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Create a new language",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/languages/{id}": {
      "put": {
        "description": "Update an existing language.\n    \n**Allowed Updates:**\n- Code (must be unique if changed)\n- Name\n- isActive status",
        "operationId": "AdminReferenceDataController_updateLanguage",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the language",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateLanguageDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Language updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LanguageResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Code already exists"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Language not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Update a language",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "delete": {
        "description": "Delete a language.\n    \n**Business Rules:**\n- Cannot delete if any patients or doctors are using this language\n- If in use, returns a BUSINESS error and does not delete\n- If not in use, performs a HARD delete (row is removed)",
        "operationId": "AdminReferenceDataController_deleteLanguage",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the language",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Language deleted successfully (hard delete)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LanguageResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Language not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Delete a language (hard delete with safety checks)",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/medical-councils": {
      "get": {
        "description": "Returns all medical councils (including inactive ones).\n    \n**Admin Use Case:**\n- View all medical councils for management\n- See which councils are active/inactive",
        "operationId": "AdminReferenceDataController_getMedicalCouncils",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of all medical councils",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MedicalCouncilResponseDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get all medical councils",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "post": {
        "description": "Create a new medical council.\n    \n**Validation:**\n- Name must be unique\n- Name cannot exceed 200 characters\n- State is optional (null for national councils)\n- New councils are created as active by default",
        "operationId": "AdminReferenceDataController_createMedicalCouncil",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMedicalCouncilDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Medical council created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MedicalCouncilResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Name already exists or validation failed"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Create a new medical council",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/reference-data/medical-councils/{id}": {
      "put": {
        "description": "Update an existing medical council.\n    \n**Allowed Updates:**\n- Name (must be unique if changed)\n- State (can be set to null for national councils)\n- isActive status",
        "operationId": "AdminReferenceDataController_updateMedicalCouncil",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the medical council",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateMedicalCouncilDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Medical council updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MedicalCouncilResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Name already exists"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Medical council not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Update a medical council",
        "tags": [
          "Admin - Reference Data"
        ]
      },
      "delete": {
        "description": "Delete a medical council.\n    \n**Business Rules:**\n- Cannot delete if any doctors are using this council\n- If doctors are using it, returns a BUSINESS error and does not delete\n- If no doctors are using it, performs a HARD delete (row is removed)",
        "operationId": "AdminReferenceDataController_deleteMedicalCouncil",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "UUID of the medical council",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Medical council deleted successfully (hard delete)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MedicalCouncilResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Cannot delete: Medical council is in use by doctors",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "MEDICAL_COUNCIL_IN_USE"
                    },
                    "message": {
                      "type": "string",
                      "example": "Cannot delete medical council. 3 doctor(s) are using this council."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/reference-data/medical-councils/123e4567-e89b-12d3-a456-426614174000"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role"
          },
          "404": {
            "description": "Medical council not found"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Delete a medical council (hard delete with safety checks)",
        "tags": [
          "Admin - Reference Data"
        ]
      }
    },
    "/admin/payments": {
      "get": {
        "description": "Paginated list of all payment records (wallet recharges). Filter by status and date range. Sort by createdAt, totalAmount, or status.\n\n**N+1:** Single findMany with include account.patient, account.doctor for name/email.",
        "operationId": "AdminPaymentsController_getPaymentsList",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number (1-indexed)",
            "schema": {
              "minimum": 1,
              "default": 1,
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of items per page",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 20,
              "example": 20,
              "type": "number"
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "Filter by payment status",
            "schema": {
              "type": "string",
              "enum": [
                "PENDING",
                "SUCCESS",
                "FAILED",
                "REFUNDED"
              ]
            }
          },
          {
            "name": "fromDate",
            "required": false,
            "in": "query",
            "description": "Filter payments created on or after this date (ISO 8601)",
            "schema": {
              "example": "2026-01-01",
              "type": "string"
            }
          },
          {
            "name": "toDate",
            "required": false,
            "in": "query",
            "description": "Filter payments created on or before this date (ISO 8601)",
            "schema": {
              "example": "2026-01-31",
              "type": "string"
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "Field to sort by",
            "schema": {
              "default": "createdAt",
              "type": "string",
              "enum": [
                "createdAt",
                "totalAmount",
                "status"
              ]
            }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "description": "Sort order",
            "schema": {
              "default": "desc",
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of payments with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPaymentsListResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid query parameters (e.g. invalid date)"
          },
          "401": {
            "description": "Invalid or missing JWT"
          },
          "403": {
            "description": "Requires ADMIN role"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get all payments (recharges)",
        "tags": [
          "Admin - Payments"
        ]
      }
    },
    "/admin/payments/verify-order/{orderId}": {
      "post": {
        "description": "Verifies a payment order with Razorpay. If the payment is captured/authorized in Razorpay, fulfillment is run (payment status updated, wallet credited). Use when the webhook was missed (e.g. backend was down) and support has confirmed the payment in Razorpay dashboard.",
        "operationId": "AdminPaymentsController_verifyOrderWithRazorpay",
        "parameters": [
          {
            "name": "orderId",
            "required": true,
            "in": "path",
            "description": "Razorpay order ID",
            "schema": {
              "example": "order_MxYz1234567890",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Verification result",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "updated": {
                      "type": "boolean",
                      "description": "Whether fulfillment was run (payment was captured in Razorpay)"
                    },
                    "payment": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "paymentId": {
                          "type": "string"
                        },
                        "orderId": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string",
                          "enum": [
                            "PENDING",
                            "SUCCESS",
                            "FAILED"
                          ]
                        },
                        "accountId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "walletAmount": {
                          "type": "string"
                        },
                        "totalAmount": {
                          "type": "string"
                        },
                        "currency": {
                          "type": "string"
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "completedAt": {
                          "type": "string",
                          "format": "date-time",
                          "nullable": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid or missing access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/payments/verify-order/order_MxYz1234567890"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Requires ADMIN role",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_ROLE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "You are not allowed to access this resource."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "timestamp": {
                      "type": "string",
                      "example": "2026-01-22T12:00:00.000Z"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/payments/verify-order/order_MxYz1234567890"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Payment not found for this order",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Payment not found for this order"
                    },
                    "error": {
                      "type": "string",
                      "example": "Not Found"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/admin/payments/verify-order/order_MxYz1234567890"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Verify order with Razorpay and fulfill if captured",
        "tags": [
          "Admin - Payments"
        ]
      }
    },
    "/patient/payment/recharge": {
      "post": {
        "description": "Creates a payment record and Razorpay order for patient wallet recharge.\n\n**Flow:**\n1. Frontend calls this endpoint with `walletAmount` (base amount to add to wallet, before GST)\n2. Backend calculates GST and total payable amount\n3. Backend creates Razorpay order and returns order details\n4. Frontend opens Razorpay Checkout using returned order info\n5. Razorpay webhook (/api/v1/payment/webhook) finalizes wallet recharge on success\n\n**Edge cases:** Send `Idempotency-Key` header (e.g. UUID) to get the same order on retry (double-tap, refresh, Wi‑Fi off). After returning from Razorpay, call GET order/:orderId/status to sync if redirect failed.",
        "operationId": "PaymentsController_createPayment",
        "parameters": [
          {
            "name": "idempotency-key",
            "required": true,
            "in": "header",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePaymentDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Payment order created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatePaymentResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (walletAmount positive, min 30)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "walletAmount must be a positive number",
                        "walletAmount must not be less than 30"
                      ]
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/payment/recharge"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/payment/recharge"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a patient (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/payment/recharge"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Create Razorpay order for wallet recharge",
        "tags": [
          "Payments"
        ]
      }
    },
    "/patient/payment/history": {
      "get": {
        "description": "Returns a paginated list of wallet recharge payments for the authenticated patient. By default syncs up to 5 PENDING payments with Razorpay before returning. Set sync=false to skip sync.",
        "operationId": "PaymentsController_getPaymentHistory",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of payments to return (default: 50, max: 100)",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 50,
              "example": 50,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of payments to skip (default: 0)",
            "schema": {
              "minimum": 0,
              "default": 0,
              "example": 0,
              "type": "number"
            }
          },
          {
            "name": "sync",
            "required": false,
            "in": "query",
            "description": "If false, skip syncing PENDING payments with Razorpay (default: true)",
            "schema": {
              "example": "true",
              "type": "string",
              "enum": [
                "true",
                "false"
              ]
            }
          },
          {
            "name": "status",
            "required": false,
            "in": "query",
            "description": "Filter payments by status (PENDING, SUCCESS, FAILED, REFUNDED). If omitted, all statuses are returned.",
            "schema": {
              "example": "SUCCESS",
              "type": "string",
              "enum": [
                "PENDING",
                "SUCCESS",
                "FAILED",
                "REFUNDED"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment history retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPaymentHistoryResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid pagination parameters (limit, offset, sync)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "limit must not be greater than 100"
                      ]
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/payment/history"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/payment/history"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a patient (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/payment/history"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get patient payment history",
        "tags": [
          "Payments"
        ]
      }
    },
    "/patient/payment/order/{orderId}/status": {
      "get": {
        "description": "Syncs a single payment with Razorpay by order ID. Use when the user returns from Razorpay Checkout (e.g. success redirect). If Razorpay shows the payment as captured, the wallet is credited and the payment record is updated. Only payments belonging to the authenticated patient can be synced.",
        "operationId": "PaymentsController_syncPaymentStatusByOrderId",
        "parameters": [
          {
            "name": "orderId",
            "required": true,
            "in": "path",
            "description": "Razorpay order ID (returned when creating the payment order)",
            "schema": {
              "example": "order_MxYz1234567890",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payment status (synced with Razorpay if needed)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "paymentId": {
                      "type": "string"
                    },
                    "orderId": {
                      "type": "string"
                    },
                    "status": {
                      "type": "string",
                      "enum": [
                        "PENDING",
                        "SUCCESS",
                        "FAILED"
                      ]
                    },
                    "walletAmount": {
                      "type": "string"
                    },
                    "totalAmount": {
                      "type": "string"
                    },
                    "currency": {
                      "type": "string"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "completedAt": {
                      "type": "string",
                      "format": "date-time",
                      "nullable": true
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid order ID format",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid order ID"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/payment/order/:orderId/status"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/payment/order/:orderId/status"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a patient (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/payment/order/:orderId/status"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Payment not found for this order and account",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Payment not found for this order"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/payment/order/:orderId/status"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Sync payment status by order ID",
        "tags": [
          "Payments"
        ]
      }
    },
    "/payment/webhook": {
      "post": {
        "description": "Called by Razorpay when payment status changes. No auth. Send raw JSON body; backend verifies X-Razorpay-Signature if present.",
        "operationId": "PaymentWebhookController_handleWebhook",
        "parameters": [
          {
            "name": "x-razorpay-signature",
            "required": true,
            "in": "header",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Razorpay webhook payload (raw JSON)",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Razorpay event payload with payload.payment.entity"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Webhook processed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Razorpay webhook",
        "tags": [
          "Payments"
        ]
      }
    },
    "/auth/device-token": {
      "post": {
        "description": "Register or update the FCM device token for the authenticated user.",
        "operationId": "NotificationsController_registerDeviceToken",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterDeviceTokenDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Device token registered"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error"
          },
          "401": {
            "description": "Missing or invalid token"
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Register device token for push notifications",
        "tags": [
          "Notifications"
        ]
      }
    },
    "/notifications": {
      "get": {
        "description": "Returns paginated notifications for the authenticated patient along with the total unread count.",
        "operationId": "NotificationInboxController_getNotifications",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "schema": {
              "example": 1,
              "type": "number"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "schema": {
              "example": 20,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notifications list",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object"
                      }
                    },
                    "total": {
                      "type": "number"
                    },
                    "unreadCount": {
                      "type": "number"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get notification inbox",
        "tags": [
          "Notifications"
        ]
      }
    },
    "/notifications/read-all": {
      "post": {
        "description": "Marks every unread notification for the authenticated user as read. Call this when the patient opens the notification screen.",
        "operationId": "NotificationInboxController_markAllRead",
        "parameters": [],
        "responses": {
          "200": {
            "description": "All notifications marked as read",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "ok"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Mark all notifications as read",
        "tags": [
          "Notifications"
        ]
      }
    },
    "/patient/consultation": {
      "post": {
        "description": "Patient requests consultation with ONE SPECIFIC doctor (identified by doctorId).\n    \n**Flow:**\n1. Patient provides doctorId of the doctor they want to consult\n2. Request is added to that doctor's queue (max 5 requests, first-come-first-served)\n3. Request expires after 1 minute if doctor doesn't respond\n4. Patient can check status via GET /patient/consultation/pending\n\n**Validations:**\n- Doctor must be available (online and not busy)\n- Queue must not be full (max 5 requests per doctor)\n- Patient must have sufficient balance (minimum 3 minutes)\n- Patient cannot have duplicate pending request to same doctor\n- Patient cannot have active consultation with another doctor",
        "operationId": "PatientConsultationController_createConsultation",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateConsultationDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Consultation request created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsultationResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Doctor not available, queue full, insufficient balance, or duplicate request",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "oneOf": [
                        {
                          "type": "string",
                          "example": "Insufficient balance. Minimum ₹30 (3 minutes) required to start consultation. Current balance: ₹10"
                        },
                        {
                          "type": "string",
                          "example": "Doctor is not available. Please try another doctor."
                        },
                        {
                          "type": "string",
                          "example": "You already have a pending request to this doctor"
                        },
                        {
                          "type": "string",
                          "example": "You already have an active consultation with another doctor"
                        },
                        {
                          "type": "string",
                          "example": "Queue is full. Maximum 5 requests allowed. Please try another doctor."
                        }
                      ]
                    }
                  }
                },
                "examples": {
                  "insufficientBalance": {
                    "summary": "Patient has insufficient wallet balance",
                    "value": {
                      "statusCode": 400,
                      "message": "Insufficient balance. Minimum ₹30 (3 minutes) required to start consultation. Current balance: ₹10"
                    }
                  },
                  "doctorNotAvailable": {
                    "summary": "Doctor is offline or busy",
                    "value": {
                      "statusCode": 400,
                      "message": "Doctor is not available. Please try another doctor."
                    }
                  },
                  "duplicateRequest": {
                    "summary": "Duplicate pending request to same doctor",
                    "value": {
                      "statusCode": 400,
                      "message": "You already have a pending request to this doctor"
                    }
                  },
                  "activeConsultation": {
                    "summary": "Patient already has active consultation",
                    "value": {
                      "statusCode": 400,
                      "message": "You already have an active consultation with another doctor"
                    }
                  },
                  "queueFull": {
                    "summary": "Doctor queue is full",
                    "value": {
                      "statusCode": 400,
                      "message": "Queue is full. Maximum 5 requests allowed. Please try another doctor."
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/consultation"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a patient (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/consultation"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Patient or doctor account not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Request consultation with a specific doctor",
        "tags": [
          "Consultations"
        ]
      },
      "get": {
        "description": "Returns all consultations for this patient (past and present), ordered by creation time (newest first).\n    \n**Includes:**\n- All statuses: REQUESTED, ACTIVE, ENDED, SETTLED\n- Paginated results (default: 50 per page)\n- Billing details: ratePerMinute, billableMinutes, chargeAmount\n- **Note:** doctorEarning and platformCommission are **not** included in patient responses (internal business details)",
        "operationId": "PatientConsultationController_getConsultations",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of consultations to return (default: 50, max: 100)",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 50,
              "example": 50,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of consultations to skip (default: 0)",
            "schema": {
              "minimum": 0,
              "default": 0,
              "example": 0,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of consultations wrapped in a data property",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPatientConsultationsResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid pagination parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "limit must be a number conforming to the specified constraints"
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/consultation"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a patient (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/consultation"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get patient consultations (history)",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/patient/consultation/{id}/end": {
      "post": {
        "description": "Patient ends an active consultation. When this endpoint is called:\n    \n1. Consultation status is set to ENDED and endedAt is recorded.\n2. **Automatic settlement is triggered**:\n   - Billable minutes are calculated from acceptedAt → endedAt (rounded up). If acceptedAt is null (never accepted), charge is 0.\n   - Patient wallet is debited for the full charge amount.\n   - Doctor wallet is credited with 50% of the charge.\n   - Platform wallet is credited with 50% of the charge.\n   - Consultation status is updated to SETTLED (isSettled = true).\n\nIf automatic settlement fails (for example, wallet balance changed between acceptance and end), \nthe consultation will remain in ENDED status and the error will be logged for manual/admin follow-up.\n\n**Response:** Returns consultation details with billing info (ratePerMinute, billableMinutes, chargeAmount). \n**Note:** doctorEarning and platformCommission are **not** included in patient responses (internal business details).\n    \n**Validations:**\n- Consultation must be in ACCEPTED or ACTIVE status\n- Only the patient or doctor can end their own consultation",
        "operationId": "PatientConsultationController_endConsultation",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Consultation ID to end",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Consultation ended",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsultationResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Consultation not in valid status"
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/consultation/:id/end"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a patient (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/consultation/:id/end"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Consultation not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "End consultation (patient)",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/patient/consultation/{id}/review": {
      "post": {
        "description": "Patient submits a review (stars 1-5, optional text) for a consultation that has ended.\n**Validations:**\n- Only the patient of this consultation can submit\n- Consultation must be ENDED or SETTLED\n- One review per consultation (cannot submit twice)",
        "operationId": "PatientConsultationController_submitReview",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Consultation ID to review",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateReviewDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Review submitted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReviewResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Consultation not ended yet, or review already submitted, or invalid stars/text"
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/consultation/:id/review"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Only the patient of this consultation can submit a review, or not a patient (AUTH_FORBIDDEN)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/consultation/:id/review"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Consultation not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Submit review for consultation",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/patient/consultation/pending": {
      "get": {
        "description": "Returns all consultation requests that are currently waiting for doctor response.\n    \n**Status:**\n- REQUESTED: Waiting for doctor to accept/reject\n- Request expires after 1 minute if doctor doesn't respond\n- Expired requests are automatically cleaned up",
        "operationId": "PatientConsultationController_getPendingConsultations",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of pending consultation requests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ConsultationResponseDto"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/consultation/pending"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a patient (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/patient/consultation/pending"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get pending consultation requests",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/patient/consultation/{id}/status": {
      "get": {
        "description": "Lightweight endpoint for patients to poll the status of a single consultation.\n\n**Use this for polling instead of GET /consultation/:id:**\n- Returns only status and key timing fields (acceptedAt, startedAt, endedAt). startedAt is set when the first message is sent (either party); null until then.\n- Ensures the consultation belongs to the current patient\n\n**Typical flow:**\n1. Patient calls POST /patient/consultation to create a request\n2. Frontend stores consultation.id\n3. Frontend polls GET /patient/consultation/:id/status every few seconds\n4. When status changes from REQUESTED → ACCEPTED/ACTIVE/ENDED, UI updates accordingly",
        "operationId": "PatientConsultationController_getConsultationStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Consultation ID to check status for",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Current status of the consultation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsultationStatusDto"
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)"
          },
          "403": {
            "description": "Not a patient (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)"
          },
          "404": {
            "description": "Consultation not found for this patient (invalid ID or belongs to another user)"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get consultation status (polling)",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/doctor/consultation/queue": {
      "get": {
        "description": "Returns all pending consultation requests for this doctor, ordered by creation time (first-come-first-served).\n    \n**Queue Details:**\n- Maximum 5 requests per doctor\n- Ordered by creation time (FIFO - first request first)\n- When doctor accepts one request, all others are automatically rejected\n- Expired requests (older than 1 minute) are automatically cleaned up",
        "operationId": "DoctorConsultationController_getConsultationQueue",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of pending consultation requests (queue)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ConsultationQueueItemDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Unexpected error while loading queue"
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/consultation/queue"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a doctor (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: DOCTOR"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/consultation/queue"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Doctor account not found (rare edge case)"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get consultation queue (pending requests)",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/doctor/consultation/{id}/accept": {
      "post": {
        "description": "Doctor accepts a specific consultation request from the queue.\n    \n**What happens:**\n1. Selected consultation becomes ACTIVE immediately. Billing runs from acceptedAt (when doctor accepted) to endedAt.\n2. All other pending requests for this doctor are automatically rejected\n3. Rejected patients get status ENDED with reason \"doctor_busy\"\n4. Patient is notified (via WebSocket when implemented)\n\n**Validations:**\n- Consultation must be in REQUESTED status\n- Request must not be expired (older than 1 minute)\n- Patient must have sufficient balance (minimum 3 minutes)",
        "operationId": "DoctorConsultationController_acceptConsultation",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Consultation ID to accept",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Consultation accepted and activated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsultationResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Consultation not in REQUESTED status, expired, insufficient patient balance, or wrong doctor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "oneOf": [
                        {
                          "type": "string",
                          "example": "Only the assigned doctor can accept this consultation"
                        },
                        {
                          "type": "string",
                          "example": "Consultation must be in REQUESTED status, current: ACTIVE"
                        },
                        {
                          "type": "string",
                          "example": "Request has expired. Patient needs to initiate a new request."
                        },
                        {
                          "type": "string",
                          "example": "Insufficient balance. Minimum ₹30 (3 minutes) required to accept consultation. Current balance: ₹10"
                        }
                      ]
                    }
                  }
                },
                "examples": {
                  "wrongDoctor": {
                    "summary": "Doctor is not assigned to this consultation",
                    "value": {
                      "statusCode": 400,
                      "message": "Only the assigned doctor can accept this consultation"
                    }
                  },
                  "wrongStatus": {
                    "summary": "Consultation is not in REQUESTED status",
                    "value": {
                      "statusCode": 400,
                      "message": "Consultation must be in REQUESTED status, current: ACTIVE"
                    }
                  },
                  "expiredRequest": {
                    "summary": "Consultation request has expired",
                    "value": {
                      "statusCode": 400,
                      "message": "Request has expired. Patient needs to initiate a new request."
                    }
                  },
                  "insufficientBalance": {
                    "summary": "Patient has insufficient balance at acceptance time",
                    "value": {
                      "statusCode": 400,
                      "message": "Insufficient balance. Minimum ₹30 (3 minutes) required to accept consultation. Current balance: ₹10"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/consultation/:id/accept"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a doctor (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: DOCTOR"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/consultation/:id/accept"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Consultation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Consultation 123e4567-e89b-12d3-a456-426614174000 not found"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Accept consultation request",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/doctor/consultation/{id}/end": {
      "post": {
        "description": "Doctor ends an active consultation. When this endpoint is called:\n1. Consultation status is set to ENDED and endedAt is recorded.\n2. Automatic settlement is triggered (billable minutes from acceptedAt → endedAt; 0 if never accepted).\nUse this as the single \"End\" button: it stops consultation, chat, call, and billing.",
        "operationId": "DoctorConsultationController_endConsultation",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Consultation ID to end",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Consultation ended",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsultationResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Consultation not in valid status"
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/consultation/:id/end"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a doctor (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: DOCTOR"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/consultation/:id/end"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Consultation not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "End consultation (doctor)",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/doctor/consultation": {
      "get": {
        "description": "Returns consultations that the doctor actually participated in (accepted), ordered by creation time (newest first).\n\n**Includes:**\n- Statuses: ACTIVE, ENDED, SETTLED (only consultations that were accepted)\n- Timed-out, rejected, or never-accepted requests are excluded\n- Use GET /doctor/consultation/queue for pending incoming requests\n- Paginated results (default: 50 per page)",
        "operationId": "DoctorConsultationController_getConsultations",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of consultations to return (default: 50, max: 100)",
            "schema": {
              "minimum": 1,
              "maximum": 100,
              "default": 50,
              "example": 50,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of consultations to skip (default: 0)",
            "schema": {
              "minimum": 0,
              "default": 0,
              "example": 0,
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of consultations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ConsultationResponseDto"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid pagination parameters",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "limit must be a number conforming to the specified constraints"
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/consultation"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a doctor (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: DOCTOR"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/consultation"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get doctor consultations (history)",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/doctor/consultation/{id}/reject": {
      "post": {
        "description": "Doctor rejects a specific consultation request from the queue.\n    \n**What happens:**\n1. Selected consultation status becomes ENDED with reason \"doctor_rejected\"\n2. Other pending requests are NOT affected (queue doesn't auto-advance)\n3. Patient is notified (via WebSocket when implemented)\n4. Patient can create a new request after rejection\n\n**Validations:**\n- Consultation must be in REQUESTED status\n- Only the assigned doctor can reject their own requests",
        "operationId": "DoctorConsultationController_rejectConsultation",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Consultation ID to reject",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RejectConsultationDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Consultation rejected",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsultationResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Consultation not in REQUESTED status or not owned by doctor",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "oneOf": [
                        {
                          "type": "string",
                          "example": "Only the assigned doctor can reject this consultation"
                        },
                        {
                          "type": "string",
                          "example": "Consultation must be in REQUESTED status, current: ACTIVE"
                        }
                      ]
                    }
                  }
                },
                "examples": {
                  "wrongDoctor": {
                    "summary": "Doctor is not assigned to this consultation",
                    "value": {
                      "statusCode": 400,
                      "message": "Only the assigned doctor can reject this consultation"
                    }
                  },
                  "wrongStatus": {
                    "summary": "Consultation is not in REQUESTED status",
                    "value": {
                      "statusCode": 400,
                      "message": "Consultation must be in REQUESTED status, current: ACTIVE"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/consultation/:id/reject"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not a doctor (AUTH_FORBIDDEN) or user missing in request (AUTH_NO_USER)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: DOCTOR"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/doctor/consultation/:id/reject"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Consultation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Consultation 123e4567-e89b-12d3-a456-426614174000 not found"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Reject consultation request",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/consultation/by-booking-number/{bookingNumber}": {
      "get": {
        "description": "Returns the same consultation details as GET /consultation/:id, but looked up by human-readable booking number (e.g. BN000001).\n    \n**Access:** Patient/doctor can view only their own consultation; admin can view any.",
        "operationId": "ConsultationController_getConsultationByBookingNumber",
        "parameters": [
          {
            "name": "bookingNumber",
            "required": true,
            "in": "path",
            "description": "Booking number (e.g. BN000001)",
            "schema": {
              "example": "BN000001",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Consultation details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsultationResponseDto"
                }
              }
            }
          },
          "403": {
            "description": "Not allowed to view this consultation"
          },
          "404": {
            "description": "Consultation not found"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get consultation by booking number",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/consultation/{id}": {
      "get": {
        "description": "Returns detailed information about a specific consultation.\n    \n**Access:**\n- Patient can view their own consultations\n- Doctor can view their own consultations\n- Admin can view any consultation\n\n**Response fields:**\n- **Patient role:** Returns billing details (ratePerMinute, billableMinutes, chargeAmount) but **excludes** doctorEarning and platformCommission (internal business details).\n- **Doctor/Admin roles:** Returns all fields including doctorEarning and platformCommission.",
        "operationId": "ConsultationController_getConsultation",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Consultation ID",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Consultation details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsultationResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:id"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not allowed to view this consultation (AUTH_FORBIDDEN) or user missing (AUTH_NO_USER). Required: PATIENT, DOCTOR, or ADMIN.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: PATIENT, DOCTOR, ADMIN"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:id"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Consultation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Consultation 123e4567-e89b-12d3-a456-426614174000 not found"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get consultation details",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/consultation/{id}/settle": {
      "post": {
        "description": "Admin manually settles a consultation (atomic wallet updates).\n    \n**What happens:**\n1. Calculates billable minutes (acceptedAt → endedAt; 0 if never accepted) and charge amount\n2. If charge > 0: deducts from patient wallet, credits 50% to doctor and 50% to platform\n3. Marks consultation as SETTLED (no wallet transactions if charge is 0)\n\n**Validations:**\n- Consultation must be in ENDED status\n- Patient must have sufficient balance\n- Consultation must not already be settled",
        "operationId": "ConsultationController_settleConsultation",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "description": "Consultation ID to settle",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Consultation settled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsultationResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Consultation not in ENDED status, insufficient balance, or already settled",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "oneOf": [
                        {
                          "type": "string",
                          "example": "Consultation must be in ENDED status for settlement, current: ACTIVE"
                        },
                        {
                          "type": "string",
                          "example": "Insufficient balance. Required: ₹50, Available: ₹30. Please recharge your wallet."
                        }
                      ]
                    }
                  }
                },
                "examples": {
                  "wrongStatus": {
                    "summary": "Consultation is not in ENDED status",
                    "value": {
                      "statusCode": 400,
                      "message": "Consultation must be in ENDED status for settlement, current: ACTIVE"
                    }
                  },
                  "insufficientBalance": {
                    "summary": "Patient has insufficient balance at settlement time",
                    "value": {
                      "statusCode": 400,
                      "message": "Insufficient balance. Required: ₹50, Available: ₹30. Please recharge your wallet."
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:id/settle"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Not an admin (AUTH_FORBIDDEN). Settle is admin-only. Required roles: ADMIN.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Access denied. Required roles: ADMIN"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:id/settle"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Consultation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Consultation 123e4567-e89b-12d3-a456-426614174000 not found"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Settle consultation (admin only)",
        "tags": [
          "Consultations"
        ]
      }
    },
    "/consultation/{consultationId}/message": {
      "post": {
        "description": "Send a text, audio, or video message in an active consultation.\n    \n**Requirements:**\n- User must be a participant (patient or doctor) of the consultation\n- Consultation must be in ACCEPTED or ACTIVE status\n- Message content cannot exceed 5000 characters (or 100KB for binary content)\n- Patient must have sufficient balance (minimum 3 minutes worth)\n\n**Message Types:**\n- `TEXT`: Plain text message (default)\n- `AUDIO`: Audio message (metadata should contain file URL)\n- `VIDEO`: Video message (metadata should contain file URL)\n\n**Billing:** Sending the first message in a consultation (by either party) starts the billing clock (startedAt). Patient app often auto-sends Patient Details + greeting when opening chat.\n\n**Real-time Delivery:**\n- Message is delivered in real-time via WebSocket to other participant\n- Message is stored in database for history\n- Message content is sanitized to prevent XSS attacks\n\n**Rate Limiting:**\n- Limited to 10 messages per minute per user\n- Rate limiting is enforced both at HTTP and WebSocket level",
        "operationId": "MessagesController_sendMessage",
        "parameters": [
          {
            "name": "consultationId",
            "required": true,
            "in": "path",
            "description": "UUID of the consultation",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendMessageDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message sent successfully and delivered in real-time",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request: Consultation not active, invalid message content, insufficient balance",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:consultationId/message"
                    }
                  },
                  "required": [
                    "code",
                    "message",
                    "statusCode"
                  ]
                },
                "examples": {
                  "Consultation Not Active": {
                    "summary": "Consultation not in active state",
                    "value": {
                      "code": "CONSULTATION_NOT_ACTIVE",
                      "message": "Cannot send messages. Consultation status is PENDING. Messages can only be sent when consultation is ACCEPTED or ACTIVE.",
                      "statusCode": 400,
                      "path": "/api/v1/consultation/:consultationId/message"
                    }
                  },
                  "Message Too Large": {
                    "summary": "Message size exceeds limit",
                    "value": {
                      "code": "MESSAGE_TOO_LARGE",
                      "message": "Message size exceeds 100KB limit. Current size: 102.34KB",
                      "statusCode": 400,
                      "path": "/api/v1/consultation/:consultationId/message"
                    }
                  },
                  "Invalid Message Type": {
                    "summary": "Invalid message type provided",
                    "value": {
                      "code": "INVALID_MESSAGE_TYPE",
                      "message": "Invalid message type. Must be one of: TEXT, AUDIO, VIDEO",
                      "statusCode": 400,
                      "path": "/api/v1/consultation/:consultationId/message"
                    }
                  },
                  "Insufficient Balance": {
                    "summary": "Patient has insufficient balance",
                    "value": {
                      "code": "INSUFFICIENT_BALANCE",
                      "message": "Insufficient balance. Minimum ₹30 (3 minutes) required to send messages. Current balance: ₹15",
                      "statusCode": 400,
                      "path": "/api/v1/consultation/:consultationId/message"
                    }
                  },
                  "Balance Zero": {
                    "summary": "Patient balance is zero, consultation ended",
                    "value": {
                      "code": "BALANCE_ZERO",
                      "message": "Patient balance is zero. Consultation has been ended.",
                      "statusCode": 400,
                      "path": "/api/v1/consultation/:consultationId/message"
                    }
                  },
                  "Validation Error": {
                    "summary": "Request body validation failed",
                    "value": {
                      "statusCode": 400,
                      "message": [
                        "content should not be empty",
                        "content must be a string"
                      ],
                      "path": "/api/v1/consultation/:consultationId/message"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:consultationId/message"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "MESSAGE_FORBIDDEN: User is not a participant of this consultation. AUTH_FORBIDDEN / AUTH_NO_USER: Wrong role (requires PATIENT or DOCTOR).",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "MESSAGE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Only consultation participants can send messages in this consultation"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:consultationId/message"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Consultation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Consultation 123e4567-e89b-12d3-a456-426614174000 not found"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:consultationId/message"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Send a message in a consultation",
        "tags": [
          "Messages"
        ]
      }
    },
    "/consultation/{consultationId}/messages": {
      "get": {
        "description": "Retrieve messages in a consultation with pagination. Default: newest first (order=desc).\n    \n**Requirements:**\n- User must be a participant (patient or doctor) of the consultation, or an admin\n- Messages are paginated (default: 100 per page, max: 500)\n\n**Recommended frontend flow (recent first):**\n- Initial load: `limit=50&offset=0&order=desc` → get newest 50 messages. Show in chat (oldest of this page at top, newest at bottom).\n- \"Load more\" (scroll up): `limit=50&offset=50&order=desc` → get next 50 older messages. Prepend to list.\n- Use `total` in response to show \"X messages\" or disable \"load more\" when `data.length + offset >= total`.\n\n**Pagination:**\n- `limit`: Number of messages (default: 100, min: 1, max: 500)\n- `offset`: Number to skip (default: 0). With order=desc, offset=0 = newest; offset=50 = next 50 older.\n- `order`: `desc` (newest first, default) or `asc` (oldest first)\n\n**Response:** `{ data: Message[], total: number }` — `total` is total message count for this consultation.\n\n**Access Control:**\n- Consultation participants (patient/doctor) and admins can view messages",
        "operationId": "MessagesController_getMessages",
        "parameters": [
          {
            "name": "consultationId",
            "required": true,
            "in": "path",
            "description": "UUID of the consultation",
            "schema": {
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "type": "string"
            }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Maximum number of messages to return (default: 100, min: 1, max: 500)",
            "schema": {
              "minimum": 1,
              "maximum": 500,
              "default": 100,
              "example": 50,
              "type": "number"
            }
          },
          {
            "name": "offset",
            "required": false,
            "in": "query",
            "description": "Number of messages to skip (default: 0). With order=desc, increase for \"load more\" older.",
            "schema": {
              "minimum": 0,
              "default": 0,
              "example": 0,
              "type": "number"
            }
          },
          {
            "name": "order",
            "required": false,
            "in": "query",
            "description": "Order by createdAt: desc = newest first (default), asc = oldest first",
            "schema": {
              "example": "desc",
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Messages and total count. Shape: { data: Message[], total: number }",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/MessageResponseDto"
                      }
                    },
                    "total": {
                      "type": "number",
                      "description": "Total message count for this consultation"
                    }
                  },
                  "required": [
                    "data",
                    "total"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Invalid pagination parameters (limit, offset, order)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 400
                    },
                    "message": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": [
                        "limit must be at least 1",
                        "order must be asc or desc"
                      ]
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:consultationId/messages"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid token (AUTH_TOKEN_MISSING, AUTH_TOKEN_INVALID, AUTH_TOKEN_EXPIRED, AUTH_SESSION_INVALID)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "AUTH_TOKEN_INVALID"
                    },
                    "message": {
                      "type": "string",
                      "example": "Invalid access token."
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 401
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:consultationId/messages"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "MESSAGE_FORBIDDEN: User is not a participant or admin. AUTH_FORBIDDEN / AUTH_NO_USER: Wrong role (requires PATIENT, DOCTOR, or ADMIN).",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "MESSAGE_FORBIDDEN"
                    },
                    "message": {
                      "type": "string",
                      "example": "Only consultation participants or admins can view messages in this consultation"
                    },
                    "statusCode": {
                      "type": "number",
                      "example": 403
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:consultationId/messages"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Consultation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "statusCode": {
                      "type": "number",
                      "example": 404
                    },
                    "message": {
                      "type": "string",
                      "example": "Consultation 123e4567-e89b-12d3-a456-426614174000 not found"
                    },
                    "path": {
                      "type": "string",
                      "example": "/api/v1/consultation/:consultationId/messages"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "summary": "Get message history for a consultation",
        "tags": [
          "Messages"
        ]
      }
    },
    "/consultation/{consultationId}/call/token": {
      "post": {
        "description": "Get Zegocloud authentication token for joining video/audio call.\n    \n**Returns:**\n- `token`: Zegocloud authentication token (base64 encoded)\n- `roomId`: Unique room ID for this consultation\n- `appId`: Zegocloud App ID\n- `expireIn`: Token expiration time in seconds\n\n**Security:**\n- Only consultation participants (patient or doctor) can get tokens\n- Consultation must be ACCEPTED or ACTIVE\n- Token is tied to specific consultation room\n\n**Flutter Integration:**\n1. Call this endpoint to get token\n2. Use token + roomId + appId with Zegocloud Flutter SDK\n3. Join room using the provided credentials",
        "operationId": "CallsController_getCallToken",
        "parameters": [
          {
            "name": "consultationId",
            "required": true,
            "in": "path",
            "description": "UUID of the consultation",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Call token generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetCallTokenResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Consultation not found, invalid state, or Zegocloud not configured"
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "403": {
            "description": "Forbidden - User is not a consultation participant"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get Zegocloud call token",
        "tags": [
          "Calls"
        ]
      }
    },
    "/consultation/{consultationId}/call/start": {
      "post": {
        "description": "Optional: mark that both participants have joined the video/audio call. Consultation is already ACTIVE when doctor accepts (billing = connected time). Use for analytics or \"in call\" UI. Idempotent when already ACTIVE.",
        "operationId": "CallsController_startCall",
        "parameters": [
          {
            "name": "consultationId",
            "required": true,
            "in": "path",
            "description": "UUID of the consultation",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StartCallDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Call started successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Call started successfully"
                    },
                    "consultationId": {
                      "type": "string",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "status": {
                      "type": "string",
                      "example": "ACTIVE"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Consultation not found or invalid state"
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "403": {
            "description": "Forbidden - User is not a consultation participant"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Mark call as started (optional)",
        "tags": [
          "Calls"
        ]
      }
    },
    "/consultation/{consultationId}/call/end": {
      "post": {
        "description": "End the call and the consultation. Delegates to the same \"end consultation\" logic as the patient/doctor \"End\" button: consultation → ENDED, billing stops, settlement runs.\nUse when the user leaves the call screen; same effect as POST patient/consultation/:id/end or doctor/consultation/:id/end. Idempotent if already ended.",
        "operationId": "CallsController_endCall",
        "parameters": [
          {
            "name": "consultationId",
            "required": true,
            "in": "path",
            "description": "UUID of the consultation",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Call ended successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Call ended successfully"
                    },
                    "consultationId": {
                      "type": "string",
                      "example": "123e4567-e89b-12d3-a456-426614174000"
                    },
                    "status": {
                      "type": "string",
                      "example": "ENDED"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Consultation not found or already ended"
          },
          "401": {
            "description": "Unauthorized - Invalid or missing JWT token"
          },
          "403": {
            "description": "Forbidden - User is not a consultation participant"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "End call (ends consultation)",
        "tags": [
          "Calls"
        ]
      }
    }
  },
  "info": {
    "title": "ChatQure API",
    "description": "Backend API for ChatQure platform. Complete API documentation for Patient, Doctor, and Admin endpoints.",
    "version": "1.0.0",
    "contact": {}
  },
  "tags": [],
  "servers": [
    {
      "url": "http://localhost:3000/api/v1",
      "description": "Development Server"
    },
    {
      "url": "https://api.chatqure.com/api/v1",
      "description": "Production Server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http",
        "description": "JWT access token. Get token from /auth/otp/verify (for patients/doctors) or /admin/auth/login (for admins)"
      }
    },
    "schemas": {
      "SendOtpDto": {
        "type": "object",
        "properties": {
          "phoneNumber": {
            "type": "string",
            "description": "Phone number in E.164 format (e.g. +919876543210, +14155551234)",
            "example": "+919876543210"
          },
          "role": {
            "type": "string",
            "description": "User role determined by the app (PATIENT for Patient App, DOCTOR for Doctor App). This role is stored with the OTP session and used during account creation.",
            "enum": [
              "PATIENT",
              "DOCTOR"
            ],
            "example": "PATIENT"
          },
          "channel": {
            "type": "string",
            "description": "Channel to send OTP (defaults to SMS)",
            "enum": [
              "SMS",
              "WHATSAPP"
            ]
          }
        },
        "required": [
          "phoneNumber",
          "role"
        ]
      },
      "DeviceInfoDto": {
        "type": "object",
        "properties": {
          "os": {
            "type": "string",
            "description": "Operating system",
            "example": "Android"
          },
          "osVersion": {
            "type": "string",
            "description": "Operating system version",
            "example": "14"
          },
          "appVersion": {
            "type": "string",
            "description": "App version",
            "example": "1.0.3"
          },
          "deviceModel": {
            "type": "string",
            "description": "Device model",
            "example": "Pixel 7"
          },
          "browser": {
            "type": "string",
            "description": "Browser name (for web clients)",
            "example": "Chrome"
          }
        }
      },
      "VerifyOtpDto": {
        "type": "object",
        "properties": {
          "phoneNumber": {
            "type": "string",
            "description": "Phone number in E.164 format (e.g. +919876543210, +14155551234)",
            "example": "+919876543210"
          },
          "otp": {
            "type": "string",
            "description": "6-digit OTP received via SMS/WhatsApp",
            "example": "482910"
          },
          "role": {
            "type": "string",
            "description": "Role to log in as (optional). If provided, must match the role sent during OTP request. If not provided, uses the role stored during OTP send.",
            "enum": [
              "PATIENT",
              "DOCTOR"
            ],
            "example": "PATIENT"
          },
          "deviceInfo": {
            "description": "Optional device information for audit and security",
            "allOf": [
              {
                "$ref": "#/components/schemas/DeviceInfoDto"
              }
            ]
          }
        },
        "required": [
          "phoneNumber",
          "otp"
        ]
      },
      "VerifyOtpUserDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "User's account ID (UUID)",
            "example": "b3b6b4c0-1234-4f1a-9abc-1234567890ab"
          },
          "phoneNumber": {
            "type": "string",
            "description": "User's phone number in E.164 format",
            "example": "+919876543210"
          },
          "role": {
            "type": "string",
            "description": "User's role",
            "enum": [
              "PATIENT",
              "DOCTOR",
              "ADMIN"
            ],
            "example": "PATIENT"
          },
          "status": {
            "type": "string",
            "description": "User's account status",
            "enum": [
              "ACTIVE",
              "PENDING_DELETION",
              "DELETED",
              "SUSPENDED"
            ],
            "example": "ACTIVE"
          },
          "isNewUser": {
            "type": "boolean",
            "description": "Whether this account was created as part of this OTP verification",
            "example": true
          }
        },
        "required": [
          "id",
          "phoneNumber",
          "role",
          "status",
          "isNewUser"
        ]
      },
      "VerifyOtpResponseDto": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "JWT access token for authenticated API calls",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          },
          "refreshToken": {
            "type": "string",
            "description": "Refresh token to obtain new access tokens. Single-use only (rotation).",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.r3Zy..."
          },
          "user": {
            "description": "Authenticated user information",
            "allOf": [
              {
                "$ref": "#/components/schemas/VerifyOtpUserDto"
              }
            ]
          }
        },
        "required": [
          "accessToken",
          "refreshToken",
          "user"
        ]
      },
      "RefreshTokenDto": {
        "type": "object",
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "Refresh token issued at login or previous refresh operation",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        },
        "required": [
          "refreshToken"
        ]
      },
      "GetCurrentUserResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "User's account ID (UUID)",
            "example": "b3b6b4c0-1234-4f1a-9abc-1234567890ab"
          },
          "phoneNumber": {
            "type": "string",
            "description": "User's phone number in E.164 format",
            "example": "+919876543210"
          },
          "role": {
            "type": "string",
            "description": "User's role",
            "enum": [
              "PATIENT",
              "DOCTOR",
              "ADMIN"
            ],
            "example": "PATIENT"
          },
          "status": {
            "type": "string",
            "description": "User's account status",
            "enum": [
              "ACTIVE",
              "PENDING_DELETION",
              "DELETED",
              "SUSPENDED"
            ],
            "example": "ACTIVE"
          },
          "lastLoginAt": {
            "type": "object",
            "description": "Last login timestamp (ISO 8601)",
            "example": "2026-01-14T10:15:30.000Z",
            "nullable": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Account creation timestamp (ISO 8601)",
            "example": "2026-01-10T09:00:00.000Z"
          },
          "profile": {
            "type": "object",
            "description": "Polymorphic profile based on role: Patient, Doctor (with specialization), or Admin. Can be null if profile not created yet.",
            "nullable": true
          },
          "session": {
            "type": "object",
            "description": "Current session information for this user, or null",
            "nullable": true
          }
        },
        "required": [
          "id",
          "phoneNumber",
          "role",
          "status",
          "lastLoginAt",
          "createdAt",
          "profile",
          "session"
        ]
      },
      "SymptomDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Symptom ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "name": {
            "type": "string",
            "description": "Symptom display name",
            "example": "Headache"
          }
        },
        "required": [
          "id",
          "name"
        ]
      },
      "SymptomCategoryDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Symptom category ID",
            "example": "cat-uuid-1"
          },
          "name": {
            "type": "string",
            "description": "Category name (e.g. Most Common Symptoms)",
            "example": "Most Common Symptoms"
          },
          "displayOrder": {
            "type": "number",
            "description": "Order of the category in the UI (lower appears first)",
            "example": 1
          },
          "symptoms": {
            "description": "Symptoms belonging to this category",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SymptomDto"
            }
          }
        },
        "required": [
          "id",
          "name",
          "displayOrder",
          "symptoms"
        ]
      },
      "FullSymptomDataDto": {
        "type": "object",
        "properties": {
          "symptoms": {
            "description": "Flat list of all active symptoms (for search)",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SymptomDto"
            }
          },
          "categories": {
            "description": "Symptom categories with their symptoms (for sectioned UI)",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SymptomCategoryDto"
            }
          }
        },
        "required": [
          "symptoms",
          "categories"
        ]
      },
      "GetFullSymptomsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Full symptom data payload",
            "allOf": [
              {
                "$ref": "#/components/schemas/FullSymptomDataDto"
              }
            ]
          }
        },
        "required": [
          "data"
        ]
      },
      "ReviewResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Review ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "consultationId": {
            "type": "string",
            "description": "Consultation ID this review belongs to",
            "example": "123e4567-e89b-12d3-a456-426614174001"
          },
          "patientId": {
            "type": "string",
            "description": "Patient (reviewer) account ID",
            "example": "123e4567-e89b-12d3-a456-426614174002"
          },
          "patientName": {
            "type": "object",
            "description": "Patient (reviewer) display name for doctor profile reviews",
            "example": "John K.",
            "nullable": true
          },
          "doctorId": {
            "type": "string",
            "description": "Doctor (reviewed) account ID",
            "example": "123e4567-e89b-12d3-a456-426614174003"
          },
          "stars": {
            "type": "number",
            "description": "Star rating (1-5)",
            "example": 5
          },
          "text": {
            "type": "string",
            "description": "Optional written review",
            "example": "Very helpful and clear advice."
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "When the review was submitted",
            "example": "2026-01-22T10:00:00Z"
          }
        },
        "required": [
          "id",
          "consultationId",
          "patientId",
          "doctorId",
          "stars",
          "createdAt"
        ]
      },
      "ReviewListResponseDto": {
        "type": "object",
        "properties": {
          "reviews": {
            "description": "List of reviews",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ReviewResponseDto"
            }
          },
          "total": {
            "type": "number",
            "description": "Total count (when paginated)",
            "example": 42
          },
          "averageStars": {
            "type": "number",
            "description": "Average star rating (for doctor profile)",
            "example": 4.5
          }
        },
        "required": [
          "reviews"
        ]
      },
      "PatientProfileDataDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "object",
            "description": "Patient's full name",
            "example": "Rahul Sharma",
            "nullable": true
          },
          "profilePictureUrl": {
            "type": "object",
            "description": "Profile picture URL",
            "example": "https://example.com/photo.jpg",
            "nullable": true
          },
          "dateOfBirth": {
            "type": "object",
            "description": "Date of birth (DD-MM-YYYY)",
            "example": "20-05-1995",
            "nullable": true
          },
          "ageYears": {
            "type": "object",
            "description": "Age in years (computed from dateOfBirth as of today)",
            "example": 29,
            "nullable": true
          },
          "gender": {
            "type": "string",
            "description": "Gender",
            "enum": [
              "MALE",
              "FEMALE",
              "OTHER"
            ],
            "nullable": true
          },
          "height": {
            "type": "object",
            "description": "Height in cm",
            "example": 175,
            "nullable": true
          },
          "weight": {
            "type": "object",
            "description": "Weight in kg",
            "example": 70,
            "nullable": true
          },
          "bloodGroup": {
            "type": "string",
            "description": "Blood group",
            "enum": [
              "A_POSITIVE",
              "A_NEGATIVE",
              "B_POSITIVE",
              "B_NEGATIVE",
              "O_POSITIVE",
              "O_NEGATIVE",
              "AB_POSITIVE",
              "AB_NEGATIVE"
            ],
            "nullable": true
          },
          "medicalConditions": {
            "description": "Medical conditions (from reference data). Array of { id, name }. Empty if none.",
            "example": [],
            "items": {
              "type": "array",
              "items": {
                "type": "a"
              }
            },
            "type": "array"
          },
          "languages": {
            "description": "Spoken languages. Array of { id, code, name }. Same ids as GET /api/v1/shared/languages.",
            "example": [
              {
                "id": "444de466-2731-48b7-958d-d31e7aa63dd9",
                "code": "as",
                "name": "Assamese"
              }
            ],
            "items": {
              "type": "array",
              "items": {
                "type": "a"
              }
            },
            "type": "array"
          },
          "favoriteDoctors": {
            "description": "Favorite doctors. Array of { doctorId, name }. Empty if none. For full card (languages, profilePictureUrl, etc.) use GET /api/v1/patient/favorites. Manage via POST/DELETE /api/v1/patient/favorites/:doctorId.",
            "example": [],
            "items": {
              "type": "array",
              "items": {
                "type": "a"
              }
            },
            "type": "array"
          }
        },
        "required": [
          "medicalConditions",
          "languages",
          "favoriteDoctors"
        ]
      },
      "GetPatientProfileResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Patient profile data, or null if profile does not exist yet",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/PatientProfileDataDto"
              }
            ]
          }
        },
        "required": [
          "data"
        ]
      },
      "UpdatePatientProfileDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Patient's full name",
            "example": "Rahul Sharma",
            "maxLength": 255
          },
          "profilePictureUrl": {
            "type": "string",
            "description": "Profile picture URL",
            "example": "https://example.com/photo.jpg",
            "maxLength": 500
          },
          "dateOfBirth": {
            "type": "string",
            "description": "Date of birth. Accepted: DD-MM-YYYY or ISO 8601. Stored and returned as DD-MM-YYYY in profile.",
            "example": "20-05-1995"
          },
          "gender": {
            "type": "string",
            "description": "Gender",
            "enum": [
              "MALE",
              "FEMALE",
              "OTHER"
            ]
          },
          "height": {
            "type": "number",
            "description": "Height in cm",
            "example": 175,
            "minimum": 0,
            "maximum": 300
          },
          "weight": {
            "type": "number",
            "description": "Weight in kg",
            "example": 70,
            "minimum": 0,
            "maximum": 500
          },
          "bloodGroup": {
            "type": "string",
            "description": "Blood group",
            "enum": [
              "A_POSITIVE",
              "A_NEGATIVE",
              "B_POSITIVE",
              "B_NEGATIVE",
              "O_POSITIVE",
              "O_NEGATIVE",
              "AB_POSITIVE",
              "AB_NEGATIVE"
            ]
          },
          "languageIds": {
            "description": "Spoken language IDs (from GET /api/v1/shared/languages).",
            "example": [
              "550e8400-e29b-41d4-a716-446655440000"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "medicalConditionIds": {
            "description": "Medical condition IDs (from reference data). Replaces existing conditions.",
            "example": [
              "550e8400-e29b-41d4-a716-446655440001"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "UpdatePatientProfileResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message",
            "example": "Profile updated successfully"
          },
          "data": {
            "description": "Updated patient profile (same shape as GET profile data)",
            "allOf": [
              {
                "$ref": "#/components/schemas/PatientProfileDataDto"
              }
            ]
          }
        },
        "required": [
          "message",
          "data"
        ]
      },
      "PatientDoctorCardDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Doctor account ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "name": {
            "type": "string",
            "description": "Doctor name",
            "example": "Dr. Rajesh Sharma"
          },
          "specialization": {
            "type": "object",
            "description": "Doctor specialization (null when not set)",
            "nullable": true,
            "example": {
              "id": "3c6f0f3f-1e8e-4e8b-9d2d-1b7a3f2e9a10",
              "name": "Cardiology"
            }
          },
          "experience": {
            "type": "object",
            "description": "Years of experience",
            "nullable": true,
            "example": 10
          },
          "medicalApproach": {
            "type": "object",
            "description": "System of medicine (e.g. ALLOPATHY)",
            "nullable": true,
            "example": "ALLOPATHY"
          },
          "languages": {
            "description": "Languages spoken (for card display, e.g. English, Hindi, Tamil)",
            "example": [
              "English",
              "Hindi",
              "Tamil"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "profilePictureUrl": {
            "type": "object",
            "description": "Profile picture URL for card avatar",
            "nullable": true,
            "example": "https://example.com/photo1.jpg"
          },
          "ratingAvg": {
            "type": "object",
            "description": "Average rating (stringified decimal)",
            "nullable": true,
            "example": "4.50"
          },
          "ratingCount": {
            "type": "number",
            "description": "Total number of ratings/reviews",
            "example": 356
          },
          "ratePerMinute": {
            "type": "object",
            "description": "Consultation fee per minute (INR)",
            "nullable": true,
            "example": "15.00"
          },
          "isAvailable": {
            "type": "boolean",
            "description": "Whether doctor is currently available (online/ready to accept consultation)",
            "example": true
          },
          "isFavorite": {
            "type": "boolean",
            "description": "Whether this doctor is in the patient’s favorites list",
            "example": false
          }
        },
        "required": [
          "id",
          "name",
          "languages",
          "ratingCount",
          "isAvailable",
          "isFavorite"
        ]
      },
      "PatientDoctorsPaginationDto": {
        "type": "object",
        "properties": {
          "page": {
            "type": "number",
            "description": "Current page number",
            "example": 1
          },
          "limit": {
            "type": "number",
            "description": "Page size (limit)",
            "example": 20
          },
          "total": {
            "type": "number",
            "description": "Total number of doctors matching filters",
            "example": 150
          },
          "totalPages": {
            "type": "number",
            "description": "Total number of pages",
            "example": 8
          }
        },
        "required": [
          "page",
          "limit",
          "total",
          "totalPages"
        ]
      },
      "GetPatientDoctorsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "List of doctors",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PatientDoctorCardDto"
            }
          },
          "pagination": {
            "description": "Pagination metadata",
            "allOf": [
              {
                "$ref": "#/components/schemas/PatientDoctorsPaginationDto"
              }
            ]
          }
        },
        "required": [
          "data",
          "pagination"
        ]
      },
      "PatientDoctorSpecializationDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Specialization ID (UUID)",
            "example": "3c6f0f3f-1e8e-4e8b-9d2d-1b7a3f2e9a10"
          },
          "name": {
            "type": "string",
            "description": "Specialization name",
            "example": "Cardiology"
          }
        },
        "required": [
          "id",
          "name"
        ]
      },
      "PatientDoctorLanguageDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Language ID",
            "example": "7b4f9d1a-3c2e-4a1d-9b6e-2d1c0a9f8e77"
          },
          "name": {
            "type": "string",
            "description": "Language name",
            "example": "Hindi"
          },
          "code": {
            "type": "string",
            "description": "Language code",
            "example": "hi"
          }
        },
        "required": [
          "id",
          "name",
          "code"
        ]
      },
      "PatientDoctorDetailsDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Doctor account ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "name": {
            "type": "string",
            "description": "Doctor name",
            "example": "Dr. Rajesh Sharma"
          },
          "specialization": {
            "description": "Specialization: { id, name }. Null when not set.",
            "nullable": true,
            "example": {
              "id": "3c6f0f3f-1e8e-4e8b-9d2d-1b7a3f2e9a10",
              "name": "Cardiology"
            },
            "allOf": [
              {
                "$ref": "#/components/schemas/PatientDoctorSpecializationDto"
              }
            ]
          },
          "experience": {
            "type": "object",
            "description": "Years of experience",
            "nullable": true,
            "example": 8
          },
          "ratingAvg": {
            "type": "object",
            "description": "Average rating (string, e.g. \"4.60\")",
            "nullable": true,
            "example": "4.60"
          },
          "ratingCount": {
            "type": "number",
            "description": "Total number of ratings/reviews",
            "example": 32
          },
          "totalPatients": {
            "type": "number",
            "description": "Total number of unique patients the doctor has consulted (only consultations that started; excludes rejected/timeout)",
            "example": 1385
          },
          "ratePerMinute": {
            "type": "object",
            "description": "Consultation fee per minute INR (string, e.g. \"25.00\")",
            "nullable": true,
            "example": "25.00"
          },
          "currentWorkplace": {
            "type": "object",
            "description": "Current workplace / hospital",
            "nullable": true,
            "example": "Medanta"
          },
          "profilePictureUrl": {
            "type": "object",
            "description": "Profile picture URL for header",
            "nullable": true,
            "example": "https://example.com/doctor.jpg"
          },
          "languages": {
            "description": "Languages spoken. Each: { id, name, code }",
            "example": [
              {
                "id": "7b4f9d1a-3c2e-4a1d-9b6e-2d1c0a9f8e77",
                "name": "Hindi",
                "code": "hi"
              },
              {
                "id": "e8a1c4e2-5d3f-4b2a-9e7d-3f6c8a1b0e9d",
                "name": "English",
                "code": "en"
              }
            ],
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PatientDoctorLanguageDto"
            }
          },
          "medicalApproach": {
            "type": "object",
            "description": "System of medicine",
            "nullable": true,
            "example": "ALLOPATHY"
          },
          "about": {
            "type": "object",
            "description": "Short bio / about (plain text string). Null when not set.",
            "nullable": true,
            "example": "MBBS, MD. 10+ years experience in cardiology. Former resident at AIIMS Delhi."
          },
          "photoUrls": {
            "description": "Gallery photo URLs (1–3). Array of strings.",
            "example": [
              "https://example.com/photo1.jpg",
              "https://example.com/photo2.jpg"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "isAvailable": {
            "type": "boolean",
            "description": "Whether doctor is available",
            "example": true
          },
          "isFavorite": {
            "type": "boolean",
            "description": "Whether favorited by patient",
            "example": false
          }
        },
        "required": [
          "id",
          "name",
          "ratingCount",
          "totalPatients",
          "languages",
          "photoUrls",
          "isAvailable",
          "isFavorite"
        ]
      },
      "GetPatientDoctorDetailsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Doctor details or null if not available",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/PatientDoctorDetailsDto"
              }
            ]
          }
        },
        "required": [
          "data"
        ]
      },
      "GetPatientFavoriteDoctorsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "List of favorite doctors",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PatientDoctorCardDto"
            }
          }
        },
        "required": [
          "data"
        ]
      },
      "PatientDoctorBySymptomItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Doctor account ID"
          },
          "name": {
            "type": "string",
            "description": "Doctor name",
            "example": "Dr. Rajesh Sharma"
          },
          "specialization": {
            "type": "object",
            "description": "Specialization",
            "nullable": true
          },
          "experience": {
            "type": "object",
            "description": "Years of experience",
            "nullable": true
          },
          "medicalApproach": {
            "type": "object",
            "description": "System of medicine",
            "nullable": true,
            "example": "ALLOPATHY"
          },
          "about": {
            "type": "object",
            "description": "Short bio",
            "nullable": true
          },
          "photoUrls": {
            "description": "Photo URLs",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "ratingAvg": {
            "type": "object",
            "description": "Average rating (string)",
            "nullable": true
          },
          "ratingCount": {
            "type": "number",
            "description": "Total ratings"
          },
          "ratePerMinute": {
            "type": "object",
            "description": "Rate per minute INR (string)",
            "nullable": true
          },
          "isAvailable": {
            "type": "boolean",
            "description": "Whether available"
          }
        },
        "required": [
          "id",
          "name",
          "photoUrls",
          "ratingCount",
          "isAvailable"
        ]
      },
      "GetPatientDoctorsBySymptomResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Doctors linked to the symptom",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PatientDoctorBySymptomItemDto"
            }
          },
          "pagination": {
            "description": "Pagination",
            "allOf": [
              {
                "$ref": "#/components/schemas/PatientDoctorsPaginationDto"
              }
            ]
          }
        },
        "required": [
          "data",
          "pagination"
        ]
      },
      "GetAvailabilityResponseDto": {
        "type": "object",
        "properties": {
          "isAvailable": {
            "type": "boolean",
            "description": "Whether the doctor is currently available (online)",
            "example": true
          }
        },
        "required": [
          "isAvailable"
        ]
      },
      "SetAvailabilityDto": {
        "type": "object",
        "properties": {
          "isAvailable": {
            "type": "boolean",
            "description": "Doctor availability status",
            "example": true
          }
        },
        "required": [
          "isAvailable"
        ]
      },
      "PresignedUploadDto": {
        "type": "object",
        "properties": {
          "purpose": {
            "type": "string",
            "description": "Upload purpose (determines S3 key prefix and allowed content types)",
            "enum": [
              "patient_profile",
              "doctor_profile",
              "doctor_service_photo",
              "kyc_aadhaar_front",
              "kyc_aadhaar_back",
              "kyc_pan",
              "kyc_education",
              "medical_approach_icon",
              "specialization_icon"
            ],
            "example": "doctor_profile"
          },
          "filename": {
            "type": "string",
            "description": "Original filename (used to derive extension)",
            "example": "photo.jpg",
            "maxLength": 200
          },
          "contentType": {
            "type": "string",
            "description": "Content-Type of the file (must be allowed for the purpose)",
            "example": "image/jpeg"
          }
        },
        "required": [
          "purpose",
          "filename",
          "contentType"
        ]
      },
      "PresignedUploadResponseDto": {
        "type": "object",
        "properties": {
          "uploadUrl": {
            "type": "string",
            "description": "Presigned PUT URL; frontend uploads file here (e.g. PUT with file bytes)"
          },
          "key": {
            "type": "string",
            "description": "S3 object key"
          },
          "publicUrl": {
            "type": "string",
            "description": "URL to store in profile/KYC APIs after upload. For public content (profile, service photos) this URL is directly usable. For private content (KYC documents) this is a reference only—use GET /api/v1/upload/presigned-get?url={publicUrl} to get a temporary access URL."
          }
        },
        "required": [
          "uploadUrl",
          "key",
          "publicUrl"
        ]
      },
      "PresignedGetResponseDto": {
        "type": "object",
        "properties": {
          "url": {
            "type": "object",
            "description": "Presigned GET URL (for private content) or original URL (for public content). Use this URL to fetch/display the file. Null if the given url was invalid or not from our bucket.",
            "example": "https://bucket.s3.region.amazonaws.com/private/uploads/kyc/...?X-Amz-Signature=...",
            "nullable": true
          }
        },
        "required": [
          "url"
        ]
      },
      "OnboardDoctorDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Doctor's full name",
            "example": "Dr. Rajesh Sharma",
            "minLength": 2,
            "maxLength": 255
          },
          "email": {
            "type": "string",
            "description": "Doctor's email address (must be unique)",
            "example": "dr.sharma@example.com"
          },
          "password": {
            "type": "string",
            "description": "Password for email+password login (min 8 characters)",
            "example": "SecurePass123",
            "minLength": 8
          },
          "profilePictureUrl": {
            "type": "string",
            "description": "Profile picture URL (e.g. from S3 presigned upload)",
            "example": "https://bucket.s3.region.amazonaws.com/private/uploads/kyc/accountId/uuid.jpg",
            "maxLength": 500
          }
        },
        "required": [
          "name",
          "email",
          "password"
        ]
      },
      "SubmitKycDto": {
        "type": "object",
        "properties": {
          "gender": {
            "type": "string",
            "description": "Doctor gender",
            "enum": [
              "MALE",
              "FEMALE",
              "OTHER"
            ],
            "example": "MALE"
          },
          "specializationId": {
            "type": "string",
            "description": "Specialization ID (UUID from master list)",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "experience": {
            "type": "number",
            "description": "Years of experience",
            "example": 10,
            "minimum": 0,
            "maximum": 100
          },
          "medicalApproachId": {
            "type": "string",
            "description": "Medical approach ID (UUID from GET /shared/medical-approaches). Examples: Allopathy, Ayurveda, Homeopathy, etc.",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "languageIds": {
            "description": "Language IDs (UUIDs from shared/languages) - at least one",
            "example": [
              "550e8400-e89b-12d3-a456-426614174000"
            ],
            "minItems": 1,
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "registrationNumber": {
            "type": "string",
            "description": "Medical registration number",
            "example": "MCI-12345"
          },
          "registrationYear": {
            "type": "number",
            "description": "Year of medical registration",
            "example": 2010,
            "minimum": 1900,
            "maximum": 2100
          },
          "medicalCouncilId": {
            "type": "string",
            "description": "Medical council ID (UUID from master list). Either medicalCouncilId or medicalCouncilOther required.",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "medicalCouncilOther": {
            "type": "string",
            "description": "Medical council name when \"Other\" or custom. Either medicalCouncilId or medicalCouncilOther required.",
            "example": "Medical Council of India"
          },
          "aadhaarNumber": {
            "type": "string",
            "description": "Aadhaar number (12 digits). Optional.",
            "example": "123456789012",
            "maxLength": 12
          },
          "aadhaarFrontUrl": {
            "type": "string",
            "description": "S3 URL for Aadhaar front image/document",
            "example": "https://bucket.s3.region.amazonaws.com/private/uploads/kyc/accountId/uuid.jpg"
          },
          "aadhaarBackUrl": {
            "type": "string",
            "description": "S3 URL for Aadhaar back image/document",
            "example": "https://bucket.s3.region.amazonaws.com/private/uploads/kyc/accountId/uuid.jpg"
          },
          "panNumber": {
            "type": "string",
            "description": "PAN number (10 characters). Optional.",
            "example": "ABCDE1234F",
            "maxLength": 10
          },
          "panCardUrl": {
            "type": "string",
            "description": "S3 URL for PAN card image/document",
            "example": "https://bucket.s3.region.amazonaws.com/private/uploads/kyc/accountId/uuid.jpg"
          },
          "educationCertUrl": {
            "type": "string",
            "description": "S3 URL for education certificate (image or PDF)",
            "example": "https://bucket.s3.region.amazonaws.com/private/uploads/kyc/accountId/uuid.pdf"
          }
        },
        "required": [
          "gender",
          "specializationId",
          "experience",
          "medicalApproachId",
          "languageIds",
          "registrationNumber",
          "registrationYear",
          "aadhaarFrontUrl",
          "aadhaarBackUrl",
          "panCardUrl",
          "educationCertUrl"
        ]
      },
      "SpecializationDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Specialization ID (UUID)",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "name": {
            "type": "string",
            "description": "Specialization name",
            "example": "Cardiology"
          }
        },
        "required": [
          "id",
          "name"
        ]
      },
      "MedicalCouncilDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "object",
            "description": "Medical council name",
            "example": "Karnataka Medical Council",
            "nullable": true
          },
          "state": {
            "type": "object",
            "description": "State / region of the medical council",
            "example": "Karnataka",
            "nullable": true
          }
        },
        "required": [
          "name"
        ]
      },
      "LanguageDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "7b4f9d1a-3c2e-4a1d-9b6e-2d1c0a9f8e77"
          },
          "name": {
            "type": "string",
            "example": "Hindi"
          },
          "code": {
            "type": "string",
            "example": "hi"
          }
        },
        "required": [
          "id",
          "name",
          "code"
        ]
      },
      "KycDocumentsDto": {
        "type": "object",
        "properties": {
          "aadhaarFrontUrl": {
            "type": "object",
            "description": "Aadhaar front document URL (private - requires presigned GET URL for access)",
            "example": "https://bucket.s3.region.amazonaws.com/private/uploads/kyc/accountId/uuid.jpg",
            "nullable": true
          },
          "aadhaarBackUrl": {
            "type": "object",
            "description": "Aadhaar back document URL (private - requires presigned GET URL for access)",
            "example": "https://bucket.s3.region.amazonaws.com/private/uploads/kyc/accountId/uuid.jpg",
            "nullable": true
          },
          "panCardUrl": {
            "type": "object",
            "description": "PAN card document URL (private - requires presigned GET URL for access)",
            "example": "https://bucket.s3.region.amazonaws.com/private/uploads/kyc/accountId/uuid.jpg",
            "nullable": true
          },
          "educationCertUrl": {
            "type": "object",
            "description": "Education certificate URL (private - requires presigned GET URL for access)",
            "example": "https://bucket.s3.region.amazonaws.com/private/uploads/kyc/accountId/uuid.pdf",
            "nullable": true
          }
        }
      },
      "DoctorProfileDataDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Doctor's full name",
            "example": "Dr. Rajesh Sharma"
          },
          "tokenNumber": {
            "type": "object",
            "description": "8-digit unique doctor reference token",
            "example": "00458231",
            "nullable": true
          },
          "email": {
            "type": "object",
            "description": "Doctor's email address",
            "example": "dr.sharma@example.com",
            "nullable": true
          },
          "specialization": {
            "description": "Specialization object (id and name only) or null if not set",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/SpecializationDto"
              }
            ]
          },
          "experience": {
            "type": "object",
            "description": "Years of experience",
            "example": 10,
            "nullable": true
          },
          "gender": {
            "type": "string",
            "description": "Doctor gender",
            "enum": [
              "MALE",
              "FEMALE",
              "OTHER"
            ],
            "nullable": true
          },
          "medicalApproach": {
            "type": "string",
            "description": "System of medicine practiced by the doctor (e.g. Allopathy, Ayurveda). Display name from MedicalApproach reference data.",
            "example": "Allopathy",
            "nullable": true
          },
          "about": {
            "type": "object",
            "description": "Short bio / About me for patients (max 2000 chars)",
            "example": "MBBS, MD. 10+ years in cardiology. Focus on preventive care.",
            "nullable": true
          },
          "currentWorkplace": {
            "type": "object",
            "description": "Where the doctor is currently working (hospital/clinic name)",
            "example": "Apollo Hospital, Bengaluru",
            "nullable": true
          },
          "profilePictureUrl": {
            "type": "object",
            "description": "Profile picture URL (public)",
            "example": "https://bucket.s3.region.amazonaws.com/public/uploads/doctor_profile/accountId/uuid.jpg",
            "nullable": true
          },
          "photoUrls": {
            "description": "Up to 3 photo URLs (doctor photos)",
            "example": [
              "https://bucket.s3.region.amazonaws.com/public/uploads/doctor_service/accountId/uuid.jpg"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "registrationNumber": {
            "type": "object",
            "description": "Medical registration number",
            "example": "KA-12345",
            "nullable": true
          },
          "registrationYear": {
            "type": "object",
            "description": "Medical registration year",
            "example": 2015,
            "nullable": true
          },
          "medicalCouncil": {
            "description": "Medical council object, or { name: medicalCouncilOther } when custom",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/MedicalCouncilDto"
              }
            ]
          },
          "ratePerMinute": {
            "type": "object",
            "description": "Rate per minute (INR)",
            "example": "25.00",
            "nullable": true
          },
          "ratingAvg": {
            "type": "object",
            "description": "Average rating (out of 5)",
            "example": "4.50",
            "nullable": true
          },
          "ratingCount": {
            "type": "number",
            "description": "Total number of ratings",
            "example": 42
          },
          "languages": {
            "description": "Languages the doctor can consult in",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/LanguageDto"
            }
          },
          "kycStatus": {
            "type": "string",
            "description": "Current KYC status",
            "enum": [
              "PENDING",
              "SUBMITTED",
              "VERIFIED",
              "REJECTED",
              "EXPIRED"
            ],
            "example": "VERIFIED"
          },
          "kycDocuments": {
            "description": "KYC document reference URLs. Use GET /upload/presigned-get?url={documentUrl} to get temporary access URLs for private documents.",
            "allOf": [
              {
                "$ref": "#/components/schemas/KycDocumentsDto"
              }
            ]
          }
        },
        "required": [
          "name",
          "photoUrls",
          "ratingCount",
          "languages",
          "kycStatus",
          "kycDocuments"
        ]
      },
      "GetDoctorProfileResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Doctor profile data",
            "allOf": [
              {
                "$ref": "#/components/schemas/DoctorProfileDataDto"
              }
            ]
          }
        },
        "required": [
          "data"
        ]
      },
      "UpdateDoctorProfileDto": {
        "type": "object",
        "properties": {
          "ratePerMinute": {
            "type": "number",
            "description": "Consultation rate in INR per minute",
            "example": 25,
            "minimum": 0,
            "maximum": 99999.99
          },
          "languageIds": {
            "description": "Replace doctor languages with this list (UUIDs from shared/languages)",
            "example": [
              "550e8400-e29b-41d4-a716-446655440000"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "about": {
            "type": "string",
            "description": "Short bio / About me for patients (max 2000 characters)",
            "example": "MBBS, MD. 10+ years in cardiology. Focus on preventive care.",
            "maxLength": 2000
          },
          "currentWorkplace": {
            "type": "string",
            "description": "Where you are currently working (hospital/clinic name, max 255 characters)",
            "example": "Apollo Hospital, Bengaluru",
            "maxLength": 255
          },
          "profilePictureUrl": {
            "type": "string",
            "description": "Profile/avatar photo URL (S3/CDN, max 500 chars)",
            "example": "https://bucket.s3.region.amazonaws.com/public/uploads/doctor_profile/accountId/uuid.jpg",
            "maxLength": 500
          },
          "photoUrls": {
            "description": "Up to 3 photo URLs (replaces existing). Max 3 items, each URL max 500 chars.",
            "maxItems": 3,
            "example": [
              "https://bucket.s3.region.amazonaws.com/public/uploads/doctor_service/accountId/uuid.jpg"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "GetBalanceResponseDto": {
        "type": "object",
        "properties": {
          "accountId": {
            "type": "string",
            "description": "Account ID (patient or doctor)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "balance": {
            "type": "string",
            "description": "Current balance in smallest currency unit (e.g. paise for INR), as string for precision",
            "example": "1500.00"
          },
          "currency": {
            "type": "string",
            "description": "Currency code",
            "example": "INR"
          },
          "ownerType": {
            "type": "string",
            "description": "Owner type: USER (patient) or DOCTOR",
            "example": "DOCTOR",
            "enum": [
              "USER",
              "DOCTOR"
            ]
          }
        },
        "required": [
          "accountId",
          "balance",
          "currency",
          "ownerType"
        ]
      },
      "TransactionConsultationDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Consultation ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "status": {
            "type": "string",
            "description": "Consultation status",
            "example": "COMPLETED"
          },
          "chargeAmount": {
            "type": "string",
            "description": "Consultation charge amount credited to wallet (stringified decimal)",
            "example": "150.00",
            "nullable": true
          },
          "bookingNumber": {
            "type": "string",
            "description": "Booking number for the consultation (e.g. BN000001)",
            "example": "BN000001",
            "nullable": true
          }
        },
        "required": [
          "id",
          "status"
        ]
      },
      "TransactionPaymentDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Payment record ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "paymentId": {
            "type": "string",
            "description": "External payment identifier (e.g. Razorpay payment ID)",
            "example": "pay_MxYz1234567890"
          },
          "status": {
            "type": "string",
            "description": "Payment status",
            "example": "SUCCESS"
          },
          "totalAmount": {
            "type": "string",
            "description": "Total payment amount (stringified decimal)",
            "example": "200.00"
          },
          "gstAmount": {
            "type": "string",
            "description": "GST amount for the payment (stringified decimal); present for USER_RECHARGE",
            "example": "45.00",
            "nullable": true
          }
        },
        "required": [
          "id",
          "paymentId",
          "status",
          "totalAmount"
        ]
      },
      "TransactionResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Wallet transaction ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "transactionType": {
            "type": "string",
            "description": "Transaction type",
            "example": "USER_RECHARGE"
          },
          "amount": {
            "type": "string",
            "description": "Transaction amount (stringified decimal)",
            "example": "100.00"
          },
          "currency": {
            "type": "string",
            "description": "Currency code",
            "example": "INR"
          },
          "referenceId": {
            "type": "string",
            "description": "Reference ID associated with this transaction (consultation/payment/etc.)",
            "example": "123e4567-e89b-12d3-a456-426614174000",
            "nullable": true
          },
          "referenceType": {
            "type": "string",
            "description": "Reference type (e.g. CONSULTATION, PAYMENT)",
            "example": "PAYMENT",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "description": "When the transaction was created",
            "format": "date-time",
            "example": "2026-01-22T12:00:00.000Z"
          },
          "consultation": {
            "description": "Consultation details when this transaction is linked to a consultation",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/TransactionConsultationDto"
              }
            ]
          },
          "payment": {
            "description": "Payment details when this transaction is linked to a payment",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/TransactionPaymentDto"
              }
            ]
          },
          "bookingNumber": {
            "type": "string",
            "description": "Booking number when transaction is linked to a consultation",
            "example": "BN000001",
            "nullable": true
          },
          "gstAmount": {
            "type": "string",
            "description": "GST amount for recharge transactions (stringified decimal)",
            "example": "45.00",
            "nullable": true
          }
        },
        "required": [
          "id",
          "transactionType",
          "amount",
          "currency",
          "createdAt"
        ]
      },
      "GetTransactionsResponseDto": {
        "type": "object",
        "properties": {
          "transactions": {
            "description": "List of wallet transactions",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TransactionResponseDto"
            }
          },
          "total": {
            "type": "number",
            "description": "Total number of transactions returned in this response",
            "example": 10
          },
          "limit": {
            "type": "number",
            "description": "Limit used for this query",
            "example": 50
          },
          "offset": {
            "type": "number",
            "description": "Offset used for this query",
            "example": 0
          }
        },
        "required": [
          "transactions",
          "total",
          "limit",
          "offset"
        ]
      },
      "DoctorLoginDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Doctor's email address",
            "example": "dr.sharma@example.com"
          },
          "password": {
            "type": "string",
            "description": "Password (min 8 characters)",
            "example": "SecurePass123!",
            "minLength": 8
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "CreatePayoutMethodDto": {
        "type": "object",
        "properties": {
          "bankName": {
            "type": "string",
            "description": "Bank name",
            "example": "HDFC Bank"
          },
          "branchName": {
            "type": "string",
            "description": "Branch name",
            "example": "Vrindavan Sector 2"
          },
          "accountHolderName": {
            "type": "string",
            "description": "Account holder name",
            "example": "Dr. Rajesh Sharma"
          },
          "accountNumber": {
            "type": "string",
            "description": "Bank account number (only used server-side; never echoed back in full)",
            "example": "123456789012"
          },
          "ifscCode": {
            "type": "string",
            "description": "IFSC code",
            "example": "HDFC0001234"
          }
        },
        "required": [
          "bankName",
          "branchName",
          "accountHolderName",
          "accountNumber",
          "ifscCode"
        ]
      },
      "CreatePayoutRequestDto": {
        "type": "object",
        "properties": {
          "payoutMethodId": {
            "type": "string",
            "description": "Payout method ID (doctor bank account)",
            "example": "e8e8f1ea-8d6f-4a09-9c2b-123456789abc"
          },
          "amount": {
            "type": "string",
            "description": "Amount to withdraw (string decimal, e.g. \"100.00\")",
            "example": "500.00"
          },
          "notes": {
            "type": "string",
            "description": "Optional notes for admin",
            "example": "Withdraw for February earnings"
          }
        },
        "required": [
          "payoutMethodId",
          "amount"
        ]
      },
      "PendingDoctorsSortField": {
        "type": "string",
        "enum": [
          "createdAt"
        ]
      },
      "SortOrder": {
        "type": "string",
        "enum": [
          "asc",
          "desc"
        ]
      },
      "PendingDoctorListItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Doctor account ID (UUID)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "name": {
            "type": "object",
            "description": "Doctor full name (may be null/empty if not provided yet)",
            "example": "Dr. Rajesh Sharma",
            "nullable": true
          },
          "tokenNumber": {
            "type": "object",
            "description": "8-digit doctor reference token number (unique)",
            "example": "00458231",
            "nullable": true
          },
          "phoneNumber": {
            "type": "string",
            "description": "Doctor phone number (E.164)",
            "example": "+919876543210"
          },
          "email": {
            "type": "object",
            "description": "Doctor email (may be missing prior to KYC submission)",
            "example": "dr.sharma@example.com",
            "nullable": true
          },
          "accountStatus": {
            "type": "string",
            "description": "Account status",
            "enum": [
              "ACTIVE",
              "PENDING_DELETION",
              "DELETED",
              "SUSPENDED"
            ],
            "example": "ACTIVE"
          },
          "kycStatus": {
            "type": "string",
            "description": "KYC status (should be SUBMITTED for pending list)",
            "enum": [
              "PENDING",
              "SUBMITTED",
              "VERIFIED",
              "REJECTED",
              "EXPIRED"
            ],
            "example": "SUBMITTED"
          },
          "specialization": {
            "type": "object",
            "description": "Doctor specialization name (may be null until selected)",
            "example": "Cardiology",
            "nullable": true
          },
          "medicalApproach": {
            "type": "string",
            "description": "Medical approach / system of medicine (display name from MedicalApproach reference data, e.g. Allopathy, Ayurveda)",
            "example": "Allopathy",
            "nullable": true
          },
          "profilePictureUrl": {
            "type": "object",
            "description": "Profile picture URL (primary avatar for list display)",
            "example": "https://cdn.example.com/doctors/avatar.jpg",
            "nullable": true
          },
          "experience": {
            "type": "number",
            "description": "Years of experience (may be null until provided)",
            "example": 10,
            "nullable": true
          },
          "registrationNumber": {
            "type": "object",
            "description": "Medical registration number (may be null until provided)",
            "example": "KA-12345",
            "nullable": true
          },
          "walletBalance": {
            "type": "string",
            "description": "Doctor wallet balance (INR) as string",
            "example": "0.00"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Doctor profile creation timestamp",
            "example": "2026-01-12T10:00:00.000Z"
          }
        },
        "required": [
          "id",
          "phoneNumber",
          "accountStatus",
          "kycStatus",
          "walletBalance",
          "createdAt"
        ]
      },
      "PaginationMetaDto": {
        "type": "object",
        "properties": {
          "page": {
            "type": "number",
            "description": "Current page number",
            "example": 1,
            "minimum": 1
          },
          "limit": {
            "type": "number",
            "description": "Number of items per page",
            "example": 20,
            "minimum": 1,
            "maximum": 100
          },
          "total": {
            "type": "number",
            "description": "Total number of items matching the query",
            "example": 150,
            "minimum": 0
          },
          "totalPages": {
            "type": "number",
            "description": "Total number of pages",
            "example": 8,
            "minimum": 0
          }
        },
        "required": [
          "page",
          "limit",
          "total",
          "totalPages"
        ]
      },
      "GetPendingDoctorsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "List of pending doctors (kycStatus=SUBMITTED)",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PendingDoctorListItemDto"
            }
          },
          "pagination": {
            "description": "Pagination metadata",
            "allOf": [
              {
                "$ref": "#/components/schemas/PaginationMetaDto"
              }
            ]
          }
        },
        "required": [
          "data",
          "pagination"
        ]
      },
      "DoctorApprovalStatus": {
        "type": "string",
        "enum": [
          "PENDING",
          "SUBMITTED",
          "VERIFIED",
          "REJECTED",
          "EXPIRED"
        ]
      },
      "DoctorsSortField": {
        "type": "string",
        "enum": [
          "createdAt",
          "email",
          "experience",
          "registrationNumber",
          "tokenNumber",
          "ratingAvg",
          "ratingCount",
          "kycStatus"
        ]
      },
      "DoctorListItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Doctor account ID (UUID)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "name": {
            "type": "string",
            "description": "Doctor full name",
            "example": "Dr. Rajesh Sharma"
          },
          "tokenNumber": {
            "type": "string",
            "description": "Doctor reference token number",
            "example": "DOC-2024-001234"
          },
          "phoneNumber": {
            "type": "string",
            "description": "Doctor phone number",
            "example": "+919876543210"
          },
          "email": {
            "type": "object",
            "description": "Doctor email address",
            "example": "dr.sharma@example.com",
            "nullable": true
          },
          "accountStatus": {
            "type": "string",
            "description": "Account status",
            "enum": [
              "ACTIVE",
              "PENDING_DELETION",
              "DELETED",
              "SUSPENDED"
            ],
            "example": "ACTIVE"
          },
          "kycStatus": {
            "type": "string",
            "description": "KYC verification status",
            "enum": [
              "PENDING",
              "SUBMITTED",
              "VERIFIED",
              "REJECTED",
              "EXPIRED"
            ],
            "example": "VERIFIED"
          },
          "specialization": {
            "type": "object",
            "description": "Doctor specialization name",
            "example": "Cardiology",
            "nullable": true
          },
          "medicalApproach": {
            "type": "string",
            "description": "Medical approach / system of medicine (display name from reference data, e.g. Allopathy, Ayurveda)",
            "example": "Allopathy",
            "nullable": true
          },
          "profilePictureUrl": {
            "type": "object",
            "description": "Profile picture URL (primary avatar for list display)",
            "example": "https://cdn.example.com/doctors/avatar.jpg",
            "nullable": true
          },
          "experience": {
            "type": "number",
            "description": "Years of experience",
            "example": 10,
            "nullable": true
          },
          "ratingAvg": {
            "type": "number",
            "description": "Average rating from patients (0-5). Stored as Decimal in database, returned as number.",
            "example": 4.5,
            "nullable": true
          },
          "ratingCount": {
            "type": "number",
            "description": "Total number of ratings received",
            "example": 42,
            "default": 0
          },
          "walletBalance": {
            "type": "string",
            "description": "Doctor wallet balance (INR) as string",
            "example": "500.00"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Doctor profile creation timestamp",
            "example": "2026-01-12T10:00:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "tokenNumber",
          "phoneNumber",
          "accountStatus",
          "kycStatus",
          "ratingCount",
          "walletBalance",
          "createdAt"
        ]
      },
      "GetDoctorsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "List of doctors",
            "example": [
              {
                "id": "123e4567-e89b-12d3-a456-426614174000",
                "name": "Dr. Rajesh Sharma",
                "tokenNumber": "DOC-2024-001234",
                "phoneNumber": "+919876543210",
                "accountStatus": "ACTIVE",
                "kycStatus": "VERIFIED",
                "specialization": "Cardiology",
                "ratingAvg": 4.5,
                "ratingCount": 42
              }
            ],
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DoctorListItemDto"
            }
          },
          "pagination": {
            "description": "Pagination metadata",
            "example": {
              "page": 1,
              "limit": 20,
              "total": 150,
              "totalPages": 8
            },
            "allOf": [
              {
                "$ref": "#/components/schemas/PaginationMetaDto"
              }
            ]
          }
        },
        "required": [
          "data",
          "pagination"
        ]
      },
      "AdminDoctorDetailsDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Doctor account ID (UUID)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "name": {
            "type": "string",
            "description": "Doctor's full name",
            "example": "Dr. Rajesh Sharma"
          },
          "tokenNumber": {
            "type": "object",
            "description": "8-digit doctor reference token number",
            "example": "88190375",
            "nullable": true
          },
          "phoneNumber": {
            "type": "string",
            "description": "Doctor phone number (E.164)",
            "example": "+919876543210"
          },
          "email": {
            "type": "object",
            "description": "Doctor email",
            "example": "dr.sharma@example.com",
            "nullable": true
          },
          "gender": {
            "type": "string",
            "description": "Doctor gender",
            "enum": [
              "MALE",
              "FEMALE",
              "OTHER"
            ],
            "nullable": true
          },
          "accountStatus": {
            "type": "string",
            "description": "Account status",
            "enum": [
              "ACTIVE",
              "PENDING_DELETION",
              "DELETED",
              "SUSPENDED"
            ],
            "example": "ACTIVE"
          },
          "kycStatus": {
            "type": "string",
            "description": "KYC status",
            "enum": [
              "PENDING",
              "SUBMITTED",
              "VERIFIED",
              "REJECTED",
              "EXPIRED"
            ],
            "example": "SUBMITTED"
          },
          "kycRejectionReason": {
            "type": "object",
            "description": "Reason for rejection (only when REJECTED)",
            "nullable": true
          },
          "kycSubmittedAt": {
            "type": "object",
            "description": "KYC submission timestamp (ISO 8601)",
            "example": "2026-02-12T22:44:05.672Z",
            "format": "date-time",
            "nullable": true
          },
          "kycVerifiedAt": {
            "type": "object",
            "description": "KYC verification timestamp (ISO 8601)",
            "example": "2026-02-12T23:00:00.000Z",
            "format": "date-time",
            "nullable": true
          },
          "specialization": {
            "description": "Specialization: { id, name }. Null when not set.",
            "nullable": true,
            "example": {
              "id": "ca215e41-b7fd-4e02-9a7f-94dd1fc29352",
              "name": "Allergist"
            },
            "allOf": [
              {
                "$ref": "#/components/schemas/SpecializationDto"
              }
            ]
          },
          "experience": {
            "type": "number",
            "description": "Years of experience",
            "example": 10,
            "nullable": true
          },
          "medicalApproach": {
            "type": "string",
            "description": "Medical approach / system of medicine (display name from MedicalApproach reference data, e.g. Allopathy, Ayurveda)",
            "example": "Allopathy",
            "nullable": true
          },
          "about": {
            "type": "object",
            "description": "Short bio / About me for patients (max 2000 chars)",
            "example": "MBBS, MD. 10+ years in cardiology. Focus on preventive care.",
            "nullable": true
          },
          "currentWorkplace": {
            "type": "object",
            "description": "Current workplace / hospital / clinic name",
            "example": "Apollo Hospitals, Bangalore",
            "nullable": true
          },
          "profilePictureUrl": {
            "type": "object",
            "description": "Profile picture URL (primary avatar)",
            "example": "https://cdn.example.com/doctors/avatar.jpg",
            "nullable": true
          },
          "photoUrls": {
            "description": "Up to 3 photo URLs (doctor photos). Empty array when none.",
            "example": [],
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "registrationNumber": {
            "type": "object",
            "description": "Medical registration number",
            "example": "KA-12345",
            "nullable": true
          },
          "registrationYear": {
            "type": "number",
            "description": "Medical registration year",
            "example": 2015,
            "nullable": true
          },
          "aadhaarNumber": {
            "type": "object",
            "description": "Aadhaar number (stored for verification)",
            "example": "123456789012",
            "nullable": true
          },
          "aadhaarFrontUrl": {
            "type": "object",
            "description": "Aadhaar front image/document URL",
            "example": "https://cdn.example.com/kyc/aadhaar-front.jpg",
            "nullable": true
          },
          "aadhaarBackUrl": {
            "type": "object",
            "description": "Aadhaar back image/document URL",
            "example": "https://cdn.example.com/kyc/aadhaar-back.jpg",
            "nullable": true
          },
          "panNumber": {
            "type": "object",
            "description": "PAN number",
            "example": "ABCDE1234F",
            "nullable": true
          },
          "panCardUrl": {
            "type": "object",
            "description": "PAN card image/document URL",
            "example": "https://cdn.example.com/kyc/pan.jpg",
            "nullable": true
          },
          "educationCertUrl": {
            "type": "object",
            "description": "Education certificate URL",
            "example": "https://cdn.example.com/kyc/degree.pdf",
            "nullable": true
          },
          "medicalCouncil": {
            "description": "Medical council: { id, name, state }. Null when not set.",
            "nullable": true,
            "example": {
              "id": "7058a2ed-2f64-4725-aab4-9355635fc0f8",
              "name": "Bihar Medical Council",
              "state": "Bihar"
            },
            "allOf": [
              {
                "$ref": "#/components/schemas/MedicalCouncilDto"
              }
            ]
          },
          "medicalCouncilOther": {
            "type": "object",
            "description": "Custom medical council name when doctor selected \"Other\"",
            "example": "State Ayurvedic Council",
            "nullable": true
          },
          "ratePerMinute": {
            "type": "object",
            "description": "Consultation rate per minute (INR) as string. Null until set.",
            "example": "25.00",
            "nullable": true
          },
          "ratingAvg": {
            "type": "object",
            "description": "Average rating (string, e.g. \"4.50\" or \"0\")",
            "nullable": true,
            "example": "0"
          },
          "ratingCount": {
            "type": "number",
            "description": "Total rating count",
            "example": 0
          },
          "walletBalance": {
            "type": "string",
            "description": "Doctor wallet balance (INR) as string",
            "example": "0"
          },
          "languages": {
            "description": "Languages the doctor can consult in. Each: { id, code, name }",
            "example": [
              {
                "id": "444de466-2731-48b7-958d-d31e7aa63dd9",
                "code": "as",
                "name": "Assamese"
              },
              {
                "id": "2b588643-d164-442c-b2af-84580b9ffa2a",
                "code": "bn",
                "name": "Bengali"
              }
            ],
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/LanguageDto"
            }
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Doctor profile creation timestamp (ISO 8601)",
            "example": "2026-02-12T22:42:57.204Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Doctor profile last updated timestamp (ISO 8601)",
            "example": "2026-02-12T22:44:00.000Z"
          },
          "accountCreatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Account creation timestamp (ISO 8601)",
            "example": "2026-02-12T22:42:57.210Z"
          },
          "lastLoginAt": {
            "type": "object",
            "description": "Last login timestamp (ISO 8601)",
            "example": "2026-02-12T22:42:57.235Z",
            "format": "date-time",
            "nullable": true
          }
        },
        "required": [
          "id",
          "name",
          "phoneNumber",
          "accountStatus",
          "kycStatus",
          "photoUrls",
          "ratingCount",
          "walletBalance",
          "languages",
          "createdAt",
          "updatedAt",
          "accountCreatedAt"
        ]
      },
      "GetDoctorDetailsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Doctor details payload",
            "allOf": [
              {
                "$ref": "#/components/schemas/AdminDoctorDetailsDto"
              }
            ]
          }
        },
        "required": [
          "data"
        ]
      },
      "ApproveDoctorKycDto": {
        "type": "object",
        "properties": {
          "notes": {
            "type": "string",
            "description": "Optional approval notes for internal audit trail (not shown to doctor)",
            "example": "Verified all documents",
            "maxLength": 500
          }
        }
      },
      "ApproveDoctorKycResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message",
            "example": "Doctor approved successfully"
          },
          "data": {
            "type": "object",
            "description": "Result payload",
            "example": {
              "status": "VERIFIED"
            }
          }
        },
        "required": [
          "message",
          "data"
        ]
      },
      "RejectDoctorKycDto": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "description": "Rejection reason shown to doctor (keep actionable; avoids sensitive data)",
            "example": "Aadhaar photo is unclear, please re-upload",
            "minLength": 3,
            "maxLength": 500
          }
        },
        "required": [
          "reason"
        ]
      },
      "RejectDoctorKycResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message",
            "example": "Doctor application rejected"
          },
          "data": {
            "type": "object",
            "description": "Result payload",
            "example": {
              "status": "REJECTED",
              "reason": "Aadhaar photo is unclear, please re-upload"
            }
          }
        },
        "required": [
          "message",
          "data"
        ]
      },
      "PatientListItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Patient account ID (UUID)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "clientCode": {
            "type": "string",
            "description": "Client code (same as account ID for now)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "name": {
            "type": "string",
            "description": "Patient full name",
            "example": "John Doe"
          },
          "phoneNumber": {
            "type": "string",
            "description": "Phone number",
            "example": "+919876543210"
          },
          "gender": {
            "type": "string",
            "description": "Gender",
            "enum": [
              "MALE",
              "FEMALE",
              "OTHER"
            ],
            "nullable": true
          },
          "dateOfBirth": {
            "type": "object",
            "description": "Date of birth",
            "example": "1990-05-15",
            "nullable": true
          },
          "ageYears": {
            "type": "object",
            "description": "Age in years (computed from dateOfBirth as of today)",
            "example": 34,
            "nullable": true
          },
          "height": {
            "type": "object",
            "description": "Height in cm",
            "example": 170,
            "nullable": true
          },
          "weight": {
            "type": "object",
            "description": "Weight in kg",
            "example": 70,
            "nullable": true
          },
          "walletBalance": {
            "type": "string",
            "description": "Wallet balance (INR) as string",
            "example": "500.00"
          },
          "createdAt": {
            "type": "string",
            "description": "Registration date (ISO 8601)",
            "example": "2026-01-15T10:00:00.000Z"
          }
        },
        "required": [
          "id",
          "clientCode",
          "name",
          "phoneNumber",
          "walletBalance",
          "createdAt"
        ]
      },
      "GetPatientsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "List of patients",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PatientListItemDto"
            }
          },
          "pagination": {
            "description": "Pagination metadata",
            "allOf": [
              {
                "$ref": "#/components/schemas/PaginationMetaDto"
              }
            ]
          }
        },
        "required": [
          "data",
          "pagination"
        ]
      },
      "PatientDetailDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Patient account ID (UUID)"
          },
          "clientCode": {
            "type": "string",
            "description": "Client code (account ID)"
          },
          "name": {
            "type": "string",
            "description": "Full name"
          },
          "phoneNumber": {
            "type": "string",
            "description": "Phone number"
          },
          "profilePictureUrl": {
            "type": "object",
            "description": "Profile picture URL",
            "nullable": true
          },
          "gender": {
            "type": "string",
            "enum": [
              "MALE",
              "FEMALE",
              "OTHER"
            ],
            "nullable": true
          },
          "dateOfBirth": {
            "type": "object",
            "description": "Date of birth (YYYY-MM-DD)",
            "nullable": true
          },
          "ageYears": {
            "type": "object",
            "description": "Age in years (computed from dateOfBirth as of today)",
            "nullable": true
          },
          "height": {
            "type": "object",
            "description": "Height in cm",
            "nullable": true
          },
          "weight": {
            "type": "object",
            "description": "Weight in kg",
            "nullable": true
          },
          "bloodGroup": {
            "type": "object",
            "description": "Blood group",
            "nullable": true
          },
          "walletBalance": {
            "type": "string",
            "description": "Wallet balance (INR) as string"
          },
          "createdAt": {
            "type": "string",
            "description": "Registration date (ISO 8601)"
          }
        },
        "required": [
          "id",
          "clientCode",
          "name",
          "phoneNumber",
          "walletBalance",
          "createdAt"
        ]
      },
      "GetPatientDetailResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Patient detail",
            "allOf": [
              {
                "$ref": "#/components/schemas/PatientDetailDto"
              }
            ]
          }
        },
        "required": [
          "data"
        ]
      },
      "BookingListItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Booking/consultation ID (UUID)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "bookingNumber": {
            "type": "object",
            "description": "Human-readable booking number (e.g. BN000001)",
            "example": "BN000001",
            "nullable": true
          },
          "bookingCode": {
            "type": "string",
            "description": "Booking code (same as id, for backward compatibility)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "clientName": {
            "type": "string",
            "description": "Client (patient) name",
            "example": "John Doe"
          },
          "clientPhoneNumber": {
            "type": "string",
            "description": "Client (patient) phone number",
            "example": "+919876543210"
          },
          "doctorName": {
            "type": "string",
            "description": "Doctor name",
            "example": "Dr. Rajesh Sharma"
          },
          "doctorPhoneNumber": {
            "type": "string",
            "description": "Doctor phone number",
            "example": "+919876543211"
          },
          "bookingDate": {
            "type": "string",
            "description": "Booking creation date (ISO 8601)",
            "example": "2026-01-15T10:00:00.000Z"
          },
          "acceptedAt": {
            "type": "object",
            "description": "Time when consultation was accepted/started (ISO 8601)",
            "example": "2026-01-15T10:05:00.000Z",
            "nullable": true
          },
          "endedAt": {
            "type": "object",
            "description": "Time when consultation ended (ISO 8601)",
            "example": "2026-01-15T10:20:00.000Z",
            "nullable": true
          },
          "status": {
            "type": "string",
            "description": "Consultation status",
            "enum": [
              "REQUESTED",
              "EXPIRED",
              "ACCEPTED",
              "ACTIVE",
              "ENDED",
              "SETTLED"
            ],
            "example": "ENDED"
          },
          "mode": {
            "type": "object",
            "description": "Consultation mode (CHAT, AUDIO, VIDEO)",
            "example": "VIDEO",
            "nullable": true
          }
        },
        "required": [
          "id",
          "bookingCode",
          "clientName",
          "clientPhoneNumber",
          "doctorName",
          "doctorPhoneNumber",
          "bookingDate",
          "status"
        ]
      },
      "GetBookingsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "List of bookings (consultations)",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BookingListItemDto"
            }
          },
          "pagination": {
            "description": "Pagination metadata",
            "allOf": [
              {
                "$ref": "#/components/schemas/PaginationMetaDto"
              }
            ]
          }
        },
        "required": [
          "data",
          "pagination"
        ]
      },
      "PayoutRequestListItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Payout request ID",
            "example": "e8e8f1ea-8d6f-4a09-9c2b-123456789abc"
          },
          "doctorCode": {
            "type": "object",
            "description": "Doctor reference token (if available)",
            "example": "12345678",
            "nullable": true
          },
          "name": {
            "type": "string",
            "description": "Doctor name",
            "example": "Dr. Rajesh Sharma"
          },
          "amount": {
            "type": "string",
            "description": "Requested payout amount (gross) as string",
            "example": "1500.00"
          },
          "netAmount": {
            "type": "string",
            "description": "Net amount after TDS as string",
            "example": "1425.00"
          },
          "tdsAmount": {
            "type": "string",
            "description": "TDS amount deducted as string",
            "example": "75.00"
          },
          "status": {
            "type": "string",
            "description": "Payout status",
            "example": "PENDING_REVIEW"
          },
          "createdAt": {
            "type": "string",
            "description": "When the request was created",
            "example": "2026-02-23T10:00:00.000Z"
          }
        },
        "required": [
          "id",
          "doctorCode",
          "name",
          "amount",
          "netAmount",
          "tdsAmount",
          "status",
          "createdAt"
        ]
      },
      "GetPayoutsRequestsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "List of payout withdrawal requests",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PayoutRequestListItemDto"
            }
          },
          "pagination": {
            "description": "Pagination metadata",
            "example": {
              "page": 1,
              "limit": 20,
              "total": 0,
              "totalPages": 0
            },
            "allOf": [
              {
                "$ref": "#/components/schemas/PaginationMetaDto"
              }
            ]
          }
        },
        "required": [
          "data",
          "pagination"
        ]
      },
      "AdminAnalyticsOverviewDto": {
        "type": "object",
        "properties": {
          "totalDoctors": {
            "type": "number",
            "description": "Total number of doctors",
            "example": 120
          },
          "verifiedDoctors": {
            "type": "number",
            "description": "Total number of verified doctors",
            "example": 80
          },
          "pendingKyc": {
            "type": "number",
            "description": "Number of doctors pending KYC review (SUBMITTED)",
            "example": 12
          },
          "totalPatients": {
            "type": "number",
            "description": "Total number of patients",
            "example": 5000
          },
          "totalConsultations": {
            "type": "number",
            "description": "Total number of consultations",
            "example": 2300
          },
          "activeConsultations": {
            "type": "number",
            "description": "Number of active consultations (ACCEPTED or ACTIVE)",
            "example": 7
          },
          "newDoctors": {
            "type": "number",
            "description": "Number of doctors registered in the last 30 days",
            "example": 5
          },
          "newPatients": {
            "type": "number",
            "description": "Number of patients registered in the last 30 days",
            "example": 120
          },
          "totalChats": {
            "type": "number",
            "description": "Total consultations with mode CHAT",
            "example": 1500
          },
          "totalAudioCalls": {
            "type": "number",
            "description": "Total consultations with mode AUDIO",
            "example": 600
          },
          "totalVideoCalls": {
            "type": "number",
            "description": "Total consultations with mode VIDEO",
            "example": 200
          }
        },
        "required": [
          "totalDoctors",
          "verifiedDoctors",
          "pendingKyc",
          "totalPatients",
          "totalConsultations",
          "activeConsultations",
          "newDoctors",
          "newPatients",
          "totalChats",
          "totalAudioCalls",
          "totalVideoCalls"
        ]
      },
      "AdminTransactionItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Transaction ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "walletId": {
            "type": "string",
            "description": "Wallet ID",
            "example": "123e4567-e89b-12d3-a456-426614174001"
          },
          "ownerType": {
            "type": "string",
            "description": "Wallet owner type (USER = patient, DOCTOR, PLATFORM)",
            "enum": [
              "USER",
              "DOCTOR",
              "PLATFORM"
            ],
            "example": "USER"
          },
          "accountId": {
            "type": "string",
            "description": "Account ID that owns the wallet",
            "example": "123e4567-e89b-12d3-a456-426614174002"
          },
          "transactionType": {
            "type": "string",
            "description": "Transaction type",
            "enum": [
              "USER_RECHARGE",
              "CONSULTATION_DEBIT",
              "DOCTOR_EARNING_CREDIT",
              "PLATFORM_COMMISSION",
              "GST_COMPONENT"
            ],
            "example": "CONSULTATION_DEBIT"
          },
          "amount": {
            "type": "string",
            "description": "Amount (string to preserve decimal)",
            "example": "150.00"
          },
          "currency": {
            "type": "string",
            "description": "Currency",
            "example": "INR"
          },
          "referenceId": {
            "type": "object",
            "description": "Reference ID",
            "nullable": true
          },
          "referenceType": {
            "type": "object",
            "description": "Reference type",
            "nullable": true
          },
          "consultationId": {
            "type": "object",
            "description": "Consultation ID if linked to a consultation",
            "nullable": true
          },
          "bookingNumber": {
            "type": "object",
            "description": "Booking number (e.g. BN000001) if linked to a consultation",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "description": "When the transaction was created",
            "example": "2026-01-22T12:00:00.000Z"
          }
        },
        "required": [
          "id",
          "walletId",
          "ownerType",
          "accountId",
          "transactionType",
          "amount",
          "currency",
          "createdAt"
        ]
      },
      "AdminTransactionsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "List of transactions",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdminTransactionItemDto"
            }
          },
          "pagination": {
            "type": "object",
            "description": "Pagination info",
            "example": {
              "page": 1,
              "limit": 20,
              "total": 100,
              "totalPages": 5
            }
          }
        },
        "required": [
          "data",
          "pagination"
        ]
      },
      "AdminDashboardMetricsRangeDto": {
        "type": "object",
        "properties": {
          "from": {
            "type": "object",
            "description": "Range start (ISO 8601). Null/omitted when using all_time or open-ended ranges.",
            "example": "2026-02-01T00:00:00.000Z",
            "nullable": true
          },
          "to": {
            "type": "object",
            "description": "Range end (ISO 8601). Null/omitted when using all_time or open-ended ranges.",
            "example": "2026-02-21T23:59:59.999Z",
            "nullable": true
          }
        }
      },
      "AdminDashboardBalancesDto": {
        "type": "object",
        "properties": {
          "totalPlatformBalance": {
            "type": "string",
            "description": "Total platform wallet balance (commission + GST) as string",
            "example": "15230.75"
          },
          "totalDoctorsBalance": {
            "type": "string",
            "description": "Sum of all doctor wallet balances as string",
            "example": "42000.00"
          },
          "totalPatientsBalance": {
            "type": "string",
            "description": "Sum of all patient wallet balances as string",
            "example": "9000.00"
          }
        },
        "required": [
          "totalPlatformBalance",
          "totalDoctorsBalance",
          "totalPatientsBalance"
        ]
      },
      "AdminDashboardFlowsDto": {
        "type": "object",
        "properties": {
          "totalGstCollection": {
            "type": "string",
            "description": "Total GST collected from wallet recharges in the selected range as string",
            "example": "8230.50"
          },
          "totalCommission": {
            "type": "string",
            "description": "Total platform commission earned from consultations in the selected range as string",
            "example": "7000.25"
          },
          "totalRazorpayDeposits": {
            "type": "string",
            "description": "Total successful Razorpay deposits (gross) in the selected range as string",
            "example": "118000.00"
          },
          "totalPayoutWithdrawals": {
            "type": "string",
            "description": "Total payout withdrawals in the selected range (stub: 0 until Payout model exists)",
            "example": "0.00"
          }
        },
        "required": [
          "totalGstCollection",
          "totalCommission",
          "totalRazorpayDeposits",
          "totalPayoutWithdrawals"
        ]
      },
      "AdminDashboardMetricsDto": {
        "type": "object",
        "properties": {
          "range": {
            "description": "Resolved date range used for flow metrics (GST, commission, deposits). Balances always reflect the snapshotAt moment.",
            "allOf": [
              {
                "$ref": "#/components/schemas/AdminDashboardMetricsRangeDto"
              }
            ]
          },
          "snapshotAt": {
            "type": "string",
            "description": "When the dashboard snapshot was taken (ISO 8601)",
            "example": "2026-02-21T18:30:00.000Z"
          },
          "balances": {
            "description": "Current wallet balances snapshot",
            "allOf": [
              {
                "$ref": "#/components/schemas/AdminDashboardBalancesDto"
              }
            ]
          },
          "flows": {
            "description": "Financial flows aggregated over the selected range",
            "allOf": [
              {
                "$ref": "#/components/schemas/AdminDashboardFlowsDto"
              }
            ]
          }
        },
        "required": [
          "range",
          "snapshotAt",
          "balances",
          "flows"
        ]
      },
      "AddTestMoneyDto": {
        "type": "object",
        "properties": {
          "accountId": {
            "type": "string",
            "description": "Patient account ID (UUID)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "amount": {
            "type": "number",
            "description": "Amount to add in smallest currency unit (default: 1000, minimum: 30)",
            "example": 1000,
            "minimum": 30,
            "default": 1000
          }
        },
        "required": [
          "accountId"
        ]
      },
      "AdminLoginDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Admin email address",
            "example": "admin@local.test"
          },
          "password": {
            "type": "string",
            "description": "Admin password (minimum 8 characters)",
            "example": "ChangeMeAdmin123!",
            "minLength": 8,
            "maxLength": 128
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "AdminLoginResponseDto": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "JWT access token for API authentication",
            "example": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwicm9sZSI6IkFETUlOIiwic2Vzc2lvbklkIjoiYWJjLTEyMyIsImlhdCI6MTUxNjIzOTAyMn0..."
          },
          "refreshToken": {
            "type": "string",
            "description": "JWT refresh token for obtaining new access tokens",
            "example": "abc123def456ghi789jkl012mno345pqr678stu901vwx234yz"
          },
          "admin": {
            "type": "object",
            "description": "Admin user information",
            "example": {
              "id": "123e4567-e89b-12d3-a456-426614174000",
              "email": "admin@local.test",
              "role": "ADMIN",
              "lastLoginAt": "2026-01-17T10:30:00.000Z"
            }
          }
        },
        "required": [
          "accessToken",
          "refreshToken",
          "admin"
        ]
      },
      "AdminLogoutResponseDto": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message",
            "example": "Logged out successfully"
          }
        },
        "required": [
          "message"
        ]
      },
      "CreateAdminDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Admin email address (must be unique)",
            "example": "newadmin@example.com"
          },
          "password": {
            "type": "string",
            "description": "Password (minimum 8 characters)",
            "example": "SecurePass123!",
            "minLength": 8,
            "maxLength": 128
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "SpecializationResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "name": {
            "type": "string",
            "example": "Cardiologist"
          },
          "iconUrl": {
            "type": "object",
            "example": "https://your-app-uploads-prod.s3.ap-south-1.amazonaws.com/public/uploads/icons/specializations/cardiologist.svg",
            "nullable": true,
            "description": "S3 or public URL of the icon for this specialization"
          },
          "isActive": {
            "type": "boolean",
            "example": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "iconUrl",
          "isActive",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateSpecializationDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the specialization",
            "example": "Cardiologist",
            "maxLength": 100
          },
          "iconUrl": {
            "type": "string",
            "description": "S3 (or public) URL of the icon for this specialization. Shown in frontend.",
            "example": "https://your-app-uploads-prod.s3.ap-south-1.amazonaws.com/public/uploads/icons/specializations/cardiologist.svg",
            "maxLength": 500
          }
        },
        "required": [
          "name"
        ]
      },
      "UpdateSpecializationDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the specialization",
            "example": "Cardiology",
            "maxLength": 100
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the specialization is active",
            "example": true
          },
          "iconUrl": {
            "type": "object",
            "description": "S3 (or public) URL of the icon. Pass empty string to clear.",
            "example": "https://your-app-uploads-prod.s3.ap-south-1.amazonaws.com/public/uploads/icons/specializations/cardiologist.svg",
            "maxLength": 500
          }
        }
      },
      "MedicalApproachResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "code": {
            "type": "string",
            "example": "ALLOPATHY"
          },
          "name": {
            "type": "string",
            "example": "Allopathy"
          },
          "iconUrl": {
            "type": "object",
            "example": "https://your-app-uploads-prod.s3.ap-south-1.amazonaws.com/icons/medical-approaches/allopathy.svg",
            "nullable": true,
            "description": "S3 or public URL of the icon for this medical approach"
          },
          "isActive": {
            "type": "boolean",
            "example": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          }
        },
        "required": [
          "id",
          "code",
          "name",
          "iconUrl",
          "isActive",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateMedicalApproachDto": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "Stable code for the medical approach (e.g. ALLOPATHY, AYURVEDA). Must be unique.",
            "example": "ALLOPATHY",
            "maxLength": 50
          },
          "name": {
            "type": "string",
            "description": "Display name of the medical approach (e.g. Allopathy).",
            "example": "Allopathy",
            "maxLength": 100
          },
          "iconUrl": {
            "type": "string",
            "description": "S3 (or public) URL of the icon for this medical approach. Shown in frontend.",
            "example": "https://your-app-uploads-prod.s3.ap-south-1.amazonaws.com/icons/medical-approaches/allopathy.svg",
            "maxLength": 500
          }
        },
        "required": [
          "code",
          "name"
        ]
      },
      "UpdateMedicalApproachDto": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "Stable code for the medical approach (e.g. ALLOPATHY, AYURVEDA). Must be unique if changed.",
            "example": "ALLOPATHY",
            "maxLength": 50
          },
          "name": {
            "type": "string",
            "description": "Display name of the medical approach (e.g. Allopathy).",
            "example": "Allopathy",
            "maxLength": 100
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the medical approach is active",
            "example": true
          },
          "iconUrl": {
            "type": "object",
            "description": "S3 (or public) URL of the icon. Pass empty string to clear.",
            "example": "https://your-app-uploads-prod.s3.ap-south-1.amazonaws.com/icons/medical-approaches/allopathy.svg",
            "maxLength": 500
          }
        }
      },
      "SymptomResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "name": {
            "type": "string",
            "example": "Headache"
          },
          "isActive": {
            "type": "boolean",
            "example": true
          },
          "specializations": {
            "example": [
              {
                "id": "spec-uuid",
                "name": "Neurologist"
              }
            ],
            "description": "Specializations mapped to this symptom (for doctor discovery by symptom)",
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "isActive",
          "specializations",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateSymptomDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the symptom",
            "example": "Headache",
            "maxLength": 100
          },
          "specializationIds": {
            "description": "Specialization IDs to map to this symptom (doctors with these specializations can be found by this symptom)",
            "example": [
              "123e4567-e89b-12d3-a456-426614174000"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "name"
        ]
      },
      "UpdateSymptomDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the symptom",
            "example": "Headache",
            "maxLength": 100
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the symptom is active",
            "example": true
          },
          "specializationIds": {
            "description": "Specialization IDs to map to this symptom. Pass [] to clear all. Omit to leave unchanged.",
            "example": [
              "123e4567-e89b-12d3-a456-426614174000"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "SymptomCategoryResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "name": {
            "type": "string",
            "example": "Most Common Symptoms"
          },
          "displayOrder": {
            "type": "number",
            "example": 1,
            "description": "Display order in UI (lower first)"
          },
          "isActive": {
            "type": "boolean",
            "example": true
          },
          "symptoms": {
            "example": [
              {
                "id": "sym-uuid",
                "name": "Headache"
              }
            ],
            "description": "Symptoms in this category (ordered by displayOrder)",
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "displayOrder",
          "isActive",
          "symptoms",
          "createdAt",
          "updatedAt"
        ]
      },
      "AdminFullSymptomDataDto": {
        "type": "object",
        "properties": {
          "symptoms": {
            "description": "Flat list of all symptoms (including inactive) for management",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SymptomResponseDto"
            }
          },
          "categories": {
            "description": "Symptom categories with their symptoms (including inactive)",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SymptomCategoryResponseDto"
            }
          }
        },
        "required": [
          "symptoms",
          "categories"
        ]
      },
      "AdminGetFullSymptomsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "Full symptom data payload for admin configuration",
            "allOf": [
              {
                "$ref": "#/components/schemas/AdminFullSymptomDataDto"
              }
            ]
          }
        },
        "required": [
          "data"
        ]
      },
      "CreateSymptomCategoryDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Category name (e.g. Most Common Symptoms, Skin & Hair Symptoms)",
            "example": "Most Common Symptoms",
            "maxLength": 150
          },
          "displayOrder": {
            "type": "number",
            "description": "Display order in UI (lower first). If not provided, will be set to next available number (max + 1), minimum 1.",
            "example": 1
          },
          "symptomIds": {
            "description": "Symptom IDs to assign to this category (order = array order)",
            "example": [
              "123e4567-e89b-12d3-a456-426614174000"
            ],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "name"
        ]
      },
      "UpdateSymptomCategoryDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Category name",
            "example": "Most Common Symptoms",
            "maxLength": 150
          },
          "displayOrder": {
            "type": "number",
            "description": "Display order in UI (lower first). Must be >= 1.",
            "example": 1
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the category is active",
            "example": true
          },
          "symptomIds": {
            "description": "Replace symptoms in this category with these IDs (order = array order). Pass [] to clear.",
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "LanguageResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "code": {
            "type": "string",
            "example": "en"
          },
          "name": {
            "type": "string",
            "example": "English"
          },
          "isActive": {
            "type": "boolean",
            "example": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          }
        },
        "required": [
          "id",
          "code",
          "name",
          "isActive",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateLanguageDto": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "ISO language code (e.g., en, hi, ta)",
            "example": "en",
            "maxLength": 10
          },
          "name": {
            "type": "string",
            "description": "Display name of the language",
            "example": "English",
            "maxLength": 50
          }
        },
        "required": [
          "code",
          "name"
        ]
      },
      "UpdateLanguageDto": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "ISO language code (e.g., en, hi, ta)",
            "example": "en",
            "maxLength": 10
          },
          "name": {
            "type": "string",
            "description": "Display name of the language",
            "example": "English",
            "maxLength": 50
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the language is active",
            "example": true
          }
        }
      },
      "MedicalCouncilResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "name": {
            "type": "string",
            "example": "Medical Council of India"
          },
          "state": {
            "type": "object",
            "example": "Tamil Nadu",
            "nullable": true
          },
          "isActive": {
            "type": "boolean",
            "example": true
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "example": "2026-01-22T12:00:00.000Z"
          }
        },
        "required": [
          "id",
          "name",
          "state",
          "isActive",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateMedicalCouncilDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the medical council",
            "example": "Medical Council of India",
            "maxLength": 200
          },
          "state": {
            "type": "string",
            "description": "State name if council is state-specific (null for national councils)",
            "example": "Tamil Nadu",
            "maxLength": 100
          }
        },
        "required": [
          "name"
        ]
      },
      "UpdateMedicalCouncilDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the medical council",
            "example": "Medical Council of India",
            "maxLength": 200
          },
          "state": {
            "type": "object",
            "description": "State name if council is state-specific (null for national councils)",
            "example": "Tamil Nadu",
            "maxLength": 100
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the medical council is active",
            "example": true
          }
        }
      },
      "PaymentListItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Payment record ID (UUID)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "walletUserCode": {
            "type": "string",
            "description": "Wallet user (account) ID",
            "example": "123e4567-e89b-12d3-a456-426614174001"
          },
          "walletUserName": {
            "type": "string",
            "description": "User name (patient or doctor)",
            "example": "John Doe"
          },
          "userEmailOrPhone": {
            "type": "string",
            "description": "User email (doctor) or phone (patient)",
            "example": "john@example.com"
          },
          "paymentType": {
            "type": "string",
            "description": "Payment type (recharge)",
            "example": "Recharge"
          },
          "amount": {
            "type": "string",
            "description": "Wallet amount credited (INR) as string",
            "example": "500.00"
          },
          "status": {
            "type": "string",
            "description": "Payment status",
            "enum": [
              "PENDING",
              "SUCCESS",
              "FAILED",
              "REFUNDED"
            ],
            "example": "SUCCESS"
          },
          "paymentTime": {
            "type": "string",
            "description": "Payment creation time (ISO 8601)",
            "example": "2026-01-15T10:00:00.000Z"
          },
          "orderId": {
            "type": "object",
            "description": "Razorpay order ID for this recharge (used by /admin/payments/verify-order/:orderId). Can be null for legacy/manual records.",
            "example": "order_MxYz1234567890",
            "nullable": true
          },
          "paymentId": {
            "type": "object",
            "description": "Razorpay payment ID (if known). Can be null for PENDING or legacy rows.",
            "example": "pay_MxYz1234567890",
            "nullable": true
          }
        },
        "required": [
          "id",
          "walletUserCode",
          "walletUserName",
          "userEmailOrPhone",
          "paymentType",
          "amount",
          "status",
          "paymentTime",
          "orderId",
          "paymentId"
        ]
      },
      "GetPaymentsListResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "List of payment records (recharges)",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PaymentListItemDto"
            }
          },
          "pagination": {
            "description": "Pagination metadata",
            "allOf": [
              {
                "$ref": "#/components/schemas/PaginationMetaDto"
              }
            ]
          }
        },
        "required": [
          "data",
          "pagination"
        ]
      },
      "CreatePaymentDto": {
        "type": "object",
        "properties": {
          "walletAmount": {
            "type": "number",
            "description": "Amount to add to wallet (before GST)",
            "example": 100
          }
        },
        "required": [
          "walletAmount"
        ]
      },
      "CreatePaymentResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "paymentId": {
            "type": "string",
            "description": "Payment ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "orderId": {
            "type": "string",
            "description": "Order ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "walletAmount": {
            "type": "string",
            "description": "Wallet amount",
            "example": "100.00"
          },
          "gstAmount": {
            "type": "string",
            "description": "GST amount",
            "example": "10.00"
          },
          "totalAmount": {
            "type": "string",
            "description": "Total amount",
            "example": "110.00"
          },
          "currency": {
            "type": "string",
            "description": "Currency",
            "example": "INR"
          },
          "status": {
            "type": "string",
            "description": "Status",
            "example": "PENDING"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Created at",
            "example": "2026-01-16T10:00:00Z"
          },
          "completedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Completed at",
            "example": "2026-01-16T10:00:00Z"
          },
          "razorpayOrder": {
            "type": "object",
            "description": "Razorpay order details used to initiate the payment",
            "example": {
              "id": "order_MxYz1234567890",
              "amount": 11000,
              "currency": "INR",
              "key": "rzp_test_1234567890abcdef"
            }
          }
        },
        "required": [
          "id",
          "paymentId",
          "orderId",
          "walletAmount",
          "gstAmount",
          "totalAmount",
          "currency",
          "status",
          "createdAt",
          "completedAt",
          "razorpayOrder"
        ]
      },
      "PaymentResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "paymentId": {
            "type": "string",
            "description": "Payment ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "orderId": {
            "type": "string",
            "description": "Order ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "walletAmount": {
            "type": "string",
            "description": "Wallet amount",
            "example": "100.00"
          },
          "gstAmount": {
            "type": "string",
            "description": "GST amount",
            "example": "10.00"
          },
          "totalAmount": {
            "type": "string",
            "description": "Total amount",
            "example": "110.00"
          },
          "currency": {
            "type": "string",
            "description": "Currency",
            "example": "INR"
          },
          "status": {
            "type": "string",
            "description": "Status",
            "example": "PENDING"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Created at",
            "example": "2026-01-16T10:00:00Z"
          },
          "completedAt": {
            "format": "date-time",
            "type": "string",
            "description": "Completed at",
            "example": "2026-01-16T10:00:00Z"
          }
        },
        "required": [
          "id",
          "paymentId",
          "orderId",
          "walletAmount",
          "gstAmount",
          "totalAmount",
          "currency",
          "status",
          "createdAt",
          "completedAt"
        ]
      },
      "GetPaymentHistoryResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "List of payment records (wallet recharges), ordered by createdAt descending",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PaymentResponseDto"
            }
          }
        },
        "required": [
          "data"
        ]
      },
      "RegisterDeviceTokenDto": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "FCM device token from Firebase SDK",
            "example": "dGhpcyBpcyBhIHRlc3QgdG9rZW4...",
            "minLength": 1,
            "maxLength": 512
          },
          "platform": {
            "type": "string",
            "description": "Device platform",
            "enum": [
              "ios",
              "android"
            ],
            "example": "android"
          }
        },
        "required": [
          "token",
          "platform"
        ]
      },
      "CreateConsultationDto": {
        "type": "object",
        "properties": {
          "doctorId": {
            "type": "string",
            "description": "UUID of the specific doctor to request consultation with",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "mode": {
            "type": "string",
            "description": "Consultation mode (default: CHAT)",
            "enum": [
              "CHAT",
              "AUDIO",
              "VIDEO"
            ],
            "default": "CHAT",
            "example": "CHAT"
          }
        },
        "required": [
          "doctorId"
        ]
      },
      "ConsultationPatientSummaryDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "object",
            "description": "Patient's full name",
            "example": "Kevin Sharma",
            "nullable": true
          },
          "gender": {
            "type": "string",
            "description": "Gender",
            "enum": [
              "MALE",
              "FEMALE",
              "OTHER"
            ],
            "nullable": true
          },
          "ageYears": {
            "type": "object",
            "description": "Age in years (derived from dateOfBirth)",
            "example": 47,
            "nullable": true
          },
          "height": {
            "type": "object",
            "description": "Height in cm",
            "example": 175,
            "nullable": true
          },
          "weight": {
            "type": "object",
            "description": "Weight in kg",
            "example": 65,
            "nullable": true
          },
          "medicalConditions": {
            "description": "Medical history snapshot as a simple list of conditions for quick display in doctor queue.",
            "example": [
              "Diabetes",
              "Thyroid"
            ],
            "nullable": true,
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "profilePictureUrl": {
            "type": "object",
            "description": "Patient's profile picture URL (avatar).",
            "example": "https://cdn.example.com/avatars/patient-123.jpg",
            "nullable": true
          }
        }
      },
      "ConsultationDoctorSummaryDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "object",
            "description": "Doctor's full name",
            "example": "Dr. John Smith",
            "nullable": true
          },
          "specialization": {
            "type": "object",
            "description": "Doctor's specialization",
            "nullable": true
          },
          "experience": {
            "type": "object",
            "description": "Years of experience",
            "example": 10,
            "nullable": true
          },
          "ratingAvg": {
            "type": "object",
            "description": "Average rating",
            "example": "4.5",
            "nullable": true
          },
          "ratingCount": {
            "type": "object",
            "description": "Number of ratings",
            "example": 25,
            "nullable": true
          },
          "ratePerMinute": {
            "type": "object",
            "description": "Rate per minute in INR",
            "example": "45",
            "nullable": true
          },
          "currentWorkplace": {
            "type": "object",
            "description": "Current workplace",
            "example": "City Hospital",
            "nullable": true
          },
          "profilePictureUrl": {
            "type": "object",
            "description": "Doctor's profile picture URL",
            "example": "https://cdn.example.com/avatars/doctor-123.jpg",
            "nullable": true
          },
          "medicalApproach": {
            "type": "object",
            "description": "Medical approach",
            "example": "Allopathy",
            "nullable": true
          },
          "about": {
            "type": "object",
            "description": "About the doctor",
            "example": "Experienced cardiologist...",
            "nullable": true
          },
          "languages": {
            "description": "Languages spoken",
            "nullable": true,
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        }
      },
      "ConsultationResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Consultation ID (UUID). Use for API paths.",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "bookingNumber": {
            "type": "object",
            "description": "Human-readable booking number for display and support (e.g. BN000001)",
            "example": "BN000001"
          },
          "patientId": {
            "type": "string",
            "description": "Patient account ID",
            "example": "123e4567-e89b-12d3-a456-426614174001"
          },
          "doctorId": {
            "type": "string",
            "description": "Doctor account ID (the specific doctor requested)",
            "example": "123e4567-e89b-12d3-a456-426614174002"
          },
          "status": {
            "type": "string",
            "description": "Consultation status",
            "enum": [
              "REQUESTED",
              "EXPIRED",
              "ACCEPTED",
              "ACTIVE",
              "ENDED",
              "SETTLED"
            ],
            "example": "ENDED"
          },
          "mode": {
            "type": "string",
            "description": "Consultation mode",
            "enum": [
              "CHAT",
              "AUDIO",
              "VIDEO"
            ],
            "example": "CHAT"
          },
          "acceptedAt": {
            "format": "date-time",
            "type": "string",
            "description": "When doctor accepted the consultation",
            "example": "2026-01-16T10:00:00Z"
          },
          "startedAt": {
            "format": "date-time",
            "type": "string",
            "description": "When patient joined (first message). Billable time is acceptedAt → endedAt.",
            "example": "2026-01-16T10:00:00Z"
          },
          "endedAt": {
            "format": "date-time",
            "type": "string",
            "description": "When consultation ended",
            "example": "2026-01-16T10:15:00Z"
          },
          "ratePerMinute": {
            "type": "number",
            "description": "Rate per minute used for billing (INR/minute). Stored at accept time so billing and UI use the same rate.",
            "example": 10
          },
          "maxBillableMinutes": {
            "type": "number",
            "description": "Maximum billable minutes calculated at accept time based on patient wallet balance. Billing will never exceed this cap.",
            "example": 10
          },
          "billableMinutes": {
            "type": "number",
            "description": "Billable minutes (rounded up)",
            "example": 15
          },
          "chargeAmount": {
            "type": "string",
            "description": "Total charge amount in INR",
            "example": "150.00"
          },
          "doctorEarning": {
            "type": "string",
            "description": "Doctor's earning (50% of charge). **Only returned for doctor/admin endpoints, not patient endpoints.**",
            "example": "75.00"
          },
          "platformCommission": {
            "type": "string",
            "description": "Platform commission (50% of charge). **Only returned for doctor/admin endpoints, not patient endpoints.**",
            "example": "75.00"
          },
          "isSettled": {
            "type": "boolean",
            "description": "Whether consultation is settled",
            "example": false
          },
          "hasReview": {
            "type": "boolean",
            "description": "Whether the patient has already submitted a review for this consultation. Only present for patient consultation list; use to show \"Give review\" vs \"Reviewed\".",
            "example": false
          },
          "patientSummary": {
            "description": "Patient summary fields (name, gender, age, height, weight, medical history, profilePictureUrl) for doctor views such as /doctor/consultation/queue and past consultations.",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/ConsultationPatientSummaryDto"
              }
            ]
          },
          "doctorSummary": {
            "description": "Doctor summary fields (name, specialization, experience, rating, ratePerMinute, profilePictureUrl, etc.) for patient views such as /patient/consultation and past consultations.",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/ConsultationDoctorSummaryDto"
              }
            ]
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "When consultation was created",
            "example": "2026-01-16T10:00:00Z"
          },
          "updatedAt": {
            "format": "date-time",
            "type": "string",
            "description": "When consultation was last updated",
            "example": "2026-01-16T10:00:00Z"
          }
        },
        "required": [
          "id",
          "patientId",
          "doctorId",
          "status",
          "isSettled",
          "createdAt",
          "updatedAt"
        ]
      },
      "CreateReviewDto": {
        "type": "object",
        "properties": {
          "stars": {
            "type": "number",
            "description": "Star rating (1-5)",
            "minimum": 1,
            "maximum": 5,
            "example": 5
          },
          "text": {
            "type": "string",
            "description": "Optional written review (max 2000 characters)",
            "maxLength": 2000,
            "example": "Very helpful and clear advice."
          }
        },
        "required": [
          "stars"
        ]
      },
      "PatientConsultationsMetaDto": {
        "type": "object",
        "properties": {
          "limit": {
            "type": "number",
            "description": "Number of consultations requested per page",
            "example": 50
          },
          "offset": {
            "type": "number",
            "description": "Number of consultations skipped (offset)",
            "example": 0
          },
          "total": {
            "type": "number",
            "description": "Total number of consultations for this patient (across all pages)",
            "example": 120
          },
          "hasMore": {
            "type": "boolean",
            "description": "Whether there are more consultations after this page (useful for infinite scroll / Load more)",
            "example": true
          }
        },
        "required": [
          "limit",
          "offset",
          "total",
          "hasMore"
        ]
      },
      "GetPatientConsultationsResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "description": "List of consultations for this patient (past and present), ordered by creation time (newest first).",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ConsultationResponseDto"
            }
          },
          "meta": {
            "description": "Pagination metadata for the consultations list",
            "allOf": [
              {
                "$ref": "#/components/schemas/PatientConsultationsMetaDto"
              }
            ]
          }
        },
        "required": [
          "data",
          "meta"
        ]
      },
      "ConsultationStatusDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Consultation ID (UUID)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "bookingNumber": {
            "type": "object",
            "description": "Human-readable booking number (e.g. BN000001)",
            "example": "BN000001"
          },
          "status": {
            "type": "string",
            "description": "Consultation status",
            "enum": [
              "REQUESTED",
              "EXPIRED",
              "ACCEPTED",
              "ACTIVE",
              "ENDED",
              "SETTLED"
            ],
            "example": "REQUESTED"
          },
          "mode": {
            "type": "string",
            "description": "Consultation mode",
            "enum": [
              "CHAT",
              "AUDIO",
              "VIDEO"
            ],
            "example": "CHAT"
          },
          "acceptedAt": {
            "format": "date-time",
            "type": "string",
            "description": "When doctor accepted the consultation",
            "example": "2026-01-16T10:00:00Z"
          },
          "startedAt": {
            "format": "date-time",
            "type": "string",
            "description": "When patient joined (first message). Billable time is acceptedAt → endedAt.",
            "example": "2026-01-16T10:00:00Z"
          },
          "endedAt": {
            "format": "date-time",
            "type": "string",
            "description": "When consultation ended",
            "example": "2026-01-16T10:15:00Z"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "When consultation was created",
            "example": "2026-01-16T10:00:00Z"
          },
          "canJoinChat": {
            "type": "boolean",
            "description": "Whether the patient can move to the chat screen now. Derived from status (true for ACCEPTED/ACTIVE).",
            "example": false
          }
        },
        "required": [
          "id",
          "status",
          "createdAt",
          "canJoinChat"
        ]
      },
      "ConsultationQueueItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Consultation ID (UUID)",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "bookingNumber": {
            "type": "object",
            "description": "Human-readable booking number (e.g. BN000001)",
            "example": "BN000001"
          },
          "patientId": {
            "type": "string",
            "description": "Patient account ID",
            "example": "123e4567-e89b-12d3-a456-426614174001"
          },
          "doctorId": {
            "type": "string",
            "description": "Doctor account ID",
            "example": "123e4567-e89b-12d3-a456-426614174002"
          },
          "status": {
            "type": "string",
            "description": "Consultation status",
            "enum": [
              "REQUESTED",
              "EXPIRED",
              "ACCEPTED",
              "ACTIVE",
              "ENDED",
              "SETTLED"
            ],
            "example": "REQUESTED"
          },
          "mode": {
            "type": "string",
            "description": "Consultation mode",
            "enum": [
              "CHAT",
              "AUDIO",
              "VIDEO"
            ],
            "example": "CHAT"
          },
          "patientSummary": {
            "description": "Patient summary fields (name, gender, age, height, weight, medical history, profilePictureUrl) for doctor views such as /doctor/consultation/queue and past consultations.",
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/ConsultationPatientSummaryDto"
              }
            ]
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "When consultation was created",
            "example": "2026-01-16T10:00:00Z"
          }
        },
        "required": [
          "id",
          "patientId",
          "doctorId",
          "status",
          "createdAt"
        ]
      },
      "RejectConsultationDto": {
        "type": "object",
        "properties": {
          "reason": {
            "type": "string",
            "description": "Optional reason for rejecting the consultation request",
            "example": "Not available at the moment",
            "maxLength": 500
          }
        }
      },
      "SendMessageDto": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "Message content (text)",
            "example": "Hello doctor, I have been experiencing headaches for the past 3 days.",
            "maxLength": 5000
          },
          "messageType": {
            "type": "string",
            "description": "Message type (default: TEXT)",
            "enum": [
              "TEXT",
              "AUDIO",
              "VIDEO"
            ],
            "default": "TEXT"
          },
          "metadata": {
            "type": "object",
            "description": "Additional metadata (e.g., file URLs for audio/video)"
          }
        },
        "required": [
          "content"
        ]
      },
      "MessageResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Message ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "consultationId": {
            "type": "string",
            "description": "Consultation ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "senderId": {
            "type": "string",
            "description": "Sender account ID",
            "example": "123e4567-e89b-12d3-a456-426614174000"
          },
          "senderRole": {
            "type": "string",
            "description": "Sender role",
            "enum": [
              "PATIENT",
              "DOCTOR"
            ],
            "example": "PATIENT"
          },
          "content": {
            "type": "string",
            "description": "Message content",
            "example": "Hello doctor, I have been experiencing headaches."
          },
          "messageType": {
            "type": "string",
            "description": "Message type",
            "enum": [
              "TEXT",
              "AUDIO",
              "VIDEO"
            ],
            "example": "TEXT"
          },
          "createdAt": {
            "format": "date-time",
            "type": "string",
            "description": "Message creation timestamp",
            "example": "2026-01-18T10:30:00.000Z"
          },
          "metadata": {
            "type": "object",
            "description": "Additional metadata"
          }
        },
        "required": [
          "id",
          "consultationId",
          "senderId",
          "senderRole",
          "content",
          "messageType",
          "createdAt"
        ]
      },
      "GetCallTokenResponseDto": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "Zegocloud authentication token (base64 encoded)",
            "example": "eyJhcHBfaWQiOjEyMzQ1Njc4LCJ1c2VyX2lkIjoiYWJjZGVmZ2g..."
          },
          "roomId": {
            "type": "string",
            "description": "Zegocloud room ID (unique per consultation)",
            "example": "consultation_123e4567-e89b-12d3-a456-426614174000"
          },
          "appId": {
            "type": "number",
            "description": "Zegocloud App ID",
            "example": 1234567890
          },
          "expireIn": {
            "type": "number",
            "description": "Token expiration time in seconds",
            "example": 3600
          }
        },
        "required": [
          "token",
          "roomId",
          "appId",
          "expireIn"
        ]
      },
      "StartCallDto": {
        "type": "object",
        "properties": {
          "isVideo": {
            "type": "boolean",
            "description": "Whether this is a video call (true) or audio call (false)",
            "example": false,
            "default": false
          }
        }
      }
    }
  }
}